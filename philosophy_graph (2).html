<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Расширенный граф философских концепций</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            overflow: hidden;
        }

        #container {
            width: 100vw;
            height: 100vh;
            position: relative;
        }

        #graph {
            width: 100%;
            height: 100%;
        }

        .node {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .node:hover {
            filter: brightness(1.3);
        }

        .node circle {
            stroke-width: 3px;
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.4));
        }

        .node.dimmed {
            opacity: 0.2;
        }

        .node.highlighted {
            opacity: 1;
        }

        .node.highlighted circle {
            stroke-width: 5px;
            filter: drop-shadow(0 0 20px rgba(255,255,255,0.8));
        }

        .node.selected circle {
            stroke-width: 6px;
            stroke: #ffd700 !important;
            filter: drop-shadow(0 0 15px #ffd700);
        }

        .node text {
            font-size: 10px;
            font-weight: 600;
            pointer-events: none;
            text-shadow: 0 0 4px black, 0 0 4px black, 0 0 4px black;
            fill: #fff;
        }

        .link {
            fill: none;
            stroke-width: 2px;
            opacity: 0.4;
            transition: opacity 0.3s, stroke-width 0.3s;
        }

        .link:hover {
            opacity: 0.9;
            stroke-width: 3.5px;
        }

        .link.dimmed {
            opacity: 0.1;
        }

        .link.highlighted {
            opacity: 1;
            stroke-width: 4px;
            filter: drop-shadow(0 0 5px currentColor);
        }

        .link.bidirectional {
            stroke-dasharray: 5, 5;
        }

        #legend {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.97);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.4);
            max-width: 340px;
            backdrop-filter: blur(10px);
            max-height: 85vh;
            overflow-y: auto;
            z-index: 1;
        }
        
        #legend h3 {
            margin: 0 0 15px 0;
            color: #1a1a2e;
            font-size: 19px;
            border-bottom: 3px solid #6c5ce7;
            padding-bottom: 10px;
        }
        
        .legend-section {
            margin-bottom: 18px;
        }
        
        .legend-section h4 {
            margin: 0 0 10px 0;
            color: #2d3436;
            font-size: 13px;
            font-weight: 700;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* Стили для radio buttons */
        .legend-item input[type="radio"] {
            margin-right: 8px;
            cursor: pointer;
            width: 16px;
            height: 16px;
            accent-color: #6c5ce7;
        }
        
        .filter-controls {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
        }
        
        .filter-controls button {
            flex: 1;
            background: #95a5a6;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 10px;
            font-weight: 600;
            transition: background 0.3s;
        }
        
        .filter-controls button:hover {
            background: #7f8c8d;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin: 6px 0;
            padding: 5px;
            border-radius: 5px;
            transition: background 0.2s;
            cursor: pointer;
        }
        
        .legend-item:hover {
            background: rgba(108, 92, 231, 0.1);
        }
        
        .legend-item input[type="checkbox"] {
            margin-right: 8px;
            cursor: pointer;
            width: 16px;
            height: 16px;
            accent-color: #6c5ce7;
        }
        
        .legend-item label {
            cursor: pointer;
            font-size: 11px;
            color: #2d3436;
            display: flex;
            align-items: center;
            flex-grow: 1;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 10px;
            border: 2px solid #2d3436;
            flex-shrink: 0;
        }
        
        .legend-line {
            width: 35px;
            height: 2.5px;
            margin-right: 10px;
            flex-shrink: 0;
        }
        
        .filter-stats {
            font-size: 10px;
            color: #7f8c8d;
            font-style: italic;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #e0e0e0;
        }
        
        #legend::-webkit-scrollbar {
            width: 6px;
        }
        
        #legend::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.1);
            border-radius: 10px;
        }
        
        #legend::-webkit-scrollbar-thumb {
            background: #6c5ce7;
            border-radius: 10px;
        }

        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.92);
            color: white;
            padding: 12px 18px;
            border-radius: 10px;
            font-size: 13px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            box-shadow: 0 6px 20px rgba(0,0,0,0.5);
            max-width: 280px;
            border: 1px solid rgba(255,255,255,0.2);
            z-index: 1000;
        }

        .tooltip strong {
            font-size: 15px;
            display: block;
            margin-bottom: 5px;
            color: #a29bfe;
        }

        #controls {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.97);
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        #controls button {
            background: #6c5ce7;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            margin: 3px;
            font-size: 12px;
            font-weight: 600;
            transition: background 0.3s ease; 
        }

        #controls:hover {
            z-index: 9999; /* Высокий приоритет при наведении */
            box-shadow: 0 8px 25px rgba(0,0,0,0.4); /* Усиление тени для визуального эффекта */
        }

        #controls button:hover {
            background: #5f4fd1;
        }

        #controls button.active {
            background: #00b894;
        }

        #info {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.97);
            padding: 15px 20px;
            border-radius: 12px;
            font-size: 13px;
            color: #2d3436;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            font-weight: 500;
            //z-index: 1;
            transition: box-shadow 0.2s ease; /* Плавный переход для визуального эффекта */
        }
        
        #info:hover {
            z-index: 9999; /* Высокий приоритет при наведении */
            box-shadow: 0 8px 25px rgba(0,0,0,0.4); /* Усиление тени для визуального эффекта */
        }
        
        #detailModal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.92);
            color: white;
            padding: 25px 30px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.7);
            max-width: 550px;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 2000;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        #detailModal.show {
            display: block;
        }
        
        #modalOverlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1999;
        }
        
        #modalOverlay.show {
            display: block;
        }
        
        #detailModal h2 {
            margin: 0 0 8px 0;
            color: #a29bfe;
            font-size: 22px;
            font-weight: 600;
        }
        
        #detailModal .philosopher-tag {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            color: white;
            margin-bottom: 12px;
            opacity: 0.9;
        }
        
        #detailModal .description {
            color: #e0e0e0;
            margin-bottom: 18px;
            line-height: 1.5;
            font-size: 13px;
        }
        
        #detailModal .rubric-section {
            background: rgba(255, 255, 255, 0.08);
            padding: 18px;
            border-radius: 10px;
            border-left: 3px solid #a29bfe;
        }
        
        #detailModal .rubric-title {
            font-size: 15px;
            font-weight: 700;
            color: #a29bfe;
            margin-bottom: 6px;
        }
        
        #detailModal .rubric-description {
            font-size: 12px;
            color: #b0b0b0;
            margin-bottom: 14px;
            font-style: italic;
        }
        
        #detailModal .related-concepts {
            margin-top: 12px;
        }
        
        #detailModal .related-title {
            font-size: 13px;
            font-weight: 700;
            color: #e0e0e0;
            margin-bottom: 8px;
        }
        
        #detailModal .concept-item {
            display: flex;
            align-items: center;
            padding: 7px 10px;
            margin: 4px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        #detailModal .concept-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(5px);
            border-color: rgba(162, 155, 254, 0.4);
        }
        
        #detailModal .concept-color {
            width: 11px;
            height: 11px;
            border-radius: 50%;
            margin-right: 10px;
            flex-shrink: 0;
            box-shadow: 0 0 8px currentColor;
        }
        
        #detailModal .concept-name {
            font-size: 13px;
            color: #e0e0e0;
            flex-grow: 1;
        }
        
        #detailModal .concept-philosopher {
            font-size: 10px;
            color: #a0a0a0;
            font-style: italic;
        }
        
        #detailModal .close-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            font-size: 18px;
            line-height: 1;
            transition: all 0.2s;
        }
        
        #detailModal .close-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: rotate(90deg);
        }
        
        #detailModal::-webkit-scrollbar {
            width: 6px;
        }
        
        #detailModal::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        #detailModal::-webkit-scrollbar-thumb {
            background: #a29bfe;
            border-radius: 10px;
        }
        
        #detailModal::-webkit-scrollbar-thumb:hover {
            background: #8b7fe6;
        }
        
        /* Панель поиска пути - с возможностью сворачивания */
        #pathFinder {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.97);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.4);
            max-width: 320px;
            max-height: 85vh;
            overflow-y: auto;
            backdrop-filter: blur(10px);
            z-index: 100;
            transition: all 0.3s ease;
        }

        #pathFinder::-webkit-scrollbar {
            width: 6px;
        }
        
        #pathFinder::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.1);
            border-radius: 10px;
        }
        
        #pathFinder::-webkit-scrollbar-thumb {
            background: #6c5ce7;
            border-radius: 10px;
        }
        
        #pathFinder.collapsed {
            max-width: 60px;
            padding: 10px;
        }
        
        #pathFinder.collapsed .panel-content {
            display: none;
        }
        
        #pathFinder h3 {
            margin: 0 0 15px 0;
            color: #1a1a2e;
            font-size: 17px;
            border-bottom: 3px solid #e74c3c;
            padding-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        #pathFinder.collapsed h3 {
            border-bottom: none;
            margin: 0;
            padding: 0;
        }
        
        .path-select-group {
            margin-bottom: 15px;
        }
        
        .path-select-group label {
            display: block;
            font-size: 12px;
            font-weight: 700;
            color: #2d3436;
            margin-bottom: 5px;
        }
        
        .path-select-group select {
            width: 100%;
            padding: 8px 10px;
            border: 2px solid #dfe6e9;
            border-radius: 8px;
            font-size: 12px;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s;
        }
        
        .path-select-group select:focus {
            outline: none;
            border-color: #e74c3c;
        }
        
        #findPathBtn {
            width: 100%;
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: background 0.3s;
            margin-bottom: 10px;
        }
        
        #findPathBtn:hover {
            background: #c0392b;
        }
        
        #pathResult {
            margin-top: 15px;
            padding: 12px;
            background: rgba(231, 76, 60, 0.1);
            border-radius: 8px;
            border-left: 3px solid #e74c3c;
            display: none;
        }
        
        #pathResult.show {
            display: block;
        }
        
        #pathResult .path-length {
            font-size: 12px;
            font-weight: 700;
            color: #e74c3c;
            margin-bottom: 8px;
        }
        
        #pathResult .path-chain {
            font-size: 11px;
            color: #2d3436;
            line-height: 1.6;
        }
        
        #pathResult .path-node {
            display: inline-block;
            padding: 3px 8px;
            background: white;
            border-radius: 4px;
            margin: 2px;
            border: 1px solid #e74c3c;
        }
        
        #pathResult .path-arrow {
            color: #e74c3c;
            margin: 0 5px;
        }
        
        /* Контейнер для узла пути с философом */
        .path-node-container {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            margin: 2px;
            vertical-align: middle;
        }
        
        .path-philosopher {
            font-size: 9px;
            color: #95a5a6;
            font-style: italic;
            margin-bottom: 2px;
            white-space: nowrap;
        }
        
        .path-node {
            display: inline-block;
            padding: 3px 8px;
            background: white;
            border-radius: 4px;
            margin: 0;
            border: 1px solid;
        }
        
        .path-arrow {
            display: inline-flex;
            align-items: center;
            margin: 0 5px;
            font-weight: bold;
            font-size: 14px;
            vertical-align: middle;
        }
        
        .path-arrow.bidirectional {
            font-size: 12px;
        }
        
        /* Панель статистики - с возможностью сворачивания */
        #statsPanel {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.97);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.4);
            max-width: 320px;
            max-height: 450px;
            z-index: 1;
            overflow-y: auto;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        #statsPanel.collapsed {
            max-width: 60px;
            max-height: 60px;
            padding: 10px;
            overflow: hidden;
        }
        
        #statsPanel.collapsed .panel-content {
            display: none;
        }
        
        #statsPanel h3 {
            margin: 0 0 15px 0;
            color: #1a1a2e;
            font-size: 17px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        #statsPanel.collapsed h3 {
            border-bottom: none;
            margin: 0;
            padding: 0;
        }
        
        /* Кнопка сворачивания */
        .collapse-btn {
            background: rgba(0, 0, 0, 0.1);
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-size: 14px;
            line-height: 1;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
        }
        
        .collapse-btn:hover {
            background: rgba(0, 0, 0, 0.2);
            transform: scale(1.1);
        }
        
        .collapsed .collapse-btn {
            width: 40px;
            height: 40px;
            font-size: 20px;
        }
        
        .stats-section {
            margin-bottom: 20px;
        }
        
        .stats-section h4 {
            font-size: 13px;
            font-weight: 700;
            color: #2d3436;
            margin: 0 0 10px 0;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            padding: 6px 8px;
            margin: 4px 0;
            background: rgba(52, 152, 219, 0.08);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .stat-item:hover {
            background: rgba(52, 152, 219, 0.18);
            transform: translateX(3px);
        }
        
        .stat-rank {
            font-size: 13px;
            font-weight: 700;
            color: #3498db;
            min-width: 25px;
        }
        
        .stat-name {
            flex-grow: 1;
            font-size: 11px;
            color: #2d3436;
        }
        
        .stat-value {
            font-size: 11px;
            font-weight: 600;
            color: #7f8c8d;
        }
        
        .stat-philosopher {
            font-size: 9px;
            color: #95a5a6;
            font-style: italic;
            margin-left: 5px;
        }
        
        #statsPanel::-webkit-scrollbar {
            width: 6px;
        }
        
        #statsPanel::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.1);
            border-radius: 10px;
        }
        
        #statsPanel::-webkit-scrollbar-thumb {
            background: #3498db;
            border-radius: 10px;
        }
        
        /* Улучшенные связи с весами */
        .link.weight-weak {
            stroke-width: 2px;
        }
        
        .link.weight-medium {
            stroke-width: 3px;
        }
        
        .link.weight-strong {
            stroke-width: 5px;
        }
        
        .link.path-highlight {
            stroke-width: 6px !important;
            opacity: 1 !important;
            filter: drop-shadow(0 0 8px currentColor);
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        /* Стили для внутренних противоречий */
        .link.internal-contradiction {
            stroke-dasharray: 8, 4;
            animation: dash 20s linear infinite;
        }
        
        @keyframes dash {
            to {
                stroke-dashoffset: -1000;
            }
        }
        
        /* Легенда весов */
        .weight-legend {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #e0e0e0;
        }
        
        .weight-item {
            display: flex;
            align-items: center;
            margin: 5px 0;
            font-size: 10px;
            color: #7f8c8d;
        }
        
        .weight-line {
            height: 2px;
            margin-right: 10px;
            background: #95a5a6;
            flex-shrink: 0;
        }
        
        .weight-line.weak { width: 20px; height: 2px; }
        .weight-line.medium { width: 20px; height: 3px; }
        .weight-line.strong { width: 20px; height: 5px; }
        
        /* Плавная анимация для заголовков при сворачивании */
        .panel-title {
            transition: opacity 0.2s;
        }
        
        .collapsed .panel-title {
            opacity: 0;
            font-size: 0;
            overflow: hidden;
        }
        
        /* Иконка разворачивания для свернутых панелей */
        .collapsed .collapse-btn .expand-icon {
            font-size: 24px;
            font-weight: bold;
        }
        
        /* Стили для табов метрик */
        .metric-tabs {
            display: flex;
            gap: 3px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            flex: 1;
            min-width: 70px;
            background: #ecf0f1;
            border: none;
            padding: 6px 4px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 10px;
            font-weight: 600;
            transition: background 0.2s;
            color: #2d3436;
        }
        
        .tab-btn:hover {
            background: #d5dbde;
        }
        
        .tab-btn.active {
            background: #3498db;
            color: white;
        }
        
        /* Стили для прогресс-бара */
        #analysisProgress {
            display: none;
            margin-top: 15px;
            padding: 12px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 8px;
        }
        
        /* Стили для блока описания метрики */
        .metric-description {
            background: rgba(52, 152, 219, 0.1);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 12px;
            font-size: 11px;
            line-height: 1.6;
        }
        
        .metric-description-title {
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 6px;
            font-size: 12px;
        }
        
        .metric-description-content {
            color: #34495e;
            margin-bottom: 8px;
        }
        
        .metric-description-formula {
            color: #7f8c8d;
            font-style: italic;
            font-size: 10px;
        }

        /* Модальное окно выбора анализа */
        #selectiveAnalysisModal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.97);
            padding: 25px 30px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.7);
            max-width: 450px;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 2000;
            border: 1px solid rgba(0,0,0,0.2);
        }

        #selectiveAnalysisModal.show {
            display: block;
        }

        #selectiveAnalysisModal h3 {
            margin: 0 0 15px 0;
            color: #1a1a2e;
            font-size: 18px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        .analysis-option {
            display: flex;
            align-items: center;
            padding: 8px;
            margin: 5px 0;
            border-radius: 5px;
            transition: background 0.2s;
            cursor: pointer;
        }

        .analysis-option:hover {
            background: rgba(52, 152, 219, 0.1);
        }

        .analysis-option input[type="checkbox"] {
            margin-right: 10px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .analysis-option label {
            cursor: pointer;
            flex-grow: 1;
            font-size: 12px;
            color: #2d3436;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-buttons button {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: background 0.3s;
        }

        .modal-buttons .primary-btn {
            background: #3498db;
            color: white;
        }

        .modal-buttons .primary-btn:hover {
            background: #2980b9;
        }

        .modal-buttons .secondary-btn {
            background: #95a5a6;
            color: white;
        }

        .modal-buttons .secondary-btn:hover {
            background: #7f8c8d;
        }

        /* Кнопка перехода к узлу */
        .goto-node-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            margin-top: 10px;
            transition: background 0.3s;
        }

        .goto-node-btn:hover {
            background: #229954;
        }

        /* Секция связей узла */
        .connections-section {
            margin-top: 20px;
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            border-left: 3px solid #3498db;
        }

        .connections-title {
            font-size: 15px;
            font-weight: 700;
            color: #a29bfe;
            margin-bottom: 10px;
        }

        .connection-item {
            display: flex;
            align-items: center;
            padding: 8px 10px;
            margin: 5px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .connection-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(5px);
        }

        .connection-arrow {
            font-size: 16px;
            margin: 0 10px;
            position: relative;
        }

        .connection-arrow-tooltip {
            visibility: hidden;
            background-color: rgba(0, 0, 0, 0.9);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            font-size: 11px;
        }

        .connection-arrow:hover .connection-arrow-tooltip {
            visibility: visible;
        }

        .show-all-concepts-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 11px;
            font-weight: 600;
            margin-top: 8px;
            transition: background 0.3s;
        }

        .show-all-concepts-btn:hover {
            background: #2980b9;
        }

        /* Режим одинаковой толщины связей */
        .uniform-width-links .link {
            stroke-width: 2px !important;
        }

        /* Стили для режима хронологии */
        .chronology-mode-selector {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #dfe6e9;
        }

        .chronology-mode-selector label {
            display: block;
            font-size: 11px;
            font-weight: 700;
            color: #2d3436;
            margin-bottom: 5px;
        }

        .chronology-mode-selector select {
            width: 100%;
            padding: 6px 8px;
            border: 2px solid #dfe6e9;
            border-radius: 6px;
            font-size: 11px;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        .chronology-mode-selector select:focus {
            outline: none;
            border-color: #e74c3c;
        }

        .chronology-info {
            margin-top: 8px;
            padding: 8px;
            background: rgba(231, 76, 60, 0.05);
            border-radius: 5px;
            font-size: 10px;
            color: #7f8c8d;
            line-height: 1.4;
        }

        .chronology-info strong {
            color: #2d3436;
        }

        /* Предупреждения об анахронизмах */
        .anachronism-warnings {
            margin-top: 10px;
            padding: 10px;
            background: rgba(255, 193, 7, 0.1);
            border-left: 3px solid #ffc107;
            border-radius: 5px;
        }

        .anachronism-warnings-title {
            font-size: 11px;
            font-weight: 700;
            color: #f39c12;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
        }

        .anachronism-warnings-title::before {
            content: "⚠️";
            margin-right: 5px;
        }

        .anachronism-item {
            font-size: 10px;
            color: #856404;
            padding: 4px 0;
            line-height: 1.4;
        }

        .anachronism-item::before {
            content: "→";
            margin-right: 5px;
            color: #f39c12;
        }
        
    </style>
</head>
<body>
    <div id="container">
        <svg id="graph"></svg>
        
        <div id="modalOverlay"></div>
            <div id="detailModal">
                <button class="close-btn" onclick="closeDetailModal()">×</button>
                <div id="modalContent"></div>
            </div>

            <!-- Модальное окно выборочного анализа -->
            <div id="selectiveAnalysisModal">
                <h3> Выборочный анализ</h3>
                <div id="analysisOptions">
                    <div class="analysis-option">
                        <input type="checkbox" id="opt-pagerank" checked>
                        <label for="opt-pagerank">PageRank</label>
                    </div>
                    <div class="analysis-option">
                        <input type="checkbox" id="opt-betweenness" checked>
                        <label for="opt-betweenness">Betweenness Centrality</label>
                    </div>
                    <div class="analysis-option">
                        <input type="checkbox" id="opt-closeness" checked>
                        <label for="opt-closeness">Closeness Centrality</label>
                    </div>
                    <div class="analysis-option">
                        <input type="checkbox" id="opt-clustering" checked>
                        <label for="opt-clustering">Clustering Coefficient</label>
                    </div>
                    <div class="analysis-option">
                        <input type="checkbox" id="opt-eigenvector" checked>
                        <label for="opt-eigenvector">Eigenvector Centrality</label>
                    </div>
                </div>
                <div class="modal-buttons">
                    <button class="primary-btn" onclick="runSelectiveAnalysis()">Запустить</button>
                    <button class="secondary-btn" onclick="closeSelectiveAnalysisModal()">Отмена</button>
                </div>
            </div>
        
        <div id="legend">
            <h3>🔍 Фильтры и легенда</h3>
            
            <div class="legend-section">
                <h4>
                    <span>Философы:</span>
                </h4>
                <div class="filter-controls">
                    <button onclick="selectAllPhilosophers()">Все</button>
                    <button onclick="deselectAllPhilosophers()">Сбросить</button>
                </div>
                <div id="philosopherFilters"></div>
            </div>
        
            <div class="legend-section">
                <h4>
                    <span>Режим фильтрации:</span>
                </h4>
                <div class="legend-item">
                    <input type="radio" id="filterAll" name="filterMode" value="all" checked onchange="changeFilterMode('all')">
                    <label for="filterAll" style="font-size: 11px;">
                        <span>Только выбранные философы</span>
                    </label>
                </div>
                <div class="legend-item">
                    <input type="radio" id="filterInternal" name="filterMode" value="internal" onchange="changeFilterMode('internal')">
                    <label for="filterInternal" style="font-size: 11px;">
                        <span>Только внутренние связи</span>
                    </label>
                </div>
                <div class="legend-item">
                    <input type="radio" id="filterContext" name="filterMode" value="context" onchange="changeFilterMode('context')">
                    <label for="filterContext" style="font-size: 11px;">
                        <span>С соседними узлами</span>
                    </label>
                </div>
                <div class="legend-item">
                    <input type="radio" id="filterExternal" name="filterMode" value="external" onchange="changeFilterMode('external')">
                    <label for="filterExternal" style="font-size: 11px;">
                        <span>Только внешние связи</span>
                    </label>
                </div>
                <div style="font-size: 10px; color: #7f8c8d; margin-top: 8px; padding: 8px; background: rgba(108, 92, 231, 0.05); border-radius: 5px; line-height: 1.4;">
                    <strong>Режимы:</strong><br>
                    • <em>Только выбранные</em> - узлы и связи между ними<br>
                    • <em>Только внутренние</em> - связи внутри систем<br>
                    • <em>С соседними</em> - включая связанные узлы других философов<br>
                    • <em>Только внешние</em> - узлы с внешними связями
                </div>
            </div>

            <div class="legend-section">
                <h4>
                    <span>Отображение связей:</span>
                </h4>
                <div class="legend-item">
                    <input type="checkbox" id="uniformLinkWidth" onchange="toggleUniformLinkWidth()">
                    <label for="uniformLinkWidth" style="font-size: 11px;">
                        <span>Одинаковая толщина связей</span>
                    </label>
                </div>
            </div>
        
            <div class="legend-section">
                <h4>
                    <span>Типы связей:</span>
                </h4>
                <div class="filter-controls">
                    <button onclick="selectAllRelations()">Все</button>
                    <button onclick="deselectAllRelations()">Сбросить</button>
                </div>
                <div id="relationFilters"></div>
                <div class="weight-legend">
                    <div class="weight-item">
                        <div class="weight-line weak"></div>
                        <span>Слабое влияние</span>
                    </div>
                    <div class="weight-item">
                        <div class="weight-line medium"></div>
                        <span>Среднее влияние</span>
                    </div>
                    <div class="weight-item">
                        <div class="weight-line strong"></div>
                        <span>Сильное влияние</span>
                    </div>
                </div>
            </div>
        
            <div class="filter-stats" id="filterStats">
                Показано: все концепции и связи
            </div>
        </div>
        
        <!-- Панель поиска пути -->
        <div id="pathFinder">
            <h3>
                <span class="panel-title">🔍 Путь между концепциями</span>
                <button class="collapse-btn" onclick="togglePanel('pathFinder')" title="Свернуть/Развернуть">
                    <span class="expand-icon">−</span>
                </button>
            </h3>
            <div class="panel-content">
                <div class="path-select-group">
                    <label for="sourceSelect">От концепции:</label>
                    <select id="sourceSelect">
                        <option value="">Выберите концепцию...</option>
                    </select>
                </div>
                <div class="path-select-group">
                    <label for="targetSelect">К концепции:</label>
                    <select id="targetSelect">
                        <option value="">Выберите концепцию...</option>
                    </select>
                </div>
                <button id="findPathBtn" onclick="findAndShowPath()">Найти путь</button>
                
                <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid #dfe6e9;">
                    <div style="font-size: 11px; margin-bottom: 8px;">
                        <label style="display: flex; align-items: center; margin-bottom: 5px; cursor: pointer;">
                            <input type="checkbox" id="respectChronology" checked style="margin-right: 8px;">
                            <span>Учитывать хронологию</span>
                        </label>
                        <label style="display: flex; align-items: center; margin-bottom: 5px; cursor: pointer;">
                            <input type="checkbox" id="respectDirectionPath" checked style="margin-right: 8px;">
                            <span>Учитывать направленность связей</span>
                        </label>
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" id="useWeightsPath" checked style="margin-right: 8px;">
                            <span>Учитывать веса связей</span>
                        </label>
                    </div>
                    
                    <!-- Режим строгости хронологии -->
                    <div class="chronology-mode-selector" id="chronologyModeContainer">
                        <label for="chronologyModeSelect">Режим хронологии:</label>
                        <select id="chronologyModeSelect">
                            <option value="strict">Строгий (периоды активности)</option>
                            <option value="moderate">Умеренный (±50 лет)</option>
                            <option value="loose">Свободный (±100 лет)</option>
                        </select>
                        <div class="chronology-info" id="chronologyModeInfo">
                            <strong>Строгий режим:</strong> учитывает реальные периоды жизни и активности философов. Блокирует анахронизмы.
                        </div>
                    </div>
                </div>
                
                <div id="pathResult"></div>
            </div>
        </div>
        
        <!-- Панель статистики с кнопками управления -->
        <div id="statsPanel">
            <h3>
                <span class="panel-title">📊 Анализ графа</span>
                <button class="collapse-btn" onclick="togglePanel('statsPanel')" title="Свернуть/Развернуть">
                    <span class="expand-icon">−</span>
                </button>
            </h3>
            <div class="panel-content">
                <!-- Переключатели режимов -->
                <div class="stats-section">
                    <label style="display: flex; align-items: center; cursor: pointer; font-size: 11px; margin-bottom: 8px;">
                        <input type="checkbox" id="useWeightsToggle" checked style="margin-right: 8px;" onchange="toggleWeightUsage()">
                        <span>Учитывать веса связей</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; font-size: 11px; margin-bottom: 10px;">
                        <input type="checkbox" id="respectDirectionToggle" checked style="margin-right: 8px;" onchange="toggleDirectionUsage()">
                        <span>Учитывать направленность связей</span>
                    </label>
                </div>
                
                <!-- Кнопки запуска анализа -->
                <div class="stats-section">
                    <h4>Запуск анализа:</h4>
                    <div style="display: flex; flex-direction: column; gap: 5px;">
                        <button onclick="runFullAnalysis()" style="width: 100%; background: #3498db; color: white; border: none; padding: 8px; border-radius: 6px; cursor: pointer; font-size: 11px; font-weight: 600;">
                             Полный анализ
                        </button>
                        <button onclick="runQuickAnalysis()" style="width: 100%; background: #27ae60; color: white; border: none; padding: 8px; border-radius: 6px; cursor: pointer; font-size: 11px; font-weight: 600;">
                            ⚡ Быстрый анализ
                        </button>
                        <button onclick="showSelectiveAnalysisModal()" style="width: 100%; background: #9b59b6; color: white; border: none; padding: 8px; border-radius: 6px; cursor: pointer; font-size: 11px; font-weight: 600;">
                             Выборочный анализ
                        </button>
                        <button onclick="clearAllCache()" style="width: 100%; background: #95a5a6; color: white; border: none; padding: 8px; border-radius: 6px; cursor: pointer; font-size: 11px; font-weight: 600;">
                             Сбросить кэш
                        </button>
                    </div>
                </div>
                
                <!-- Общая статистика -->
                <div class="stats-section" id="generalStatsSection" style="display: none;">
                    <h4>Общая статистика</h4>
                    <div id="generalStats" style="font-size: 11px; line-height: 1.8;"></div>
                </div>
                
                <!-- Кнопка визуализации размером -->
                <div class="stats-section" id="visualizationSection" style="display: none;">
                    <button id="visualizeSizeBtn" onclick="toggleVisualizationBySize()" style="width: 100%; background: #27ae60; color: white; border: none; padding: 8px; border-radius: 6px; cursor: pointer; font-size: 11px; font-weight: 600; transition: background 0.3s;">
                        📏 Визуализировать размером
                    </button>
                </div>
                
                <!-- Табы для метрик -->
                <div class="stats-section" id="metricsSection" style="display: none;">
                    <div class="metric-tabs" style="display: flex; gap: 3px; margin-bottom: 10px; flex-wrap: wrap;">
                        <button class="tab-btn" data-metric="degree" onclick="switchMetric('degree')" style="flex: 1; min-width: 70px; background: #ecf0f1; border: none; padding: 6px 4px; border-radius: 4px; cursor: pointer; font-size: 10px; font-weight: 600; transition: background 0.2s;">
                            Degree
                        </button>
                        <button class="tab-btn" data-metric="pagerank" onclick="switchMetric('pagerank')" style="flex: 1; min-width: 70px; background: #ecf0f1; border: none; padding: 6px 4px; border-radius: 4px; cursor: pointer; font-size: 10px; font-weight: 600; transition: background 0.2s;">
                            PageRank
                        </button>
                        <button class="tab-btn" data-metric="betweenness" onclick="switchMetric('betweenness')" style="flex: 1; min-width: 70px; background: #ecf0f1; border: none; padding: 6px 4px; border-radius: 4px; cursor: pointer; font-size: 10px; font-weight: 600; transition: background 0.2s;">
                            Between.
                        </button>
                        <button class="tab-btn" data-metric="closeness" onclick="switchMetric('closeness')" style="flex: 1; min-width: 70px; background: #ecf0f1; border: none; padding: 6px 4px; border-radius: 4px; cursor: pointer; font-size: 10px; font-weight: 600; transition: background 0.2s;">
                            Closeness
                        </button>
                        <button class="tab-btn" data-metric="clustering" onclick="switchMetric('clustering')" style="flex: 1; min-width: 70px; background: #ecf0f1; border: none; padding: 6px 4px; border-radius: 4px; cursor: pointer; font-size: 10px; font-weight: 600; transition: background 0.2s;">
                            Clustering
                        </button>
                        <button class="tab-btn" data-metric="eigenvector" onclick="switchMetric('eigenvector')" style="flex: 1; min-width: 70px; background: #ecf0f1; border: none; padding: 6px 4px; border-radius: 4px; cursor: pointer; font-size: 10px; font-weight: 600; transition: background 0.2s;">
                            Eigenvec.
                        </button>
                    </div>
                    <div id="metricContent"></div>
                </div>
                
                <!-- Индикатор прогресса -->
                <div id="analysisProgress" style="display: none; margin-top: 15px; padding: 12px; background: rgba(52, 152, 219, 0.1); border-radius: 8px;">
                    <div style="font-size: 11px; color: #2d3436; margin-bottom: 8px;">
                        <strong id="progressLabel">Вычисление...</strong>
                    </div>
                    <div style="background: rgba(52, 152, 219, 0.2); height: 6px; border-radius: 3px; overflow: hidden;">
                        <div id="progressBar" style="background: #3498db; height: 100%; width: 0%; transition: width 0.3s;"></div>
                    </div>
                    <div style="font-size: 10px; color: #7f8c8d; margin-top: 5px;">
                        <span id="progressPercent">0%</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="controls">
            <button onclick="resetSimulation()">🔄 Перезапустить</button>
            <button onclick="centerGraph()">🎯 Центрировать</button>
            <button id="groupBtn" onclick="toggleGrouping()">📦 Группировать</button>
            <div id="exportButtons">
                <button onclick="exportToPNG()">💾 PNG</button>
                <button onclick="exportToSVG()">💾 SVG</button>
            </div>
        </div>

        <div id="info">
            💡 Клик - подсветка • Ctrl+клик - множественный выбор • Двойной клик - детали • Перетаскивайте • Колесо - масштаб
        </div>

        <div class="tooltip" id="tooltip"></div>
    </div>

    <script>
        // ============================================
        // 1. ФИЛОСОФЫ (единый источник истины)
        // ============================================
        const philosophers = [
        { id: "pythagoras", name: "Пифагор", nameRu: "Пифагор", color: "#8E44AD", birth: -570, death: -495, years: "570-495 до н.э." },
        { id: "heraclitus", name: "Гераклит", nameRu: "Гераклит", color: "#E74C3C", birth: -535, death: -475, years: "535-475 до н.э." },
        { id: "parmenides", name: "Парменид", nameRu: "Парменид", color: "#3498DB", birth: -515, death: -450, years: "515-450 до н.э." },
        { id: "socrates", name: "Сократ", nameRu: "Сократ", color: "#2ECC71", birth: -469, death: -399, years: "469-399 до н.э." },
        { id: "plato", name: "Платон", nameRu: "Платон", color: "#F39C12", birth: -428, death: -348, years: "428-348 до н.э." },
        { id: "aristotle", name: "Аристотель", nameRu: "Аристотель", color: "#1ABC9C", birth: -384, death: -322, years: "384-322 до н.э." },
        { id: "plotinus", name: "Плотин", nameRu: "Плотин", color: "#9B59B6", birth: 204, death: 270, years: "204-270" },
        { id: "augustine", name: "Августин", nameRu: "Августин", color: "#34495E", birth: 354, death: 430, years: "354-430" },
        { id: "aquinas", name: "Фома Аквинский", nameRu: "Фома Аквинский", color: "#D35400", birth: 1225, death: 1274, years: "1225-1274" },
        { id: "bacon", name: "Бэкон", nameRu: "Фрэнсис Бэкон", color: "#16A085", birth: 1561, death: 1626, years: "1561-1626" },
        { id: "descartes", name: "Декарт", nameRu: "Декарт", color: "#C0392B", birth: 1596, death: 1650, years: "1596-1650" },
        { id: "locke", name: "Локк", nameRu: "Локк", color: "#27AE60", birth: 1632, death: 1704, years: "1632-1704" },
        { id: "spinoza", name: "Спиноза", nameRu: "Спиноза", color: "#7F8C8D", birth: 1632, death: 1677, years: "1632-1677" },
        { id: "leibniz", name: "Лейбниц", nameRu: "Лейбниц", color: "#2980B9", birth: 1646, death: 1716, years: "1646-1716" },
        { id: "berkeley", name: "Беркли", nameRu: "Беркли", color: "#8E44AD", birth: 1685, death: 1753, years: "1685-1753" },
        { id: "hume", name: "Юм", nameRu: "Юм", color: "#E67E22", birth: 1711, death: 1776, years: "1711-1776" },
        { id: "kant", name: "Кант", nameRu: "Кант", color: "#2C3E50", birth: 1724, death: 1804, years: "1724-1804" },
        { id: "fichte", name: "Фихте", nameRu: "Фихте", color: "#1ABC9C", birth: 1762, death: 1814, years: "1762-1814" },
        { id: "hegel", name: "Гегель", nameRu: "Гегель", color: "#F1C40F", birth: 1770, death: 1831, years: "1770-1831" },
        { id: "schopenhauer", name: "Шопенгауэр", nameRu: "Шопенгауэр", color: "#BDC3C7", birth: 1788, death: 1860, years: "1788-1860" },
        { id: "comte", name: "Конт", nameRu: "Огюст Конт", color: "#E74C3C", birth: 1798, death: 1857, years: "1798-1857" },
        { id: "kierkegaard", name: "Кьеркегор", nameRu: "Кьеркегор", color: "#3498DB", birth: 1813, death: 1855, years: "1813-1855" },
        { id: "marx", name: "Маркс", nameRu: "Маркс", color: "#2ECC71", birth: 1818, death: 1883, years: "1818-1883" },
        { id: "nietzsche", name: "Ницше", nameRu: "Ницше", color: "#9B59B6", birth: 1844, death: 1900, years: "1844-1900" },
        { id: "frege", name: "Фреге", nameRu: "Готлоб Фреге", color: "#F39C12", birth: 1848, death: 1925, years: "1848-1925" },
        { id: "dewey", name: "Дьюи", nameRu: "Джон Дьюи", color: "#16A085", birth: 1859, death: 1952, years: "1859-1952" },
        { id: "bergson", name: "Бергсон", nameRu: "Анри Бергсон", color: "#D35400", birth: 1859, death: 1941, years: "1859-1941" },
        { id: "husserl", name: "Гуссерль", nameRu: "Гуссерль", color: "#34495E", birth: 1859, death: 1938, years: "1859-1938" },
        { id: "russell", name: "Рассел", nameRu: "Бертран Рассел", color: "#C0392B", birth: 1872, death: 1970, years: "1872-1970" },
        { id: "heidegger", name: "Хайдеггер", nameRu: "Хайдеггер", color: "#27AE60", birth: 1889, death: 1976, years: "1889-1976" },
        { id: "wittgenstein", name: "Витгенштейн", nameRu: "Витгенштейн", color: "#7F8C8D", birth: 1889, death: 1951, years: "1889-1951" },
        { id: "lacan", name: "Лакан", nameRu: "Жак Лакан", color: "#2980B9", birth: 1901, death: 1981, years: "1901-1981" },
        { id: "sartre", name: "Сартр", nameRu: "Сартр", color: "#E67E22", birth: 1905, death: 1980, years: "1905-1980" },
        { id: "deleuze", name: "Делёз", nameRu: "Делёз", color: "#2C3E50", birth: 1925, death: 1995, years: "1925-1995" },
        { id: "foucault", name: "Фуко", nameRu: "Фуко", color: "#1ABC9C", birth: 1926, death: 1984, years: "1926-1984" }
        ];
        
        // ============================================
        // 2. РУБРИКИ (тематические категории)
        // ============================================
        const rubrics = [
            {
                id: "being",
                name: "Бытие/Существование",
                description: "Фундаментальные вопросы о природе реальности и существования"
            },
            {
                id: "freedom",
                name: "Свобода",
                description: "Природа человеческой свободы и её ограничений"
            },
            {
                id: "knowledge",
                name: "Истина/Познание",
                description: "Вопросы познания, истины и её критериев"
            },
            {
                id: "consciousness",
                name: "Субъект/Сознание/Я",
                description: "Природа сознания, самосознания и субъективности"
            },
            {
                id: "matter",
                name: "Тело/Материя",
                description: "Материальное измерение реальности"
            },
            {
                id: "time",
                name: "Время",
                description: "Природа времени и темпоральности"
            },
            {
                id: "ethics",
                name: "Мораль/Этика",
                description: "Вопросы добра, зла и правильного действия"
            },
            {
                id: "politics",
                name: "Власть/Политика",
                description: "Социальные и политические отношения"
            },
            {
                id: "language",
                name: "Язык",
                description: "Роль языка в познании и коммуникации"
            },
            {
                id: "absolute",
                name: "Бог/Абсолют",
                description: "Божественное, абсолютное и метафизическое"
            },
            {
                id: "dialectics",
                name: "Диалектика/Процесс",
                description: "Динамика развития и преобразования"
            },
            {
                id: "will",
                name: "Воля/Желание",
                description: "Волевое и желающее измерение существования"
            },
            {
                id: "method",
                name: "Метод",
                description: "Философские методы и подходы"
            }
        ];
        
        // ============================================
        // 3. ТИПЫ СВЯЗЕЙ
        // ============================================
        const relationTypes = [
        // Исходные типы
        { id: "oppose", label: "противопоставление", color: "#E74C3C" },
        { id: "ground", label: "обосновывает", color: "#3498DB" },
        { id: "develop", label: "развивает", color: "#2ECC71" },
        { id: "critique", label: "критикует", color: "#F39C12" },
        { id: "synthesize", label: "синтезирует", color: "#9B59B6" },
        { id: "influence", label: "влияет", color: "#1ABC9C" },
        { id: "dialogue", label: "диалог", color: "#34495E" },
        { id: "internal_contradiction", label: "внутреннее противоречие", color: "#C0392B" },
        
        // Новые типы для внутренних связей
        { id: "presuppose", label: "предполагает", color: "#27AE60" },
        { id: "apply", label: "применяет", color: "#8E44AD" },
        { id: "condition", label: "условие", color: "#2980B9" },
        { id: "exemplify", label: "иллюстрирует", color: "#D35400" },
        { id: "instrument", label: "инструмент для", color: "#7F8C8D" },
        { id: "complement", label: "дополняет", color: "#E67E22" },
        { id: "culminate", label: "кульминирует в", color: "#16A085" },
        { id: "mediate", label: "опосредует", color: "#F1C40F" },
        { id: "emerge_from", label: "возникает из", color: "#2C3E50" },
        { id: "limit", label: "ограничивает", color: "#BDC3C7" }
        ];
        
        // ============================================
        // 4. КОНЦЕПЦИИ
        // ============================================
        const concepts = [
            // ПИФАГОР
            { 
                id: "number_essence", 
                label: "Число как сущность", 
                philosopher: "pythagoras", 
                rubrics: ["being"], 
                description: "Всё есть число",
                extendedDescription: "Фундаментальный принцип пифагореизма: 'всё есть число' (ἀριθμός). Числа не просто описывают вещи, но составляют их подлинную сущность и структуру. Через числовые отношения и пропорции раскрывается внутренняя природа космоса. Пифагорейцы открывали математические закономерности в музыке, астрономии, геометрии и видели в этом доказательство числовой природы реальности. Число - это не абстракция, а живая сущность, первопринцип бытия, предшествующий материи и форме."
            },
            { 
                id: "harmony_spheres", 
                label: "Гармония сфер", 
                philosopher: "pythagoras", 
                rubrics: ["being"], 
                description: "Математическая гармония космоса",
                extendedDescription: "Учение о том, что движение небесных тел порождает гармоническую музыку сфер, основанную на математических пропорциях. Расстояния между планетами соответствуют музыкальным интервалам, создавая космическую симфонию. Эта музыка неслышима для людей, привыкших к ней с рождения, но может быть постигнута разумом через математику. Гармония сфер выражает пифагорейскую идею космоса как упорядоченного, прекрасного целого (κόσμος), где всё подчинено числовым закономерностям. Это первая попытка математического описания вселенной."
            },
            { 
                id: "metempsychosis", 
                label: "Метемпсихоз", 
                philosopher: "pythagoras", 
                rubrics: ["consciousness"], 
                description: "Переселение душ",
                extendedDescription: "Учение о переселении душ (μετεμψύχωσις) - после смерти душа переходит в другое тело, причём не только человеческое, но и животное или растительное. Цель философии и аскетической жизни - освободить душу от колеса перерождений (цикла сансары) и вернуть её к божественному источнику. Этическое поведение и философское познание способствуют очищению души. Метемпсихоз связан с идеей родства всего живого и обосновывает пифагорейский вегетарианство и запрет на убийство животных."
            },
            { 
                id: "tetraktys", 
                label: "Тетрактида", 
                philosopher: "pythagoras", 
                rubrics: ["being"], 
                description: "Священная четверица: 1+2+3+4=10",
                extendedDescription: "Тетрактида (τετρακτύς) - священный пифагорейский символ: треугольное число 10, образованное суммой первых четырёх натуральных чисел (1+2+3+4). Эти числа символизируют точку, линию, плоскость и объём - основные геометрические принципы. Десятка считалась совершенным числом, объединяющим единицу (монаду) со множественностью. Пифагорейцы клялись тетрактидой как высшей святыней. В ней видели ключ к пониманию структуры космоса, гармонии, музыкальных интервалов и всей математической организации бытия."
            },
            { 
                id: "music_mathematics", 
                label: "Музыка и математика", 
                philosopher: "pythagoras", 
                rubrics: ["knowledge"], 
                description: "Математические пропорции в музыке",
                extendedDescription: "Пифагорейское открытие математических основ музыкальной гармонии - различные звуки соответствуют определённым числовым соотношениям длин струн. Октава выражается отношением 2:1, квинта - 3:2, кварта - 4:3. Это открытие стало первым примером математического закона в природе и подтвердило идею числа как сущности вещей. Музыкальная гармония рассматривалась как модель космической гармонии. Пифагорейцы считали музыку средством очищения души и её приближения к божественному порядку."
            },

            // ГЕРАКЛИТ
            { 
                id: "panta_rhei", 
                label: "Πάντα ῥεῖ", 
                philosopher: "heraclitus", 
                rubrics: ["being", "time"], 
                description: "Всё течёт, всё меняется",
                extendedDescription: "Знаменитый принцип универсального становления: 'всё течёт, всё меняется' (πάντα ῥεῖ), 'нельзя дважды войти в одну и ту же реку'. Для Гераклита изменение и становление - не иллюзия чувств, а подлинная природа реальности. Мир находится в состоянии непрерывного потока, где каждая вещь постоянно переходит в своё иное. Однако этот поток не хаотичен - он подчинён Логосу, всеобщему закону. Гераклит радикально противопоставляет себя элеатам, утверждая онтологический статус становления."
            },
            { 
                id: "logos_heraclitus", 
                label: "Логос", 
                philosopher: "heraclitus", 
                rubrics: ["being"], 
                description: "Всеобщий закон космоса",
                extendedDescription: "Логос у Гераклита - это универсальный разумный принцип, управляющий космосом и пронизывающий всё сущее. Это одновременно закон, разум, слово и мера всех вещей. Логос вечен, единосущен огню и тождествен самому процессу мирового становления. Хотя Логос общ для всех, большинство людей живут так, словно имеют собственный разум, не понимая всеобщего. Познание Логоса означает понимание единства противоположностей и необходимости борьбы как источника гармонии."
            },
            { 
                id: "fire", 
                label: "Огонь", 
                philosopher: "heraclitus", 
                rubrics: ["being", "matter"], 
                description: "Первоначало, вечно живой огонь",
                extendedDescription: "Огонь (πῦρ) - первоначало и субстанция космоса, вечно живой процесс, который 'мерами загорается и мерами угасает'. Огонь не просто физическая стихия, но символ самого процесса становления, превращения и обмена. Всё происходит через обмен с огнём: огонь превращается в другие стихии, а они - обратно в огонь. Огонь воплощает единство бытия и становления, материи и процесса, разрушения и созидания. Это живая, разумная сила, тождественная Логосу."
            },
            { 
                id: "unity_opposites", 
                label: "Единство противоположностей", 
                philosopher: "heraclitus", 
                rubrics: ["dialectics"], 
                description: "Противоположности тождественны",
                extendedDescription: "Центральная диалектическая идея Гераклита: противоположности не просто сосуществуют, но внутренне едины и переходят друг в друга. Один и тот же путь ведёт вверх и вниз; морская вода одновременно чистейшая (для рыб) и грязнейшая (для людей); день и ночь - одно. Противоположности нуждаются друг в друге и не могут существовать раздельно. Это единство не статично, а динамично - оно реализуется через постоянное напряжение и борьбу. Познание единства противоположностей есть познание Логоса."
            },
            { 
                id: "war_father", 
                label: "Война - отец всего", 
                philosopher: "heraclitus", 
                rubrics: ["dialectics"], 
                description: "Борьба как источник становления",
                extendedDescription: "Знаменитый фрагмент 'Война - отец всего и царь всего' (πόλεμος πάντων μὲν πατήρ ἐστι) выражает идею о том, что борьба противоположностей - это не разрушительная сила, а созидательное начало космоса. Через борьбу и конфликт возникает всё сущее, проявляются различия, устанавливается иерархия. Война в космическом смысле - это напряжённое противостояние противоположных сил, которое и создаёт мировой порядок. Без борьбы не было бы ни движения, ни становления, ни гармонии."
            },
            { 
                id: "hidden_harmony", 
                label: "Скрытая гармония", 
                philosopher: "heraclitus", 
                rubrics: ["dialectics"], 
                description: "Гармония из напряжения противоположностей",
                extendedDescription: "Гармония (ἁρμονία) для Гераклита возникает не из примирения, а из напряжения противоположностей - подобно луку или лире, где противоположно направленные силы создают единство. 'Скрытая гармония лучше явной' - истинное единство мира не лежит на поверхности, а постигается разумом через понимание Логоса. Эта гармония динамична и парадоксальна: она существует именно благодаря внутреннему конфликту и борьбе, а не вопреки им. Космический порядок - это не статичное равновесие, а подвижное равновесие противоположных сил."
            },

            // ПАРМЕНИД
            { 
                id: "being_is", 
                label: "Бытие есть", 
                philosopher: "parmenides", 
                rubrics: ["being"], 
                description: "Бытие существует, небытия нет",
                extendedDescription: "Фундаментальный тезис элейской школы: бытие есть, небытие не существует. Бытие не может возникнуть из небытия и не может в него перейти, поскольку небытие немыслимо и невыразимо. Это утверждение устанавливает абсолютное различие между бытием и небытием, отрицая возможность становления и изменения на онтологическом уровне. Парменид впервые формулирует проблему бытия как центральную философскую проблему."
            },
            { 
                id: "one_being", 
                label: "Единое бытие", 
                philosopher: "parmenides", 
                rubrics: ["being"], 
                description: "Бытие едино, неделимо и неизменно",
                extendedDescription: "Бытие представляет собой абсолютное единство, лишённое внутренних различий и множественности. Оно неделимо, поскольку любое деление предполагало бы небытие между частями. Бытие неизменно, так как изменение требовало бы перехода из бытия в небытие или наоборот. Эта концепция единого бытия противостоит чувственному опыту множественности и изменчивости мира."
            },
            { 
                id: "way_truth", 
                label: "Путь истины", 
                philosopher: "parmenides", 
                rubrics: ["knowledge"], 
                description: "Путь познания через разум",
                extendedDescription: "Путь истины (ὁδὸς ἀληθείας) - это путь рационального познания бытия, доступный только разуму (νοῦς), но не чувствам. Это метод мышления, который приводит к пониманию необходимых и вечных истин о природе бытия. Путь истины противопоставляется пути мнения и основан на логической необходимости: что есть, то не может не быть. Только разум способен постичь истинную природу бытия, преодолевая обманчивые свидетельства чувств."
            },
            { 
                id: "way_opinion", 
                label: "Путь мнения", 
                philosopher: "parmenides", 
                rubrics: ["knowledge"], 
                description: "Ложный путь чувственного познания",
                extendedDescription: "Путь мнения (δόξα) - это путь чувственного восприятия и обыденных представлений о мире, которые смертные принимают за истину. Этот путь основан на принятии небытия как существующего и приводит к противоречивым и ложным суждениям о становлении, изменении и множественности. Парменид не отрицает полностью ценность мнения для практической жизни, но подчёркивает его эпистемологическую неполноценность по сравнению с путём истины. Мнение имеет дело с миром явлений, но не может дать подлинного знания."
            },
            { 
                id: "immutability", 
                label: "Неизменность", 
                philosopher: "parmenides", 
                rubrics: ["being"], 
                description: "Истинное бытие неизменно",
                extendedDescription: "Бытие абсолютно неизменно и пребывает в вечном покое. Любое изменение предполагало бы, что нечто начинает быть тем, чем не было, или перестаёт быть тем, чем было, что невозможно без обращения к небытию. Неизменность бытия означает отсутствие возникновения, уничтожения и качественного изменения. Эта характеристика бытия резко противоречит чувственному опыту и становится источником философской проблемы отношения между видимостью и реальностью."
            },
            { 
                id: "sphere_being", 
                label: "Сфера бытия", 
                philosopher: "parmenides", 
                rubrics: ["being"], 
                description: "Бытие подобно совершенной сфере",
                extendedDescription: "Парменид уподобляет бытие совершенной сфере - геометрическому телу, равно отстоящему от центра во всех направлениях. Сфера символизирует завершённость, целостность и совершенство бытия. Эта метафора выражает идею о том, что бытие не имеет ни начала, ни конца, ни внутренних различий - оно равномощно во всех своих частях. Образ сферы также подчёркивает законченность и самодостаточность бытия, его независимость от чего-либо внешнего."
            },

            // СОКРАТ
            { 
                id: "maieutics", 
                label: "Майевтика", 
                philosopher: "socrates", 
                rubrics: ["knowledge", "method"], 
                description: "Метод извлечения знания через вопросы",
                extendedDescription: "Искусство философского акушерства, при котором Сократ через систему наводящих вопросов помогал собеседнику 'родить' истину из собственного разума. Основан на убеждении, что знание уже присутствует в душе человека и нуждается лишь в правильном способе извлечения. Метод предполагает последовательное опровержение ложных мнений и постепенное приближение к истинному знанию через диалектический процесс."
            },
            { 
                id: "know_nothing", 
                label: "Знаю, что ничего не знаю", 
                philosopher: "socrates", 
                rubrics: ["knowledge"], 
                description: "Осознание границ собственного знания",
                extendedDescription: "Фундаментальный принцип сократовской мудрости, утверждающий, что истинное знание начинается с признания собственного незнания. В отличие от софистов, претендовавших на обладание всеобъемлющим знанием, Сократ видел в осознании своего незнания путь к подлинной мудрости. Это не скептицизм, а методологическая установка, открывающая возможность для непрерывного познания и самопознания."
            },
            { 
                id: "virtue_knowledge", 
                label: "Добродетель = знание", 
                philosopher: "socrates", 
                rubrics: ["ethics", "knowledge"], 
                description: "Единство морали и познания",
                extendedDescription: "Сократовский тезис о том, что никто не творит зло сознательно - всякое дурное деяние есть результат незнания блага. Добродетель не может быть отделена от знания, ибо познавший благо не может не следовать ему. Этот интеллектуализм в этике утверждает, что моральное совершенствование неразрывно связано с интеллектуальным развитием, а порок - всегда следствие невежества."
            },
            { 
                id: "daimonion", 
                label: "Даймоний", 
                philosopher: "socrates", 
                rubrics: ["consciousness"], 
                description: "Внутренний голос совести",
                extendedDescription: "Божественный знак или внутренний голос, который предостерегал Сократа от неправильных поступков. Не позитивный советчик, а негативный ограничитель, удерживающий от ошибок. Представляет собой уникальное явление в античной философии - голос трансцендентного, обращенный к индивидуальному сознанию, предвосхищающий позднейшие концепции совести и внутреннего морального закона."
            },
            { 
                id: "care_soul", 
                label: "Забота о душе", 
                philosopher: "socrates", 
                rubrics: ["ethics"], 
                description: "Приоритет духовного развития",
                extendedDescription: "Центральная этическая максима Сократа, призывающая заботиться о душе превыше всех материальных благ. Душа - истинная сущность человека, и её совершенствование через познание и добродетель составляет главную цель жизни. Эта забота включает самопознание, очищение от ложных мнений и стремление к благу, что радикально противопоставляется заботе о теле, богатстве и внешней славе."
            },
            { 
                id: "soul", 
                label: "Душа", 
                philosopher: "socrates", 
                rubrics: ["consciousness"], 
                description: "Бессмертная сущность человека, объект заботы",
                extendedDescription: "Психея как подлинное 'я' человека, его разумная и моральная сущность, которая не сводима к телесному существованию. Бессмертная и божественная по своей природе, душа является носителем знания и добродетели. Именно душа делает человека человеком, и её состояние определяет подлинное благополучие личности независимо от внешних обстоятельств."
            },
            
            // ПЛАТОН
            { 
                id: "ideas", 
                label: "Мир идей", 
                philosopher: "plato", 
                rubrics: ["knowledge"], 
                description: "Вечный мир совершенных форм",
                extendedDescription: "Умопостигаемая реальность вечных, неизменных и совершенных сущностей, существующих независимо от чувственного мира. Идеи - не просто понятия, а онтологические первоначала, истинно сущее бытие, по отношению к которому материальные вещи являются лишь несовершенными копиями. Этот сверхчувственный мир образует иерархию, на вершине которой находится идея Блага как источник всего сущего."
            },
            { 
                id: "eidos", 
                label: "Эйдос", 
                philosopher: "plato", 
                rubrics: ["knowledge"], 
                description: "Идеальная сущность вещи",
                extendedDescription: "Отдельная идея как умопостигаемая форма и подлинная сущность класса вещей. Эйдос содержит в себе все существенные характеристики вещи в их чистом, неискаженном виде. Чувственные объекты причастны эйдосам и получают от них свою определенность, но всегда остаются неполными и изменчивыми по сравнению с вечным и совершенным эйдосом."
            },
            { 
                id: "anamnesis", 
                label: "Анамнесис", 
                philosopher: "plato", 
                rubrics: ["knowledge"], 
                description: "Воспоминание души об идеях",
                extendedDescription: "Теория познания как припоминания того, что душа созерцала до воплощения в теле. Душа, пребывая в мире идей до рождения, обладала полным знанием; воплощение вызывает забвение, а процесс обучения есть постепенное восстановление утраченного знания. Чувственный опыт служит лишь поводом для пробуждения дремлющих в душе воспоминаний об идеальных сущностях."
            },
            { 
                id: "demiurge", 
                label: "Демиург", 
                philosopher: "plato", 
                rubrics: ["absolute"], 
                description: "Творец материального мира",
                extendedDescription: "Божественный мастер, устроитель космоса, который творит чувственный мир по образцу вечных идей. Не абсолютный творец из ничего, а искусный ремесленник, организующий предсуществующую материю (хору) в соответствии с умопостигаемыми образцами. Движимый благостью, Демиург стремится сделать космос максимально совершенным подражанием миру идей."
            },
            { 
                id: "cave", 
                label: "Миф о пещере", 
                philosopher: "plato", 
                rubrics: ["knowledge"], 
                description: "Аллегория познания истины",
                extendedDescription: "Центральная платоновская метафора, изображающая людей узниками в пещере, принимающими тени на стене за подлинную реальность. Освобождение и восхождение к солнечному свету символизирует философский путь от чувственного познания к интеллектуальному созерцанию идей. Возвращение освободившегося в пещеру представляет миссию философа - просвещать остающихся во тьме незнания, даже рискуя быть непонятым и отвергнутым."
            },
            { 
                id: "ideal_state", 
                label: "Идеальное государство", 
                philosopher: "plato", 
                rubrics: ["politics"], 
                description: "Справедливое политическое устройство",
                extendedDescription: "Проект совершенного общественного устройства, основанного на принципе справедливости и соответствия человеческой природе. Трехчастная структура государства (правители-философы, стражи, производители) отражает трехчастную структуру души. Справедливость достигается, когда каждое сословие исполняет свою функцию, а философы-правители, познавшие идею Блага, управляют обществом ради общего блага, а не частных интересов."
            },
            { 
                id: "tripartite_soul", 
                label: "Трёхчастная душа", 
                philosopher: "plato", 
                rubrics: ["consciousness"], 
                description: "Разум, воля, чувства",
                extendedDescription: "Психологическая концепция, согласно которой душа состоит из трех частей: разумной (логистикон), яростной/волевой (тимос) и вожделеющей (эпитюметикон). Разумная часть должна господствовать, направляя волевую часть на подчинение низших желаний. Гармоничное взаимодействие всех частей под руководством разума составляет добродетель и внутреннюю справедливость индивида, микрокосмически отражая устройство идеального государства."
            },
            { 
                id: "good", 
                label: "Благо", 
                philosopher: "plato", 
                rubrics: ["absolute"], 
                description: "Высшая идея, источник бытия и познания",
                extendedDescription: "Венец иерархии идей, аналог солнца в умопостигаемом мире, дающий всему сущему не только познаваемость, но и само бытие. Благо выше бытия и сущности, оно - беспредпосылочное начало всего, к которому восходит диалектическое познание. Созерцание Блага - высшая цель философии, достижение которой делает возможным истинное знание и правильное действие."
            },
            { 
                id: "eros", 
                label: "Эрос", 
                philosopher: "plato", 
                rubrics: ["knowledge"], 
                description: "Любовное восхождение к прекрасному и истине",
                extendedDescription: "Философский эрос как движущая сила восхождения души от любви к отдельным прекрасным телам через любовь к прекрасным душам и знаниям к созерцанию самой идеи Прекрасного. Это не просто чувственное влечение, а демоническая сила (метаксю), соединяющая человека с божественным. Эротическое стремление к обладанию благом и бессмертию через порождение в прекрасном составляет глубинную природу философии."
            },
            { 
                id: "methexis", 
                label: "Метексис", 
                philosopher: "plato", 
                rubrics: ["being"], 
                description: "Участие вещей в идеях, связь между мирами",
                extendedDescription: "Способ присутствия идей в чувственных вещах, их причастность идеальным образцам. Вещь становится прекрасной, поскольку причастна идее Прекрасного, человек справедлив, поскольку причастен идее Справедливости. Метексис разрешает проблему связи двух миров - вечного и изменчивого, - хотя сам механизм этого участия остается одной из главных апорий платонизма."
            },
            { 
                id: "mimesis", 
                label: "Мимесис", 
                philosopher: "plato", 
                rubrics: ["being"], 
                description: "Подражание, копирование идей",
                extendedDescription: "Отношение чувственного мира к миру идей как копии к оригиналу, подражания к подлинному. Вещи подражают идеям, но всегда несовершенно; искусство подражает вещам, становясь копией копии, удаленной от истины на два шага. Эта иерархия подражания объясняет несовершенство чувственного мира и обосновывает критику искусства, которое уводит от истины в царство призрачных образов."
            },
            { 
                id: "chora", 
                label: "Хора", 
                philosopher: "plato", 
                rubrics: ["being"], 
                description: "Пространство-вместилище, восприемница становления",
                extendedDescription: "Загадочное 'третье' начало между миром идей и миром становления - нечто вроде первоматерии или пространства, которое принимает в себя отпечатки идей. Хора не есть ни бытие, ни небытие; это чистая восприимчивость, лишенная собственных качеств, вечный материал для творения Демиурга. Постигается она 'незаконным рассуждением', представляя собой одну из самых темных и влиятельных концепций платонизма."
            },
            
            // АРИСТОТЕЛЬ
            { 
                id: "form", 
                label: "Форма", 
                philosopher: "aristotle", 
                rubrics: ["being"], 
                description: "Активное начало, определяющее вещь",
                extendedDescription: "Морфэ как актуальное осуществление вещи, её сущность и структурный принцип, делающий вещь тем, что она есть. В отличие от платоновских идей, аристотелевская форма не существует отдельно от материи, а составляет с ней единую конкретную вещь. Форма - источник движения и развития, она направляет материю к осуществлению заложенной в ней возможности."
            },
            { 
                id: "matter_ar", 
                label: "Материя", 
                philosopher: "aristotle", 
                rubrics: ["being", "matter"], 
                description: "Пассивное начало, субстрат",
                extendedDescription: "Хюлэ как потенциальное бытие, чистая возможность, которая сама по себе не имеет определенности, но способна принять любую форму. Материя относительна: то, что является материей на одном уровне, может быть формой на другом (бронза - материя для статуи, но форма для меди и олова). Первая материя - это чистая потенциальность без каких-либо актуальных определений."
            },
            { 
                id: "entelechy", 
                label: "Энтелехия", 
                philosopher: "aristotle", 
                rubrics: ["being"], 
                description: "Внутренняя цель, осуществление",
                extendedDescription: "Состояние полной актуализации, когда вещь достигла своей внутренне присущей ей цели и существует в совершенной полноте. Энтелехия - это не просто конечный результат, а сам процесс самоосуществления, имманентная телеология, когда цель содержится в самой природе вещи. Семя содержит энтелехию дерева, ребенок - энтелехию взрослого человека."
            },
            { 
                id: "four_causes", 
                label: "Четыре причины", 
                philosopher: "aristotle", 
                rubrics: ["being"], 
                description: "Материальная, формальная, движущая, целевая",
                extendedDescription: "Полное объяснение любой вещи требует указания четырех аспектов: из чего она сделана (материальная причина), что она есть (формальная причина), что привело её в движение (движущая причина) и ради чего она существует (целевая причина). Последняя, телеологическая причина особенно важна для Аристотеля - всё в природе имеет внутреннюю цель и стремится к её реализации."
            },
            { 
                id: "unmoved_mover", 
                label: "Перводвигатель", 
                philosopher: "aristotle", 
                rubrics: ["absolute"], 
                description: "Неподвижный источник движения",
                extendedDescription: "Чистая актуальность, вечный и неподвижный источник всякого движения в космосе, который движет, будучи предметом любви и стремления. Сам Перводвигатель не изменяется и не движется, он - мысль, мыслящая саму себя (ноэсис ноэсеос), чистая форма без материи. Как конечная причина всего сущего, он привлекает к себе весь космос, оставаясь при этом трансцендентным и самодостаточным."
            },
            { 
                id: "golden_mean", 
                label: "Золотая середина", 
                philosopher: "aristotle", 
                rubrics: ["ethics"], 
                description: "Этический принцип умеренности",
                extendedDescription: "Добродетель как нахождение правильной меры между двумя крайностями - избытком и недостатком. Мужество - середина между трусостью и безрассудством, щедрость - между скупостью и расточительством. Эта середина не арифметическая, а относительная к конкретному человеку и ситуации, определяемая практической мудростью (фронесис). Золотая середина - не компромисс, а вершина совершенства в каждой конкретной ситуации."
            },
            { 
                id: "categories", 
                label: "Категории", 
                philosopher: "aristotle", 
                rubrics: ["being"], 
                description: "Основные роды бытия",
                extendedDescription: "Десять высших родов, к которым сводятся все возможные способы высказывания о бытии: сущность, количество, качество, отношение, место, время, положение, обладание, действие, претерпевание. Категории - не просто лингвистические формы, но фундаментальные способы существования. Первая категория - сущность (усия) - онтологически первична, остальные существуют только как её определения."
            },
            { 
                id: "act_potency", 
                label: "Акт и потенция", 
                philosopher: "aristotle", 
                rubrics: ["being"], 
                description: "Энергия и возможность: фундаментальная пара бытия",
                extendedDescription: "Динамическое понимание реальности через противопоставление актуального (энергейя) и потенциального (динамис) бытия. Всё сущее представляет собой единство осуществленности и возможности к дальнейшему изменению. Движение - это переход от потенции к акту, становление того, что было возможным, действительным. Эта пара позволяет объяснить изменение, не впадая ни в элейский отказ от движения, ни в гераклитовский панфлуксизм."
            },
            { 
                id: "phronesis", 
                label: "Phronesis", 
                philosopher: "aristotle", 
                rubrics: ["ethics"], 
                description: "Практическая мудрость, благоразумие",
                extendedDescription: "Интеллектуальная добродетель, позволяющая правильно рассуждать о том, что хорошо и полезно для благой жизни. В отличие от теоретической мудрости (софия), фронесис направлена на действие и изменчивое, требует опыта и не может быть усвоена чисто рациональным путем. Это практический разум, который определяет золотую середину в каждой конкретной ситуации и направляет к эвдемонии."
            },
            { 
                id: "eudaimonia", 
                label: "Eudaimonia", 
                philosopher: "aristotle", 
                rubrics: ["ethics"], 
                description: "Благоденствие, счастье как цель жизни",
                extendedDescription: "Высшее благо человеческой жизни - не мимолетное удовольствие, а полнота осуществления человеческой природы в деятельности в соответствии с добродетелью. Эвдемония - это деятельная жизнь разумной души, созерцательная или практическая, совершенная и длящаяся на протяжении полной жизни. Она самодостаточна и является целью ради себя самой, а не средством для чего-то другого."
            },
            { 
                id: "logos", 
                label: "Логос", 
                philosopher: "aristotle", 
                rubrics: ["being"], 
                description: "Разумное начало, слово, принцип",
                extendedDescription: "Многозначное понятие, обозначающее разум, слово, определение, пропорцию, закон. У Аристотеля логос - это прежде всего определяющая формула сущности, выражающая в речи то, что есть вещь. Человек - логическое животное (зоон логон эхон), обладающее способностью к разумной речи. Логос пронизывает реальность как принцип рациональной упорядоченности и познаваемости бытия."
            },
            
            // ПЛОТИН
            { 
                id: "the_one", 
                label: "Единое", 
                philosopher: "plotinus", 
                rubrics: ["being", "absolute"], 
                description: "То Эн - запредельное начало всего",
                extendedDescription: "Абсолютное первоначало, запредельное всякому бытию и мышлению, выше бытия и сущности. Единое не имеет никаких определений, ибо всякое определение вносило бы множественность; о нём нельзя сказать даже что оно есть. Как источник всего сущего, Единое порождает мир через эманацию, оставаясь при этом неизменным и неумаляемым, подобно солнцу, излучающему свет."
            },
            { 
                id: "emanation", 
                label: "Эманация", 
                philosopher: "plotinus", 
                rubrics: ["being"], 
                description: "Истечение бытия из Единого",
                extendedDescription: "Процесс порождения мира как переполнение и излияние из первоначала, образующий нисходящую иерархию: Единое → Ум → Душа → Материя. Каждая последующая ступень беднее и менее совершенна, чем предыдущая, но эманация происходит без ущерба для источника. Это не творение по воле, а необходимое следствие совершенства Единого, как свет необходимо истекает от солнца."
            },
            { 
                id: "nous", 
                label: "Ум", 
                philosopher: "plotinus", 
                rubrics: ["being"], 
                description: "Нус - первая ипостась, мир идей",
                extendedDescription: "Первое порождение Единого, где впервые появляется различие мыслящего и мыслимого, бытия и мышления, хотя они совпадают. Ум содержит в себе все идеи (эйдосы) как живое единство множественности, он одновременно мыслит и есть всё мыслимое. Это божественный интеллект, вечное самосозерцание, в котором пребывают платоновские идеи как его собственные мысли."
            },
            { 
                id: "world_soul", 
                label: "Мировая душа", 
                philosopher: "plotinus", 
                rubrics: ["being"], 
                description: "Вторая ипостась, душа космоса",
                extendedDescription: "Посредник между умопостигаемым и чувственным мирами, животворящее начало космоса. Душа созерцает Ум, но обращена также к материи, которую она оформляет и одушевляет. Индивидуальные души - части мировой души, но каждая сохраняет свою идентичность. Душа амбивалентна: высшей частью причастна вечности, низшей - вовлечена во временное становление."
            },
            { 
                id: "henosis", 
                label: "Генозис", 
                philosopher: "plotinus", 
                rubrics: ["absolute"], 
                description: "Мистическое единение с Единым",
                extendedDescription: "Высшая цель философии - экстатическое воссоединение души с Единым, превосходящее всякое мышление и дискурсивное познание. Достигается через аскетическое очищение, отрешение от телесного и даже от мыслящего 'я'. В этом опыте душа выходит за пределы себя, теряет всякую множественность и отдельность, переживая абсолютное единство. Это редкий и невыразимый опыт, доступный лишь немногим."
            },
            { 
                id: "matter_plotinus", 
                label: "Материя", 
                philosopher: "plotinus", 
                rubrics: ["being"], 
                description: "Абсолютное не-бытие, зло",
                extendedDescription: "Последняя ступень эманации, чистая потенциальность и лишенность, абсолютная неопределенность. Материя не имеет положительного существования - она лишь предел убывания бытия, тьма и небытие. Как таковая, она является метафизическим источником зла, ибо зло есть не что иное, как отсутствие блага, максимальная удаленность от Единого."
            },
            { 
                id: "contemplation", 
                label: "Созерцание", 
                philosopher: "plotinus", 
                rubrics: ["knowledge", "method"], 
                description: "Теория - путь восхождения души",
                extendedDescription: "Интеллектуальное видение умопостигаемого как основной способ познания и путь к спасению. Созерцание превосходит дискурсивное мышление, это прямое, невременное схватывание сущности. Вся иерархия бытия представляет собой различные уровни созерцания: Ум созерцает себя, Душа - Ум, природа - Душу. Через очищение и восхождение к созерцанию душа возвращается к своему источнику."
            },
            
            // АВГУСТИН
            { 
                id: "grace", 
                label: "Благодать", 
                philosopher: "augustine", 
                rubrics: ["absolute", "ethics"], 
                description: "Божественная милость к человеку",
                extendedDescription: "Незаслуженный дар Божий, необходимый для спасения после грехопадения. Человек настолько поврежден первородным грехом, что не может собственными силами творить добро и достичь спасения. Благодать предваряет всякое доброе намерение, действует в человеке и через человека. Августин разработал детальную теологию благодати в полемике с Пелагием, утверждая абсолютную зависимость человека от божественной помощи."
            },
            { 
                id: "original_sin", 
                label: "Первородный грех", 
                philosopher: "augustine", 
                rubrics: ["ethics"], 
                description: "Наследственная греховность",
                extendedDescription: "Грех Адама, передающийся всему человечеству через рождение и делающий природу человека извращенной. Не просто дурной пример, но онтологическое повреждение человеческой природы, лишившее её первоначальной целостности. В результате человек утратил свободу воли в отношении добра, став рабом похоти и смерти. Только крещение и благодать могут освободить от последствий этого греха."
            },
            { 
                id: "two_cities", 
                label: "Два града", 
                philosopher: "augustine", 
                rubrics: ["politics"], 
                description: "Град Божий и град земной",
                extendedDescription: "Два противоположных сообщества, определяемых различием любви: град Божий основан на любви к Богу до презрения к себе, град земной - на любви к себе до презрения к Богу. Это не географические или исторические образования, а мистические общности, смешанные в земной истории и разделяющиеся только в эсхатологическом исполнении. История человечества - драма взаимодействия этих двух градов от Каина и Авеля до Страшного суда."
            },
            { 
                id: "time_augustine", 
                label: "Время", 
                philosopher: "augustine", 
                rubrics: ["time"], 
                description: "Растяжение души",
                extendedDescription: "Радикально субъективная концепция времени как модуса сознания, растяжения (дистенсия) души между памятью о прошлом, вниманием к настоящему и ожиданием будущего. Времени нет вне души - прошлого уже нет, будущего еще нет, настоящее - неуловимое мгновение. Сам Бог пребывает в вечности вне времени, а тварный мир существует во времени, созданном вместе с миром. Эта теория предвосхитила феноменологию времени."
            },
            { 
                id: "confession", 
                label: "Исповедь", 
                philosopher: "augustine", 
                rubrics: ["consciousness"], 
                description: "Путь к Богу через самопознание",
                extendedDescription: "Жанр автобиографической рефлексии, где исследование собственной души становится путем богопознания. Августин открывает внутреннего человека через анализ памяти, воли, греха и обращения. Исповедь перед Богом - не просто признание грехов, но способ самопознания и богопознания, ибо познавая глубины своей души, человек обнаруживает в них присутствие Бога. 'Не выходи наружу, вернись в самого себя: истина обитает во внутреннем человеке.'"
            },
            { 
                id: "faith_reason", 
                label: "Вера и разум", 
                philosopher: "augustine", 
                rubrics: ["knowledge", "absolute"], 
                description: "Верю, чтобы понимать",
                extendedDescription: "Вера предшествует пониманию и делает его возможным: 'Верь, чтобы понимать, понимай, чтобы верить' (crede ut intelligas, intellige ut credas). Разум не противоположен вере, но вера очищает и просвещает разум, открывая ему сверхрациональные истины. Без веры разум блуждает в потемках греха; вера же, опираясь на авторитет Писания и Церкви, направляет разум к истине."
            },
            
            // ФОМА АКВИНСКИЙ
            { 
                id: "essence_existence", 
                label: "Сущность и существование", 
                philosopher: "aquinas", 
                rubrics: ["being"], 
                description: "Различение эссенции и экзистенции",
                extendedDescription: "Фундаментальное метафизическое различение между тем, что есть вещь (сущность, essentia), и тем, что она есть (существование, esse). В тварных вещах эти два аспекта реально различны - сущность не содержит в себе существование, получая его от Бога. Только в Боге сущность и существование тождественны, Он есть чистый акт бытия (ipsum esse subsistens). Это различение объясняет контингентность творения и абсолютность Творца."
            },
            { 
                id: "five_ways", 
                label: "Пять путей", 
                philosopher: "aquinas", 
                rubrics: ["absolute"], 
                description: "Доказательства бытия Бога",
                extendedDescription: "Пять рациональных аргументов в пользу существования Бога: от движения, от производящей причины, от возможности и необходимости, от степеней совершенства, от целевой причины. Все пути имеют сходную структуру: от наблюдаемых фактов о мире через принцип невозможности бесконечного регресса к необходимости первоначала. Эти доказательства - не математически строгие дедукции, а рациональное обоснование веры, демонстрирующее разумность теизма."
            },
            { 
                id: "natural_law", 
                label: "Естественный закон", 
                philosopher: "aquinas", 
                rubrics: ["ethics"], 
                description: "Рациональная основа морали",
                extendedDescription: "Участие разумного творения в вечном законе Бога через естественную склонность к должному действию. Естественный закон доступен разуму всех людей независимо от Откровения и включает основные моральные принципы: стремись к благу, избегай зла, сохраняй жизнь, воспитывай потомство, познавай истину, живи в обществе. Это не произвольное установление, а отражение рациональной природы человека и божественного замысла."
            },
            { 
                id: "analogy", 
                label: "Аналогия бытия", 
                philosopher: "aquinas", 
                rubrics: ["absolute"], 
                description: "Подобие между Богом и творением",
                extendedDescription: "Способ предицирования терминов о Боге и творениях - не унивокально (одинаково) и не эквивокально (совершенно различно), а аналогически. Между Творцом и творением есть как сходство, так и бесконечно большее различие. Когда мы говорим 'Бог благ' и 'человек благ', термин 'благой' используется аналогически - есть некоторое подобие, но божественная благость бесконечно превосходит человеческую. Это позволяет богопознанию, избегая агностицизма и антропоморфизма."
            },
            { 
                id: "thomistic_synthesis", 
                label: "Синтез Аристотеля", 
                philosopher: "aquinas", 
                rubrics: ["knowledge"], 
                description: "Христианизация философии Аристотеля",
                extendedDescription: "Грандиозный проект гармонизации аристотелевской философии с христианской теологией. Фома интегрирует понятия формы и материи, акта и потенции, четырех причин в христианскую метафизику, переосмысливая их в контексте творения и провидения. Разум и вера, философия и теология различны, но не противоречат друг другу: философия исследует истины, доступные естественному разуму, теология - истины Откровения. Это синтез определил западную интеллектуальную традицию на века."
            },
            { 
                id: "accidents", 
                label: "Акциденции", 
                philosopher: "aquinas", 
                rubrics: ["being"], 
                description: "Несущественные свойства субстанции",
                extendedDescription: "То, что существует в другом (в субстанции) и может изменяться, не затрагивая сущность вещи. Девять категорий Аристотеля, кроме субстанции, являются акциденциями: количество, качество, отношение и др. Акциденции зависят от субстанции в своем бытии, но могут отделяться от неё (как в чуде евхаристии, где акциденции хлеба и вина существуют без их субстанций). Различение субстанции и акциденций критично для метафизики и сакраментальной теологии."
            },
            { 
                id: "actual_being", 
                label: "Актуальное бытие", 
                philosopher: "aquinas", 
                rubrics: ["being"], 
                description: "Реализованное существование",
                extendedDescription: "Акт существования (actus essendi) как фундаментальная метафизическая реальность, которая актуализирует потенциальность сущности. Бытие - не абстрактное понятие, а конкретный акт, делающий вещь существующей. В этом смысле бытие - самое актуальное из всего актуального, совершенство всех совершенств. Томистский акцент на акте бытия (в отличие от сущностного подхода) открывает экзистенциальное измерение метафизики."
            },
            { 
                id: "participatio", 
                label: "Participatio", 
                philosopher: "aquinas", 
                rubrics: ["being"], 
                description: "Участие творения в божественном бытии",
                extendedDescription: "Все сотворенные вещи обладают бытием не по своей природе, а через участие (participatio) в божественном бытии. Бог - единственный, кто существует по сущности (per essentiam), всё остальное существует через участие (per participationem). Эта концепция, синтезирующая платоновский метексис и аристотелевскую метафизику, объясняет как зависимость творения от Творца, так и реальность тварного бытия."
            },
            
            // ФРЭНСИС БЭКОН
            { 
                id: "idols", 
                label: "Идолы познания", 
                philosopher: "bacon", 
                rubrics: ["knowledge"], 
                description: "Четыре источника заблуждений",
                extendedDescription: "Учение об 'идолах' (idola) - систематических источниках человеческих заблуждений, препятствующих истинному познанию природы. Бэкон выделяет четыре класса идолов: рода, пещеры, рынка и театра. Преодоление идолов необходимо для построения новой науки, основанной на экспериментальном методе. Критика идолов - это своеобразная 'негативная' часть бэконовского метода, очищающая разум от предрассудков перед применением индуктивного метода. Учение об идолах - первая систематическая критика источников познавательных ошибок в философии Нового времени."
            },
            { 
                id: "idols_tribe", 
                label: "Идолы рода", 
                philosopher: "bacon", 
                rubrics: ["knowledge"], 
                description: "Заблуждения человеческой природы",
                extendedDescription: "Идолы рода (idola tribus) - заблуждения, присущие всему человеческому роду в силу самой природы человека. К ним относятся: антропоморфизм (приписывание природе человеческих качеств), стремление к упорядочиванию и систематизации там, где её нет, преобладание того, что поражает чувства, над незаметным, предпочтение подтверждающих примеров опровергающим. Человеческий разум подобен неровному зеркалу, которое искажает отражение природы, примешивая к ней собственную природу. Эти заблуждения невозможно полностью устранить, но осознание их необходимо для правильного познания."
            },
            { 
                id: "idols_cave", 
                label: "Идолы пещеры", 
                philosopher: "bacon", 
                rubrics: ["knowledge"], 
                description: "Индивидуальные предрассудки",
                extendedDescription: "Идолы пещеры (idola specus) - индивидуальные заблуждения, связанные с личными особенностями каждого человека: воспитанием, образованием, авторитетами, случайными впечатлениями, темпераментом. Название отсылает к платоновской пещере, но у Бэкона каждый человек имеет свою собственную пещеру, преломляющую свет природы по-своему. Эти предрассудки создают субъективную окраску познания. Преодоление идолов пещеры требует критического отношения к собственному опыту и убеждениям, готовности пересматривать устоявшиеся взгляды."
            },
            { 
                id: "idols_marketplace", 
                label: "Идолы рынка", 
                philosopher: "bacon", 
                rubrics: ["knowledge", "language"], 
                description: "Заблуждения от языка и общения",
                extendedDescription: "Идолы рынка (idola fori) - заблуждения, порождаемые неправильным употреблением языка и общением между людьми. Слова часто не соответствуют вещам: либо обозначают несуществующее, либо плохо определены и многозначны. Язык создан обыденным сознанием, поэтому содержит множество ложных различений и обобщений. Философские споры часто сводятся к спорам о словах. Идолы рынка особенно опасны, так как навязываются разуму через язык постоянно и незаметно. Бэкон настаивает на точном определении терминов и критическом отношении к языку."
            },
            { 
                id: "idols_theatre", 
                label: "Идолы театра", 
                philosopher: "bacon", 
                rubrics: ["knowledge"], 
                description: "Догмы философских школ",
                extendedDescription: "Идолы театра (idola theatri) - заблуждения, перенятые из ложных философских учений и доктрин, похожих на театральные представления - искусственные выдуманные миры. Бэкон критикует три типа философий: софистическую (основанную на диалектике, как у Аристотеля), эмпирическую (основанную на узком опыте, как у алхимиков) и суеверную (смешивающую философию с теологией). Эти системы оторваны от реального опыта, замкнуты на себя и препятствуют истинному познанию природы. Преодоление идолов театра требует отказа от авторитетов и обращения к самой природе через эксперимент."
            },
            { 
                id: "induction", 
                label: "Индукция", 
                philosopher: "bacon", 
                rubrics: ["method"], 
                description: "Метод восхождения от частного к общему",
                extendedDescription: "Бэконовская индукция - систематический метод обобщения от частных наблюдений к общим законам природы, противопоставленный силлогистической дедукции схоластики. Это не простое перечисление примеров, а тщательный анализ природных явлений через составление таблиц присутствия, отсутствия и степеней. Индукция должна быть постепенной, восходя от простейших аксиом к более общим. Она опирается на эксперимент, а не на случайное наблюдение. Правильная индукция - это 'interpretatio naturae', истолкование природы, ведущее к власти над ней."
            },
            { 
                id: "knowledge_power", 
                label: "Знание - сила", 
                philosopher: "bacon", 
                rubrics: ["knowledge"], 
                description: "Scientia potentia est",
                extendedDescription: "Знаменитый афоризм 'Знание - сила' (scientia potentia est, или 'nam et ipsa scientia potestas est') выражает практическую, инструментальную ориентацию бэконовской философии. Истинное знание природы даёт власть над ней, способность преобразовывать её для блага человечества. Цель науки - не созерцание истины ради неё самой, а улучшение человеческой жизни через технические изобретения. Познать природу - значит научиться ей повиноваться, чтобы затем господствовать над ней. Это радикальный разрыв со средневековой традицией, видевшей в познании путь к созерцанию Бога."
            },
            { 
                id: "new_organon", 
                label: "Новый Органон", 
                philosopher: "bacon", 
                rubrics: ["method"], 
                description: "Новая логика научного исследования",
                extendedDescription: "'Новый Органон' (Novum Organum) - главный труд Бэкона, призванный заменить аристотелевский 'Органон' как руководство к познанию. Это новая логика, основанная на индукции, а не дедукции, на эксперименте, а не на силлогизме. Бэкон предлагает систематическую программу перестройки наук на эмпирических основаниях. Метафора органона (инструмента) подчёркивает практическую направленность: познание - это инструмент преобразования природы. 'Новый Органон' закладывает методологические основы экспериментальной науки Нового времени."
            },

            // ДЕКАРТ
            { 
                id: "cogito", 
                label: "Cogito ergo sum", 
                philosopher: "descartes", 
                rubrics: ["consciousness"], 
                description: "Я мыслю, следовательно существую",
                extendedDescription: "Первая абсолютно достоверная истина, обнаруженная в процессе методического сомнения. Даже если я сомневаюсь во всем, я не могу сомневаться в том, что я, сомневающийся, существую. Это интуиция, а не силлогизм; непосредственная самоочевидность мыслящего 'я'. Cogito становится архимедовой точкой новой философии, фундаментом, на котором Декарт возводит здание достоверного знания. Открытие субъективности как отправного пункта философствования."
            },
            { 
                id: "dualism", 
                label: "Дуализм", 
                philosopher: "descartes", 
                rubrics: ["being"], 
                description: "Разделение мышления и протяжения",
                extendedDescription: "Радикальное онтологическое различение двух видов субстанций: мыслящей (res cogitans) и протяженной (res extensa). Они абсолютно различны по сущности: душа непротяженна, неделима и свободна; тело протяженно, делимо и подчинено механическим законам. Эти субстанции реально различны и могут существовать отдельно друг от друга. Проблема их взаимодействия в человеке становится одной из главных апорий картезианства."
            },
            { 
                id: "res_cogitans", 
                label: "Res cogitans", 
                philosopher: "descartes", 
                rubrics: ["consciousness"], 
                description: "Мыслящая субстанция",
                extendedDescription: "Нематериальная субстанция, чья единственная сущностная характеристика - мышление в широком смысле (включая сомнение, понимание, утверждение, отрицание, волю, воображение, ощущение). Мыслящая субстанция непротяженна, неделима, бессмертна. Как чистое сознание, она познает себя непосредственно и достоверно, в отличие от познания внешнего мира, требующего обоснования."
            },
            { 
                id: "res_extensa", 
                label: "Res extensa", 
                philosopher: "descartes", 
                rubrics: ["matter"], 
                description: "Протяженная субстанция",
                extendedDescription: "Материальная субстанция, чья сущность - протяжение в длину, ширину и глубину. Все материальные тела - модусы единой протяженной субстанции, различающиеся лишь формой, положением и движением частей. Материя полностью механистична, лишена всяких качественных определений, действует исключительно по законам механики. Нет пустоты - там, где нет тела, есть тонкая материя."
            },
            { 
                id: "method", 
                label: "Метод сомнения", 
                philosopher: "descartes", 
                rubrics: ["method"], 
                description: "Радикальный скептицизм как путь к истине",
                extendedDescription: "Методическое, систематическое сомнение во всех прежних убеждениях с целью обнаружить абсолютно достоверное основание знания. Надо отбросить всё, в чём можно хоть немного усомниться: чувственный опыт (иллюзии), физическую реальность (сон), даже математику (злой демон). Это не скептицизм ради скептицизма, а инструмент очищения разума от предрассудков. Сомнение временное и инструментальное, ведущее к несомненной истине cogito."
            },
            { 
                id: "clear_distinct", 
                label: "Ясные и отчётливые идеи", 
                philosopher: "descartes", 
                rubrics: ["knowledge"], 
                description: "Критерий истинности",
                extendedDescription: "Правило истины: всё, что мы воспринимаем ясно и отчетливо, истинно. Ясность - это присутствие идеи внимательному уму, отчетливость - её отделенность от всех других идей. Cogito - парадигма ясной и отчетливой идеи. Бог, будучи совершенным и не-обманщиком, гарантирует, что наша ясно воспринятая интеллектуальная интуиция не может нас обманывать. Это мост от субъективной достоверности к объективной истине."
            },
            { 
                id: "innate_ideas", 
                label: "Врождённые идеи", 
                philosopher: "descartes", 
                rubrics: ["knowledge"], 
                description: "Априорное знание",
                extendedDescription: "Идеи, присущие уму от рождения, не приобретенные из опыта: идея Бога, идея субстанции, математические и логические истины. Эти идеи не обязательно осознаются с рождения, но присутствуют как врожденные способности или диспозиции ума. Против эмпиризма Декарт утверждает, что опыт лишь пробуждает эти идеи, но не создает их. Врожденность гарантирует их достоверность и универсальность."
            },
            
            // ЛОКК
            { 
                id: "tabula_rasa", 
                label: "Tabula rasa", 
                philosopher: "locke", 
                rubrics: ["knowledge"], 
                description: "Чистая доска - нет врожденных идей",
                extendedDescription: "Радикальный эмпиристский тезис: ум при рождении подобен чистой доске, не содержащей никаких врожденных идей или принципов. Всё знание происходит из опыта - внешнего (sensation) и внутреннего (reflection). Не существует врожденных теоретических или моральных принципов, известных всем людям от рождения. Даже то, что кажется универсальным, на самом деле приобретено из опыта. Это атака на рационализм и обоснование эмпиризма."
            },
            { 
                id: "simple_ideas", 
                label: "Простые идеи", 
                philosopher: "locke", 
                rubrics: ["knowledge"], 
                description: "Элементарные чувственные данные",
                extendedDescription: "Атомарные, неразложимые далее элементы познания, получаемые пассивно из ощущения или рефлексии. Примеры: белизна, твердость, холод, мышление, желание. Ум не может создавать или уничтожать простые идеи, он только принимает их от внешних объектов через органы чувств или от рефлексии над собственными операциями. Простые идеи - строительные блоки всего знания."
            },
            { 
                id: "complex_ideas", 
                label: "Сложные идеи", 
                philosopher: "locke", 
                rubrics: ["knowledge"], 
                description: "Комбинации простых идей",
                extendedDescription: "Идеи, которые ум активно конструирует из простых идей путем соединения, сравнения и абстрагирования. Ум здесь активен, создавая новые сложные идеи: субстанций (золото, человек), модусов (треугольник, благодарность), отношений (причина, тождество). Эта способность комбинирования делает возможным неограниченное расширение знания за пределы непосредственного опыта, но все сложные идеи в конечном счете сводимы к простым."
            },
            { 
                id: "primary_qualities", 
                label: "Первичные качества", 
                philosopher: "locke", 
                rubrics: ["knowledge"], 
                description: "Объективные свойства тел",
                extendedDescription: "Качества, действительно принадлежащие телам независимо от восприятия: плотность, протяженность, форма, движение, число. Эти качества неотделимы от тела, всегда присутствуют в нем. Наши идеи первичных качеств сходны с самими качествами - они репрезентируют реальные свойства объектов. Это объективная основа материального мира, познаваемая через механическое воздействие тел на наши органы чувств."
            },
            { 
                id: "secondary_qualities", 
                label: "Вторичные качества", 
                philosopher: "locke", 
                rubrics: ["knowledge"], 
                description: "Субъективные ощущения",
                extendedDescription: "Качества, которые не существуют в самих телах, а являются силами вызывать в нас определенные ощущения: цвет, звук, вкус, запах, температура. В самих объектах есть только расположение и движение мельчайших частиц (первичные качества), которые производят в нас идеи вторичных качеств. Эти идеи не сходны с чем-либо в самих телах - цвет не находится в объекте, а только в восприятии."
            },
            { 
                id: "substance_locke", 
                label: "Субстанция", 
                philosopher: "locke", 
                rubrics: ["being"], 
                description: "Неизвестный носитель качеств",
                extendedDescription: "Предполагаемый носитель или подложка, в которой существуют качества. Мы не можем воспринимать субстанцию саму по себе, только её качества; поэтому идея субстанции смутна и неопределенна - это 'нечто, мы не знаем что' (something, we know not what). Субстанция - необходимое допущение для объяснения связности качеств, но её природа остается скрытой. Это агностическая позиция по отношению к метафизике."
            },
            { 
                id: "personal_identity", 
                label: "Личная идентичность", 
                philosopher: "locke", 
                rubrics: ["consciousness"], 
                description: "Тождество через память",
                extendedDescription: "Идентичность личности во времени определяется не тождеством субстанции (души или тела), а непрерывностью сознания, прежде всего памяти. Лицо есть лицо постольку, поскольку может осознавать себя как то же самое мыслящее существо в разные времена и места. Где нет сознания, нет личности. Это революционная психологическая концепция личности, отделяющая её от метафизической субстанции души."
            },
            { 
                id: "property_theory", 
                label: "Теория собственности", 
                philosopher: "locke", 
                rubrics: ["politics"], 
                description: "Труд как основание собственности",
                extendedDescription: "В естественном состоянии человек приобретает право собственности на вещь, примешивая к ней свой труд. Каждый человек имеет собственность на свою личность и свой труд; следовательно, то, с чем он смешивает свой труд, становится его собственностью. Это право естественно и предшествует государству. Ограничение: можно присваивать ровно столько, сколько можно использовать без порчи и при условии оставления достаточного и столь же хорошего для других."
            },
            
            // СПИНОЗА
            { 
                id: "substance_spinoza", 
                label: "Субстанция", 
                philosopher: "spinoza", 
                rubrics: ["being", "absolute"], 
                description: "Бог или природа (Deus sive Natura)",
                extendedDescription: "Единственная, бесконечная, самопричинная субстанция, которая есть причина самой себя (causa sui) и всего остального. Бог и Природа - два имени одной реальности, рассматриваемой то как активное начало (natura naturans), то как совокупность следствий (natura naturata). Субстанция абсолютно бесконечна, обладает бесконечными атрибутами, из которых нам известны два: мышление и протяжение. Это имманентный пантеизм, отождествляющий Бога с тотальностью природы."
            },
            { 
                id: "modes", 
                label: "Модусы", 
                philosopher: "spinoza", 
                rubrics: ["being"], 
                description: "Проявления единой субстанции",
                extendedDescription: "Состояния или модификации субстанции - всё, что существует в другом и познается через другое. Отдельные вещи, включая человеческие умы и тела, - конечные модусы двух атрибутов субстанции. Модусы не имеют самостоятельного существования, они целиком зависят от субстанции. Различие между бесконечными и конечными модусами: первые непосредственно следуют из природы атрибута, вторые - из других конечных модусов в бесконечной цепи причин."
            },
            { 
                id: "attributes", 
                label: "Атрибуты", 
                philosopher: "spinoza", 
                rubrics: ["matter"], 
                description: "Мышление и протяжение",
                extendedDescription: "То, что интеллект усматривает в субстанции как составляющее её сущность. Субстанция обладает бесконечными атрибутами, но человеческому уму доступны только два: мышление (cogitatio) и протяжение (extensio). Каждый атрибут выражает вечную и бесконечную сущность субстанции; атрибуты параллельны и независимы, но представляют одну и ту же реальность. Порядок и связь идей те же, что порядок и связь вещей."
            },
            { 
                id: "conatus", 
                label: "Conatus", 
                philosopher: "spinoza", 
                rubrics: ["will"], 
                description: "Стремление к самосохранению",
                extendedDescription: "Фундаментальное стремление каждой вещи пребывать в своем бытии, противясь всему, что могло бы его уменьшить или уничтожить. Не инстинкт самосохранения, а онтологический принцип: сама сущность вещи состоит в усилии продолжать существовать. В человеке conatus проявляется как желание (cupiditas), являющееся самой сущностью человека. Из него выводятся все аффекты: радость (увеличение способности действовать) и печаль (её уменьшение)."
            },
            { 
                id: "intellectual_love", 
                label: "Интеллектуальная любовь", 
                philosopher: "spinoza", 
                rubrics: ["absolute"], 
                description: "Amor Dei intellectualis",
                extendedDescription: "Высшая форма познания и высшее благо - интеллектуальная любовь ума к Богу, которая есть часть бесконечной любви, которой Бог любит самого себя. Это не эмоциональная привязанность, а познание единства всех вещей в Боге sub specie aeternitatis (под знаком вечности). Достигается через адекватное познание третьего рода, ведущее к блаженству и свободе. Ум, познающий себя и тело под формой вечности, тем самым познает Бога."
            },
            { 
                id: "determinism", 
                label: "Детерминизм", 
                philosopher: "spinoza", 
                rubrics: ["freedom"], 
                description: "Необходимость всего существующего",
                extendedDescription: "Абсолютный детерминизм: всё происходит с необходимостью из вечной природы Бога. Нет случайности, нет свободы воли в традиционном смысле - всё предопределено бесконечной цепью причин и следствий. Однако свобода возможна как познанная необходимость: когда человек адекватно познает причины своих действий и понимает их необходимость, он становится свободным. Свобода не в выборе, а в понимании и принятии необходимости."
            },
            { 
                id: "natura_naturans", 
                label: "Natura naturans", 
                philosopher: "spinoza", 
                rubrics: ["absolute"], 
                description: "Природа творящая, Бог как активная причина",
                extendedDescription: "Бог, рассматриваемый как свободная причина, производящая все вещи из необходимости своей природы. Это активный, порождающий аспект субстанции - Бог в его атрибутах как вечная творческая мощь. Natura naturans - не личный творец, действующий по произволу, а безличная продуктивная природа, с необходимостью производящая бесконечное многообразие модусов. Имманентная, а не трансцендентная причинность."
            },
            { 
                id: "natura_naturata", 
                label: "Natura naturata", 
                philosopher: "spinoza", 
                rubrics: ["being"], 
                description: "Природа сотворённая, следствия субстанции",
                extendedDescription: "Всё, что следует из необходимости природы Бога - совокупность модусов, выражающих атрибуты субстанции. Это пассивный, произведенный аспект - мир как система следствий, конечные и бесконечные модусы. Natura naturata не отделена от Бога, а составляет его бесконечное самовыражение в модусах. Различие natura naturans и natura naturata - не онтологическое, а аспектуальное: две стороны единой божественной природы."
            },
            { 
                id: "adequate_ideas", 
                label: "Адекватные идеи", 
                philosopher: "spinoza", 
                rubrics: ["knowledge"], 
                description: "Истинное, полное познание",
                extendedDescription: "Идеи, которые в самих себе, безотносительно к объекту, обладают всеми свойствами истинной идеи - ясностью, отчетливостью и внутренней согласованностью. Адекватная идея полностью объясняет свой объект через его причину, познавая вещь в её необходимости. Это познание второго и третьего рода - рациональное и интуитивное, в отличие от смутного чувственного познания. Чем больше адекватных идей имеет ум, тем меньше он подвержен пассивным аффектам и тем свободнее."
            },
            
            // ЛЕЙБНИЦ
            { 
                id: "monads", 
                label: "Монады", 
                philosopher: "leibniz", 
                rubrics: ["being"], 
                description: "Простые неделимые субстанции",
                extendedDescription: "Истинные атомы природы, простые субстанции, лишенные частей, протяжения и формы. Каждая монада - живое зеркало универса, отражающее всю вселенную со своей уникальной точки зрения. Монады абсолютно замкнуты, 'не имеют окон' - не взаимодействуют напрямую, но согласованы предустановленной гармонией. Иерархия монад от минимального восприятия до высшей монады - Бога, обладающего совершенным знанием."
            },
            { 
                id: "preestablished", 
                label: "Предустановленная гармония", 
                philosopher: "leibniz", 
                rubrics: ["being"], 
                description: "Согласованность монад",
                extendedDescription: "Божественное установление совершенного соответствия между всеми монадами, объясняющее видимость взаимодействия при фактической изоляции. Бог при творении синхронизировал внутренние программы всех монад так, что их перцепции и апперцепции взаимно согласованы. Это решает психо-физическую проблему без реального взаимодействия души и тела: они подобны синхронизированным часам, каждые идут сами по себе, но всегда показывают одно время."
            },
            { 
                id: "best_worlds", 
                label: "Лучший из миров", 
                philosopher: "leibniz", 
                rubrics: ["absolute"], 
                description: "Теодицея",
                extendedDescription: "Бог, будучи совершенно благим, мудрым и могущественным, из бесконечного множества возможных миров выбрал для актуализации наилучший - максимизирующий добро при минимуме зла. Зло существует, но либо как необходимое следствие метафизических ограничений конечности, либо как средство для большего добра. Оптимизм Лейбница не отрицает зло, но утверждает, что любой альтернативный мир содержал бы больше зла или меньше добра."
            },
            { 
                id: "petites_perceptions", 
                label: "Малые перцепции", 
                philosopher: "leibniz", 
                rubrics: ["consciousness"], 
                description: "Бессознательные восприятия",
                extendedDescription: "Бесчисленные минутные восприятия, не достигающие порога сознания, но составляющие основу нашей психической жизни. Даже 'голые' монады обладают перцепциями, хотя и лишены апперцепции. Сумма малых перцепций производит осознаваемые восприятия (как шум моря складывается из звуков отдельных капель). Это открытие бессознательного измерения психики, предвосхищающее современную психологию."
            },
            { 
                id: "sufficient_reason", 
                label: "Достаточное основание", 
                philosopher: "leibniz", 
                rubrics: ["being"], 
                description: "Принцип рациональности",
                extendedDescription: "Фундаментальный метафизический принцип: ничто не происходит без достаточного основания, то есть без причины, по которой это есть так, а не иначе. Применим даже к Богу: он действует по принципу наилучшего, его выбор имеет достаточное основание в совершенстве избранного. Этот принцип, дополняющий принцип противоречия, утверждает полную рациональность реальности - для всего существует объяснение, хотя оно может быть недоступно конечному уму."
            },
            { 
                id: "apperception", 
                label: "Апперцепция", 
                philosopher: "leibniz", 
                rubrics: ["consciousness"], 
                description: "Осознанное восприятие, рефлексивное сознание",
                extendedDescription: "Рефлексивное осознание своих восприятий, сознание сознания. Не все монады обладают апперцепцией - только разумные души, способные к самосознанию и рефлексии. Это высший уровень психической деятельности, отличающий человека от животных. Апперцепция позволяет нам осознавать наши перцепции, формировать ясные идеи и заниматься рефлексивным познанием. Она делает возможным самопознание и метафизику."
            },
            { 
                id: "continuity", 
                label: "Принцип непрерывности", 
                philosopher: "leibniz", 
                rubrics: ["being"], 
                description: "Natura non facit saltus - природа не делает скачков",
                extendedDescription: "В природе всё происходит постепенно, нет резких переходов или пробелов - между любыми двумя состояниями существует бесконечный ряд промежуточных. Этот принцип применим как к физическому миру (покой - это бесконечно малое движение), так и к иерархии существ (между человеком и животным нет четкой границы). Непрерывность отражает совершенство божественного творения и служит важным эвристическим принципом в науке и метафизике."
            },
            
            // БЕРКЛИ
            { 
                id: "esse_percipi", 
                label: "Esse est percipi", 
                philosopher: "berkeley", 
                rubrics: ["being"], 
                description: "Быть - значит быть воспринимаемым",
                extendedDescription: "Радикальный идеалистический тезис: существование чувственных вещей состоит исключительно в том, чтобы быть воспринимаемыми (esse est percipi) или воспринимать (esse est percipere для духов). Вне восприятия нет никакого бытия - дерево в саду существует, только пока кто-то его воспринимает. Это отрицание материальной субстанции как чего-то, существующего независимо от ума. Реальны только идеи и воспринимающие их духи."
            },
            { 
                id: "immaterialism", 
                label: "Имматериализм", 
                philosopher: "berkeley", 
                rubrics: ["being"], 
                description: "Отрицание материальной субстанции",
                extendedDescription: "Отрицание существования материи как независимой от ума субстанции. То, что мы называем материальными вещами, есть не что иное, как совокупности идей в уме. Концепция материи философски излишня и приводит к скептицизму; устранение её делает мир более понятным и познаваемым. Имматериализм не отрицает реальность вещей, но утверждает, что их реальность - идеальна, а не материальна."
            },
            { 
                id: "god_perceiver", 
                label: "Бог как воспринимающий", 
                philosopher: "berkeley", 
                rubrics: ["absolute"], 
                description: "Бог гарантирует существование мира",
                extendedDescription: "Бог - бесконечный вечный дух, постоянно воспринимающий всё. Это решает проблему непрерывности существования вещей: дерево продолжает существовать, когда никто из людей его не воспринимает, потому что его постоянно воспринимает Бог. Божественное восприятие не только поддерживает бытие вещей, но и производит в нас идеи согласно определенному порядку - законам природы. Бог как causa occasionalis наших восприятий."
            },
            { 
                id: "ideas_berkeley", 
                label: "Идеи", 
                philosopher: "berkeley", 
                rubrics: ["knowledge"], 
                description: "Единственная реальность - идеи в уме",
                extendedDescription: "Идеи - это всё, что непосредственно воспринимается умом: цвета, звуки, формы, движения и т.д. Они пассивны, инертны, зависят от воспринимающего духа. Различие между реальными вещами и воображением - не в материальной основе, а в происхождении: реальные идеи производятся в нас Богом, а воображаемые - нашей собственной волей. Порядок и регулярность божественных идей составляют то, что мы называем природой."
            },
            
            // ЮМ
            { 
                id: "impressions", 
                label: "Впечатления", 
                philosopher: "hume", 
                rubrics: ["knowledge"], 
                description: "Первичные чувственные данные",
                extendedDescription: "Непосредственные, живые данные опыта - ощущения, аффекты, эмоции. Впечатления обладают максимальной силой и живостью, поступают в ум с наибольшей интенсивностью. Они первичны по отношению к идеям - всякая простая идея имеет соответствующее впечатление, из которого она происходит. Различают впечатления ощущения (от внешних объектов) и впечатления рефлексии (от внутреннего опыта - эмоции, желания)."
            },
            { 
                id: "ideas_hume", 
                label: "Идеи", 
                philosopher: "hume", 
                rubrics: ["knowledge"], 
                description: "Копии впечатлений",
                extendedDescription: "Бледные образы впечатлений в мышлении и рассуждении. Идеи менее живы и интенсивны, чем впечатления, от которых они производны. Всякая идея должна быть сводима к соответствующему впечатлению - это критерий осмысленности. Сложные идеи могут комбинировать элементы различных впечатлений, но все простые идеи копируют простые впечатления. Ум не может создавать, а только комбинировать и преобразовывать данные опыта."
            },
            { 
                id: "causality_critique", 
                label: "Критика причинности", 
                philosopher: "hume", 
                rubrics: ["knowledge"], 
                description: "Привычка, не необходимость",
                extendedDescription: "Разрушительная критика каузального принципа: мы не воспринимаем необходимую связь между причиной и следствием, а только их постоянное соединение. Идея причинности - не логическая необходимость, а психологическая привычка: после многократного наблюдения последовательности A-B ум привыкает ожидать B при появлении A. Нет рационального обоснования индукции - она основана на вере, а не на разуме. Это подрывает метафизику и эмпирическую науку."
            },
            { 
                id: "bundle_theory", 
                label: "Теория пучка", 
                philosopher: "hume", 
                rubrics: ["consciousness"], 
                description: "Я как связка восприятий",
                extendedDescription: "Радикальная критика субстанциальной концепции 'я'. Мы не имеем впечатления постоянного и неизменного 'я'; самонаблюдение обнаруживает только поток отдельных восприятий. 'Я' - это не более чем 'пучок или связка различных восприятий', сменяющих друг друга с невообразимой быстротой. Нет субстрата, объединяющего восприятия; их единство - лишь фикция воображения, создаваемая ассоциацией и памятью."
            },
            { 
                id: "is_ought", 
                label: "Гильотина Юма", 
                philosopher: "hume", 
                rubrics: ["ethics"], 
                description: "Разрыв между сущим и должным",
                extendedDescription: "Логический разрыв между дескриптивными утверждениями о том, что есть, и нормативными - о том, что должно быть. Из фактических суждений ('is') нельзя логически вывести моральные ('ought'). Невозможен переход от описательных посылок к предписывающим заключениям без введения нормативной посылки. Это подрывает попытки обосновать мораль на основе фактов о природе человека или устройстве мира."
            },
            { 
                id: "custom", 
                label: "Привычка", 
                philosopher: "hume", 
                rubrics: ["knowledge"], 
                description: "Основа веры и ожиданий",
                extendedDescription: "Привычка (или обычай) - величайший проводник человеческой жизни, основа всех наших выводов о фактах. Не разум, а привычка заставляет нас ожидать в будущем того, что соответствует прошлому опыту. Повторение не дает логического основания для индукции, но создает психологическую склонность к определенным ожиданиям. Привычка - это природный инстинкт, делающий возможной практическую жизнь там, где разум бессилен."
            },
            
            // КАНТ
            { 
                id: "thing_itself", 
                label: "Вещь в себе", 
                philosopher: "kant", 
                rubrics: ["being"], 
                description: "Непознаваемая сущность",
                extendedDescription: "Ding an sich - вещи, как они существуют сами по себе, независимо от наших способов познания. Трансцендентная реальность, навсегда закрытая для теоретического познания, ибо мы познаем только через априорные формы чувственности и рассудка. Мы не можем знать, каковы вещи в себе - доступны только феномены, явления. Вещь в себе - граничное понятие, указывающее на пределы возможного опыта и напоминающее о зависимости нашего познания от субъективных форм."
            },
            { 
                id: "phenomenon", 
                label: "Феномен", 
                philosopher: "kant", 
                rubrics: ["being"], 
                description: "Явление для нас",
                extendedDescription: "Вещи, как они являются нам в опыте, оформленные априорными формами чувственности (пространство и время) и категориями рассудка. Феномены - единственный возможный объект теоретического познания. Мир феноменов не иллюзия, а реальный объект опыта, но его структура частично определена познающим субъектом. Различение феномена и ноумена - ключ к разрешению антиномий разума и ограничению притязаний метафизики."
            },
            { 
                id: "categorical", 
                label: "Категорический императив", 
                philosopher: "kant", 
                rubrics: ["ethics"], 
                description: "Безусловный моральный закон",
                extendedDescription: "Высший принцип морали, повелевающий безусловно, независимо от целей и последствий. Главная формулировка: 'Поступай так, чтобы максима твоей воли могла бы быть всеобщим законом'. Требует универсализации: прежде чем действовать, спроси себя, мог ли бы ты желать, чтобы все поступали так же. Другая формулировка: 'Относись к человечеству в своем лице и лице другого всегда как к цели, никогда только как к средству'. Это автономный закон разума, основание достоинства личности."
            },
            { 
                id: "apriori", 
                label: "Априорные формы", 
                philosopher: "kant", 
                rubrics: ["knowledge"], 
                description: "Врожденные структуры познания",
                extendedDescription: "Формальные условия возможности опыта, присущие познающему субъекту до и независимо от опыта. Априорные формы чувственности - пространство и время; априорные формы рассудка - двенадцать категорий. Они не извлекаются из опыта, но делают опыт возможным, структурируя хаотическое многообразие ощущений. Априорное знание необходимо и универсально, в отличие от апостериорного, которое случайно и частно."
            },
            { 
                id: "synthetic_apriori", 
                label: "Синтетические априори", 
                philosopher: "kant", 
                rubrics: ["knowledge"], 
                description: "Расширяющие априорные суждения",
                extendedDescription: "Суждения, которые одновременно априорны (необходимы и универсальны) и синтетичны (расширяют наше знание, не содержатся аналитически в понятии субъекта). Примеры: математические истины ('7+5=12'), основоположения естествознания ('все события имеют причины'). Возможность синтетических априорных суждений - центральный вопрос 'Критики чистого разума'. Они возможны потому, что выражают априорные условия опыта, накладываемые на него познающим субъектом."
            },
            { 
                id: "transcendental", 
                label: "Трансцендентальное", 
                philosopher: "kant", 
                rubrics: ["knowledge"], 
                description: "Условия возможности опыта",
                extendedDescription: "То, что касается не предметов опыта, а нашего способа познания предметов, поскольку это познание должно быть возможным априори. Трансцендентальное исследование - не изучение объектов, а изучение наших познавательных способностей и априорных условий возможности опыта. Это рефлексия второго порядка: не 'что мы познаем?', а 'как возможно, что мы познаем?' Трансцендентальная философия - критика и обоснование возможных границ разума."
            },
            { 
                id: "autonomy", 
                label: "Автономия воли", 
                philosopher: "kant", 
                rubrics: ["freedom"], 
                description: "Самозаконодательство разума",
                extendedDescription: "Свойство воли быть законом для самой себя, самостоятельно устанавливать моральный закон без внешнего принуждения или гетерономных мотивов. Автономия - противоположность гетерономии, где воля определяется внешними объектами желания. Моральная воля автономна, когда определяется только формой всеобщности закона, категорическим императивом. Автономия - основание достоинства человека и возможности свободы в мире природной необходимости."
            },
            { 
                id: "antinomies", 
                label: "Антиномии", 
                philosopher: "kant", 
                rubrics: ["knowledge"], 
                description: "Противоречия чистого разума при выходе за опыт",
                extendedDescription: "Неразрешимые конфликты разума с самим собой, когда он пытается познавать безусловное (мир как целое, свободу, Бога). Четыре антиномии: конечность/бесконечность мира во времени и пространстве; простота/сложность субстанций; свобода/необходимость; необходимое существо/только случайное. Тезис и антитезис каждой антиномии равно доказуемы. Разрешение: различение феноменов и ноуменов - антиномии возникают от незаконного применения категорий за пределами опыта."
            },
            { 
                id: "sublime", 
                label: "Возвышенное", 
                philosopher: "kant", 
                rubrics: ["ethics"], 
                description: "Эстетическая категория безграничного",
                extendedDescription: "Чувство, вызываемое безмерно великим (математически возвышенное) или безмерно могущественным (динамически возвышенное), что превосходит возможности воображения. В отличие от прекрасного (гармония и соразмерность), возвышенное связано с бесформенностью и безграничностью. Опыт возвышенного двойствен: сначала неудовольствие от неспособности воображения охватить целое, затем удовольствие от осознания превосходства разума над чувственностью, нашего морального назначения над природой."
            },
            { 
                id: "postulates", 
                label: "Постулаты практического разума", 
                philosopher: "kant", 
                rubrics: ["absolute"], 
                description: "Бог, бессмертие души, свобода воли",
                extendedDescription: "Три теоретически недоказуемые, но практически необходимые идеи: свобода воли (условие моральности), бессмертие души (возможность бесконечного нравственного совершенствования), бытие Бога (гарант соответствия добродетели и счастья). Не теоретические знания, а практические постулаты - моральный закон требует принять их как условия возможности высшего блага. Это рациональная вера, основанная не на доказательствах, а на моральной необходимости."
            },
            { 
                id: "aesthetic_judgment", 
                label: "Эстетическое суждение", 
                philosopher: "kant", 
                rubrics: ["knowledge"], 
                description: "Суждение вкуса, незаинтересованное удовольствие",
                extendedDescription: "Суждение о прекрасном, основанное на чувстве удовольствия, которое субъективно, но претендует на всеобщность. Незаинтересованное - не связано с желанием обладать объектом или пользой. Суждение вкуса не когнитивно (не дает знания об объекте), но и не просто субъективно - оно предполагает общее чувство (sensus communis), позволяющее нам ожидать согласия других. Эстетическое суждение - мост между теоретическим и практическим разумом, природой и свободой."
            },
            
            // ФИХТЕ
            { 
                id: "absolute_ego", 
                label: "Абсолютное Я", 
                philosopher: "fichte", 
                rubrics: ["consciousness"], 
                description: "Самополагающее сознание",
                extendedDescription: "Первопринцип философии - абсолютное, ничем не обусловленное Я, которое само себя полагает (Tathandlung). Не эмпирическое, индивидуальное 'я', а трансцендентальное, чистое самосознание как условие всякого опыта. Я первично по отношению к объекту, ибо полагает и себя, и не-Я. Абсолютное Я - бесконечная деятельность, самопорождающаяся спонтанность, которая не имеет бытия, а есть чистое действование. Это радикализация кантовского трансцендентального единства апперцепции."
            },
            { 
                id: "non_ego", 
                label: "Не-Я", 
                philosopher: "fichte", 
                rubrics: ["being"], 
                description: "Противоположность Я",
                extendedDescription: "Всё, что противополагается Я - объективный мир, препятствие для бесконечной деятельности Я. Не-Я не существует независимо, а полагается самим Я для себя как граница, необходимая для самореализации. Я полагает не-Я в себе, создавая различие субъекта и объекта внутри себя. Эта диалектика Я и не-Я - основа всего опыта и познания. Не-Я - продукт бессознательной продуктивной деятельности воображения."
            },
            { 
                id: "tathandlung", 
                label: "Татхандлунг", 
                philosopher: "fichte", 
                rubrics: ["consciousness"], 
                description: "Действие-поступок Я",
                extendedDescription: "Первоначальный акт самополагания Я, одновременно действие и факт (Tat-Handlung). Не психологический акт, а абсолютное начало философии, из которого выводится всё остальное. Это чистая спонтанность, непосредственное самосознание, в котором деятель и действие совпадают. Я существует, только полагая себя; его сущность - в деятельности самополагания. Это выход за пределы кантовского дуализма вещи в себе и феномена к монизму абсолютного Я."
            },
            { 
                id: "striving", 
                label: "Стремление", 
                philosopher: "fichte", 
                rubrics: ["freedom"], 
                description: "Бесконечная активность Я",
                extendedDescription: "Фундаментальная характеристика Я - бесконечное стремление преодолеть не-Я, ассимилировать его, превратить в Я. Это стремление по определению не может быть завершено - полное преодоление не-Я означало бы исчезновение конечного Я. Стремление - источник всей активности, практической и теоретической. В практической сфере оно проявляется как моральное усилие преобразовать мир согласно разуму; бесконечность задачи - условие морального прогресса."
            },
            { 
                id: "practical_primacy", 
                label: "Примат практического", 
                philosopher: "fichte", 
                rubrics: ["ethics"], 
                description: "Приоритет действия над познанием",
                extendedDescription: "Практическая деятельность первична по отношению к теоретической; Я изначально есть действование, а не созерцание. Познание возникает как препятствие для практического стремления - мы познаем мир, поскольку он сопротивляется нашей воле. Теоретическое отношение вторично, производно от практического. Истина не дана в созерцании, а создается в действии. Философия должна исходить не из бытия, а из долженствования, из императива нравственного действия."
            },
            { 
                id: "imagination", 
                label: "Продуктивное воображение", 
                philosopher: "fichte", 
                rubrics: ["consciousness"], 
                description: "Einbildungskraft - синтезирующая способность Я",
                extendedDescription: "Посредствующая способность между Я и не-Я, которая творит синтез через 'парение' (Schweben) между противоположностями. Продуктивное воображение бессознательно производит объективный мир как необходимый коррелят самосознания. Это не произвольная фантазия, а трансцендентальная способность, делающая возможным опыт. Воображение создает схему времени и пространства, в которых является не-Я. Центральная, но самая темная часть наукоучения."
            },
            { 
                id: "wissenschaftslehre", 
                label: "Наукоучение", 
                philosopher: "fichte", 
                rubrics: ["method"], 
                description: "Система философии как строгая наука",
                extendedDescription: "Проект философии как строгой науки, выводящей всё знание из единого самоочевидного принципа - самополагания Я. Не система знаний о мире, а учение о знании, наука наук. Систематическая дедукция всех категорий и структур опыта из трех основоположений. Наукоучение - не догма, а метод, живое философствование, требующее от читателя воспроизведения актов трансцендентального мышления. Постоянно переделывалось Фихте в поисках адекватного изложения."
            },
            
            // ГЕГЕЛЬ
            { 
                id: "absolute_idea", 
                label: "Абсолютная идея", 
                philosopher: "hegel", 
                rubrics: ["absolute"], 
                description: "Саморазвивающийся мировой дух",
                extendedDescription: "Высшая ступень развития духа, на которой он полностью познает себя в своей тотальности. Не статичная сущность, а живой процесс самопознания и самореализации через диалектическое движение. Абсолютная идея включает в себя всю действительность как моменты своего развития - природу как инобытие духа, историю как его возвращение к себе. Это конкретное единство всех определений, достигшее полной прозрачности для себя - мышление, мыслящее само себя."
            },
            { 
                id: "dialectic", 
                label: "Диалектика", 
                philosopher: "hegel", 
                rubrics: ["dialectics"], 
                description: "Тезис-антитезис-синтез",
                extendedDescription: "Метод и структура реальности: развитие через противоречие и его разрешение в высшем синтезе. Каждое понятие содержит в себе свою противоположность, переходит в неё, и обе снимаются (aufgehoben) в новом единстве. Не формальная логика, а логика развития, движения от абстрактного к конкретному. Диалектика - самодвижение понятия, ритм органической жизни духа. Три момента: абстрактный (рассудочный), диалектический (негативно-разумный), спекулятивный (позитивно-разумный)."
            },
            { 
                id: "weltgeist", 
                label: "Weltgeist", 
                philosopher: "hegel", 
                rubrics: ["absolute"], 
                description: "Мировой дух в истории",
                extendedDescription: "Абсолютный дух, реализующий себя в мировой истории через дух народов. История - не случайный процесс, а разумная необходимость, прогресс в сознании свободы. Каждая эпоха - ступень самопознания духа, каждый народ - носитель мирового духа на определенной стадии. Великие личности - орудия мирового духа, бессознательно реализующие его цели. История завершается полным самопознанием духа в абсолютном знании."
            },
            { 
                id: "aufhebung", 
                label: "Aufhebung", 
                philosopher: "hegel", 
                rubrics: ["dialectics"], 
                description: "Снятие противоречий",
                extendedDescription: "Диалектическое снятие - тройное движение: отрицание, сохранение и подъем на высший уровень. Противоположности не просто уничтожаются, но сохраняются в преобразованном виде как моменты высшего единства. Немецкое 'aufheben' уникально объединяет эти три смысла. Каждое снятие одновременно конец и новое начало, смерть и воскресение. Это не компромисс, а качественно новая ступень, включающая в себя всё богатство предшествующих противоположностей."
            },
            { 
                id: "master_slave", 
                label: "Господин и раб", 
                philosopher: "hegel", 
                rubrics: ["dialectics"], 
                description: "Диалектика признания",
                extendedDescription: "Ключевая диалектическая фигура самосознания: борьба за признание приводит к отношению господства и рабства. Парадокс: господин, добившийся признания через страх смерти раба, получает пустое признание от несвободного; раб же через труд и страх смерти достигает подлинного самосознания. Рабское сознание, преобразуя природу трудом, формирует себя и движется к свободе. Диалектика переворачивается - раб становится истиной господина."
            },
            { 
                id: "objective_spirit", 
                label: "Объективный дух", 
                philosopher: "hegel", 
                rubrics: ["politics"], 
                description: "Дух в социальных институтах",
                extendedDescription: "Реализация духа в объективных формах социальной жизни - праве, морали, нравственности (семья, гражданское общество, государство). Не субъективные мнения, а объективированные формы свободы, воплощенные в институтах. Государство - высшая форма объективного духа, 'шествие Бога в мире', реализация разумной свободы. Только в государстве индивид достигает конкретной свободы через единство с всеобщим."
            },
            { 
                id: "cunning_reason", 
                label: "Хитрость разума", 
                philosopher: "hegel", 
                rubrics: ["dialectics"], 
                description: "Самореализация духа через историю",
                extendedDescription: "List der Vernunft - способ, которым мировой разум осуществляет свои цели через страсти и интересы индивидов. Люди действуют ради собственных целей, но неосознанно реализуют высший замысел разума. Великие исторические личности - 'деловые люди мирового духа', орудия в его руках. Они разрушаются, выполнив свою миссию. Разум хитр - он дает страстям действовать, оставаясь в стороне, но в результате реализуется всеобщее."
            },
            { 
                id: "entfremdung", 
                label: "Entfremdung", 
                philosopher: "hegel", 
                rubrics: ["dialectics"], 
                description: "Отчуждение как необходимый момент развития духа",
                extendedDescription: "Отчуждение - необходимая стадия развития духа: он должен выйти из себя, стать иным, чтобы вернуться к себе обогащенным. Природа - отчужденный дух, дух в форме инобытия. Труд - отчуждение субъекта в продукте. Это не просто негативный процесс, а момент самопознания: дух познает себя через свое отчуждение. Отчуждение снимается в возвращении духа к себе, но уже не как абстрактное тождество, а как конкретное единство."
            },
            { 
                id: "negative", 
                label: "Негативное", 
                philosopher: "hegel", 
                rubrics: ["dialectics"], 
                description: "Движущая сила диалектики, отрицание",
                extendedDescription: "Негативность - движущая сила диалектики, способность духа отрицать непосредственное, противоречить себе и через это развиваться. Не внешнее разрушение, а внутреннее самоотрицание, имманентная негативность понятия. 'Негативное есть само Я' - субъект как чистая негативность, способная преодолевать всякую определенность. Смерть, труд, разлука - формы негативного, через которые дух приходит к себе. 'Жизнь духа - это жизнь, которая переносит смерть и в ней себя сохраняет.'"
            },
            { 
                id: "concrete", 
                label: "Конкретное", 
                philosopher: "hegel", 
                rubrics: ["being"], 
                description: "Единство многообразных определений",
                extendedDescription: "Истинно конкретное - не чувственная единичность, а понятие, содержащее в себе всё богатство определений в их единстве. Конкретное есть тотальность, живое целое, развитое единство многообразия. В отличие от абстрактного (одностороннего, бедного), конкретное включает различия и противоположности как свои моменты. Истина конкретна - она есть систематическое развертывание всех определений, а не голое абстрактное тождество."
            },
            { 
                id: "abstract", 
                label: "Абстрактное", 
                philosopher: "hegel", 
                rubrics: ["being"], 
                description: "Одностороннее, неполное определение",
                extendedDescription: "Абстрактное - односторонне, изолированно взятое определение, оторванное от целого и противопоставленное другим. Рассудочное мышление фиксирует абстрактные определения в их раздельности. Но всякая абстракция содержит момент истины и должна быть снята в конкретной тотальности. Даже 'чувственная достоверность' абстрактна, ибо схватывает лишь 'это здесь и теперь' вне всеобщих связей. Путь от абстрактного к конкретному - путь познания истины."
            },
            
            // ШОПЕНГАУЭР
            { 
                id: "will_schop", 
                label: "Мировая воля", 
                philosopher: "schopenhauer", 
                rubrics: ["will"], 
                description: "Слепая иррациональная сила",
                extendedDescription: "Вещь в себе, истинная сущность мира - слепая, безосновная воля к жизни, бессмысленное стремление, лишенное цели и разума. Не психологический феномен, а метафизическое первоначало, объективирующееся во всех явлениях природы от камня до человека. Воля едина, индивидуация - лишь иллюзия представления. Она вечно стремится, но никогда не может удовлетвориться, ибо у неё нет конечной цели. Жизнь - проявление этой бессмысленной воли, обреченной на вечную неудовлетворенность."
            },
            { 
                id: "representation", 
                label: "Представление", 
                philosopher: "schopenhauer", 
                rubrics: ["matter"], 
                description: "Мир как иллюзия",
                extendedDescription: "Феноменальный мир - 'представление', подчиненное принципу достаточного основания в четырех формах: бытие (пространство и время), становление (причинность), бытие (логика), действие (мотивация). Мир как представление - майя, покрывало иллюзии, скрывающее истинную реальность воли. Субъект и объект представления коррелятивны - нет объекта без субъекта. Интеллект - слуга воли, производящий представления для её удовлетворения."
            },
            { 
                id: "suffering", 
                label: "Страдание", 
                philosopher: "schopenhauer", 
                rubrics: ["ethics"], 
                description: "Сущность жизни",
                extendedDescription: "Жизнь по сути своей есть страдание - неизбежное следствие воли к жизни. Желание рождает страдание неудовлетворенности; удовлетворение приносит лишь временное облегчение и скуку; новое желание - новое страдание. Это маятник между страданием и скукой. Рождение - первая вина, жизнь - искупление. Чем выше организация существа, тем интенсивнее страдание; человек страдает максимально. Единственный выход - отрицание воли к жизни."
            },
            { 
                id: "denial_will", 
                label: "Отрицание воли", 
                philosopher: "schopenhauer", 
                rubrics: ["freedom"], 
                description: "Путь к освобождению",
                extendedDescription: "Единственный путь к спасению - аскетическое отрицание воли к жизни, отказ от желаний и самого стремления к существованию. Не самоубийство (утверждает волю через отрицание конкретного явления), а постепенное угашение воли изнутри. Достигается через сострадание, осознание единства всего живого в страдании, и аскезу. Конечная цель - состояние, подобное нирване, где воля полностью успокоена, а с ней исчезает и мир представления."
            },
            { 
                id: "aesthetics_schop", 
                label: "Эстетическое созерцание", 
                philosopher: "schopenhauer", 
                rubrics: ["ethics"], 
                description: "Временное освобождение от воли",
                extendedDescription: "В эстетическом опыте субъект на время освобождается от служения воле, становится 'чистым безвольным субъектом познания', созерцающим вечные платоновские идеи вне принципа достаточного основания. Искусство дает временное освобождение от страдания, приостанавливая действие воли. Музыка - высшее искусство, ибо непосредственно выражает саму волю. Эстетическое созерцание - предвкушение окончательного освобождения через отрицание воли."
            },
            { 
                id: "compassion", 
                label: "Сострадание", 
                philosopher: "schopenhauer", 
                rubrics: ["ethics"], 
                description: "Основа морали",
                extendedDescription: "Единственная подлинная моральная мотивация - сострадание (Mitleid), способность непосредственно чувствовать чужое страдание как свое собственное. Основано на метафизическом прозрении единства всех существ в воле - индивидуация иллюзорна, в глубине все мы - одна воля. Сострадание пробивает покрывало майи, позволяя видеть в другом себя. Из сострадания проистекают справедливость (не причинять страдания) и человеколюбие (облегчать страдание). Только сострадание имеет моральную ценность."
            },
            { 
                id: "individuation", 
                label: "Principium individuationis", 
                philosopher: "schopenhauer", 
                rubrics: ["being"], 
                description: "Принцип индивидуации, источник множественности",
                extendedDescription: "Пространство и время как формы представления создают иллюзию множественности отдельных вещей и индивидов. В себе воля едина, но в представлении является как множество отдельных существ. Principium individuationis - покрывало майя, скрывающее истинное единство всего сущего. Проникновение сквозь этот принцип, осознание единства - основа сострадания и пути к освобождению. Гений и святой превосходят индивидуацию, созерцая вечное единство."
            },
            
            // ОГЮСТ КОНТ
            { 
                id: "three_stages", 
                label: "Закон трёх стадий", 
                philosopher: "comte", 
                rubrics: ["knowledge"], 
                description: "Теологическая, метафизическая, позитивная",
                extendedDescription: "Закон трёх стадий развития человеческого познания: теологическая (фетишизм, политеизм, монотеизм), метафизическая (абстрактные сущности вместо богов) и позитивная (научное знание). На каждой стадии человечество по-разному объясняет явления. В теологической стадии действуют сверхъестественные силы, в метафизической - абстрактные принципы и сущности, в позитивной - наблюдаемые закономерности. Этот закон применим как к истории всего человечества, так и к развитию отдельных наук и индивидов. Достижение позитивной стадии означает отказ от поиска первопричин и сущностей ради установления законов явлений."
            },
            { 
                id: "positive_knowledge", 
                label: "Позитивное знание", 
                philosopher: "comte", 
                rubrics: ["knowledge"], 
                description: "Научное, проверяемое знание",
                extendedDescription: "Позитивное знание - это научное знание, основанное на наблюдении и эксперименте, имеющее дело только с явлениями и их неизменными отношениями (законами), а не с первопричинами или конечными целями. Позитивная философия отказывается от вопросов 'почему?' в пользу вопросов 'как?'. Она не ищет абсолютной истины, а устанавливает относительные законы, полезные для предвидения и практической деятельности. Позитивное знание всегда относительно, приблизительно и открыто для уточнения. Это знание реального, полезного, достоверного, точного и организующего."
            },
            { 
                id: "sociology", 
                label: "Социология", 
                philosopher: "comte", 
                rubrics: ["politics"], 
                description: "Наука об обществе",
                extendedDescription: "Конт вводит термин 'социология' для обозначения новой позитивной науки об обществе, завершающей иерархию наук. Социология делится на социальную статику (изучение условий существования общества, порядка) и социальную динамику (изучение законов развития общества, прогресса). Общество рассматривается как организм, подобный биологическому, но более сложный. Социология должна стать основой рациональной политики и социальной реформы. Это первая попытка создания научной теории общества, применяющей методы естественных наук к социальным явлениям."
            },
            { 
                id: "hierarchy_sciences", 
                label: "Иерархия наук", 
                philosopher: "comte", 
                rubrics: ["knowledge"], 
                description: "Классификация наук по сложности",
                extendedDescription: "Контовская классификация наук по возрастанию сложности и убыванию общности: математика, астрономия, физика, химия, биология, социология. Каждая последующая наука основывается на предыдущих, но несводима к ним. Порядок наук отражает как историческую последовательность их развития (от более простых к более сложным), так и логическую зависимость. Математика наиболее общая и простая, социология - наиболее сложная и конкретная. Эта классификация отражает позитивистский идеал единства научного метода при многообразии предметов."
            },
            { 
                id: "social_physics", 
                label: "Социальная физика", 
                philosopher: "comte", 
                rubrics: ["politics"], 
                description: "Применение научного метода к обществу",
                extendedDescription: "Первоначальное название социологии - 'социальная физика' - выражает стремление Конта применить к обществу тот же научный метод, который успешно применяется в естественных науках. Общество подчиняется естественным законам, столь же необходимым и неизменным, как законы физики. Эти законы можно открыть через наблюдение, эксперимент и сравнение. Цель социальной физики - не только познание, но и рациональное управление обществом на научных основаниях. Позднее Конт отказался от этого термина из-за его использования бельгийским статистиком Кетле."
            },

            // КЬЕРКЕГОР
            { 
                id: "stages_existence", 
                label: "Стадии существования", 
                philosopher: "kierkegaard", 
                rubrics: ["being"], 
                description: "Эстетическая, этическая, религиозная",
                extendedDescription: "Три качественно различных способа существования: эстетический (жизнь в наслаждении момента, избегание обязательств, отчаяние), этический (жизнь в долге, выбор себя, брак), религиозный (абсолютное отношение к абсолютному, вера, парадокс). Не эволюционные ступени, а экзистенциальные возможности, между которыми нужно выбирать. Переход между стадиями - не постепенный, а скачок, качественный прыжок. Высшая стадия - религиозная, где индивид как единичный стоит перед Богом."
            },
            { 
                id: "leap_faith", 
                label: "Прыжок веры", 
                philosopher: "kierkegaard", 
                rubrics: ["freedom"], 
                description: "Иррациональное решение",
                extendedDescription: "Вера - не результат доказательств или постепенного восхождения, а абсолютное решение, качественный скачок в абсурд. Невозможно рационально обосновать веру - она требует парадокса: верить в то, что противоречит разуму (Бог-человек, вечное во времени). Прыжок совершается в страхе и трепете, это риск всей экзистенции. Авраам, готовый принести в жертву Исаака, - парадигма веры: телеологическая приостановка этического, абсолютное отношение к абсолютному."
            },
            { 
                id: "anxiety", 
                label: "Тревога", 
                philosopher: "kierkegaard", 
                rubrics: ["freedom"], 
                description: "Головокружение свободы",
                extendedDescription: "Angst - фундаментальное настроение, в котором открывается свобода как возможность возможности. Тревога - не страх перед определенным объектом, а 'головокружение свободы', когда человек сталкивается с бездной своих возможностей. В тревоге дух осознает свою свободу и ответственность. Парадокс: тревога одновременно отталкивает и притягивает. Она амбивалентна - симпатическая антипатия к собственной свободе. Тревога - возможность подлинного существования."
            },
            { 
                id: "despair", 
                label: "Отчаяние", 
                philosopher: "kierkegaard", 
                rubrics: ["consciousness"], 
                description: "Болезнь к смерти",
                extendedDescription: "'Болезнь к смерти' - отчаяние как фундаментальная структура самости, неспособной синтезировать конечное и бесконечное, возможность и необходимость, временное и вечное. Три формы: отчаяние, не осознающее себя (эстетическое); отчаяние, не желающее быть собой (слабость); отчаяние, желающее быть собой (вызов). Отчаяние универсально - это состояние грехопадшего человека. Исцеление возможно только верой - опираясь на силу, полагающую самость (Бога)."
            },
            { 
                id: "individual", 
                label: "Единичный", 
                philosopher: "kierkegaard", 
                rubrics: ["consciousness"], 
                description: "Противостояние толпе",
                extendedDescription: "Den Enkelte - единичный индивид как категория, противоположная толпе, массе, публике. Истина субъективна - она в страстном внутреннем отношении единичного к абсолютному. Гегелевскому 'всемирно-историческому' противопоставляется единичный перед Богом. Толпа - неправда; спасается и осуждается каждый в отдельности. Единичный не изолирован, но его отношение к другим опосредовано абсолютным отношением к Богу. 'Толпа есть неправда.'"
            },
            { 
                id: "subjective_truth", 
                label: "Субъективная истина", 
                philosopher: "kierkegaard", 
                rubrics: ["knowledge"], 
                description: "Истина как страсть",
                extendedDescription: "Истина - не объективное знание, а субъективная страсть, способ существования. Важно не 'что' верится, а 'как' - интенсивность внутреннего отношения. Можно верить в истину неистинно (объективно, спокойно) и в неправду истинно (с абсолютной страстью). 'Субъективность есть истина' - истина существует только в присвоении экзистирующим субъектом. Объективная неопределенность, удерживаемая в страстном внутреннем отношении, - высшая истина для существующего."
            },
            { 
                id: "repetition", 
                label: "Повторение", 
                philosopher: "kierkegaard", 
                rubrics: ["time"], 
                description: "Экзистенциальное возвращение, обретение себя",
                extendedDescription: "Не платоновское воспоминание (движение назад), а движение вперед - возвращение себя нового из испытания. Повторение - обретение самости через проживание, не простое возвращение того же, а возобновление в вечности. Это категория будущего, в отличие от воспоминания (прошлое). Подлинное повторение возможно только через веру - Иов получает всё обратно удвоенным. Повторение - интерес метафизики и одновременно conditio sine qua non всякой этической жизни."
            },
            { 
                id: "moment", 
                label: "Мгновение", 
                philosopher: "kierkegaard", 
                rubrics: ["time"], 
                description: "Atom вечности, встреча времени и вечного",
                extendedDescription: "Øjeblik - миг, в котором вечное касается времени, парадоксальная точка встречи несоизмеримого. Не математическая точка времени, а качественный атом - полнота времени. В мгновении совершается решение, прыжок веры, происходит событие откровения. Это временная категория и одновременно вечности - вечное входит во время, не становясь временным. Воплощение - абсолютный парадокс мгновения: вечное стало историческим фактом."
            },
            
            // МАРКС
            { 
                id: "praxis", 
                label: "Праксис", 
                philosopher: "marx", 
                rubrics: ["politics"], 
                description: "Революционная практика",
                extendedDescription: "Не созерцательное познание, а преобразующая деятельность - единство теории и практики, направленное на изменение мира. Человек познает мир, изменяя его трудом; истина доказывается практикой. Праксис не просто применение теории, а творческая деятельность, создающая новую реальность. Революционная практика пролетариата - высшая форма праксиса, преобразующая не только природу, но и общественные отношения. 'Философы лишь различным образом объясняли мир, но дело заключается в том, чтобы изменить его.'"
            },
            { 
                id: "alienation", 
                label: "Отчуждение", 
                philosopher: "marx", 
                rubrics: ["politics"], 
                description: "Отчуждение труда",
                extendedDescription: "В капиталистическом обществе рабочий отчужден от продукта труда (принадлежит капиталисту), от процесса труда (не контролирует условия), от родовой сущности (труд не самореализация, а средство выживания), от других людей (конкуренция, классовый антагонизм). Отчуждение превращает человеческую сущность в средство индивидуального существования. Рабочий чувствует себя человеком только вне труда. Преодоление отчуждения - через революцию и коммунизм."
            },
            { 
                id: "base_superstructure", 
                label: "Базис и надстройка", 
                philosopher: "marx", 
                rubrics: ["politics"], 
                description: "Экономика и идеология",
                extendedDescription: "Общество структурировано на экономический базис (производительные силы и производственные отношения) и идеологическую надстройку (право, политика, религия, философия, искусство). Базис определяет надстройку - материальные условия производства обусловливают духовную жизнь. Но надстройка обладает относительной автономией и может воздействовать на базис. Революция происходит, когда производительные силы приходят в противоречие с производственными отношениями."
            },
            { 
                id: "class_struggle", 
                label: "Классовая борьба", 
                philosopher: "marx", 
                rubrics: ["politics"], 
                description: "Двигатель истории",
                extendedDescription: "'История всех до сих пор существовавших обществ была историей борьбы классов' - антагонизм между эксплуататорами и эксплуатируемыми движет историческое развитие. В капиталистическом обществе основное противоречие - между буржуазией (владельцами средств производства) и пролетариатом (продающим рабочую силу). Классовая борьба обостряется, ведя к революции и установлению диктатуры пролетариата, а затем к бесклассовому коммунистическому обществу."
            },
            { 
                id: "commodity_fetish", 
                label: "Товарный фетишизм", 
                philosopher: "marx", 
                rubrics: ["politics"], 
                description: "Овеществление социальных отношений",
                extendedDescription: "При капитализме социальные отношения между людьми принимают форму отношений между вещами (товарами). Стоимость кажется естественным свойством товара, хотя на деле выражает общественные отношения производителей. Товар становится фетишем - вещью, наделенной сверхъестественной властью. Это объективная видимость, необходимо порождаемая товарным производством. Разоблачение фетишизма - критика иллюзий буржуазной экономии."
            },
            { 
                id: "historical_materialism", 
                label: "Исторический материализм", 
                philosopher: "marx", 
                rubrics: ["politics"], 
                description: "Материалистическое понимание истории",
                extendedDescription: "Не сознание определяет бытие, а бытие определяет сознание - материальные условия жизни, способ производства обусловливают формы сознания. История развивается через смену способов производства (первобытный, рабовладельческий, феодальный, капиталистический, коммунистический) в соответствии с развитием производительных сил. Не идеи движут историю, а материальные противоречия. Это наука об общих законах развития общества."
            },
            { 
                id: "ideology", 
                label: "Идеология", 
                philosopher: "marx", 
                rubrics: ["politics", "knowledge"], 
                description: "Ложное сознание, маскирующее классовые интересы",
                extendedDescription: "Превращенная форма сознания, которая представляет частные интересы господствующего класса как всеобщие, скрывает реальные противоречия и оправдывает существующий порядок. Идеология не просто ложь, а необходимая иллюзия, порождаемая материальными условиями. Господствующие идеи каждой эпохи - идеи господствующего класса. Критика идеологии разоблачает её классовую природу, показывая связь идей с материальными интересами. Пролетариат создает истинное, не-идеологическое сознание."
            },
            
            // НИЦШЕ
            { 
                id: "will_power", 
                label: "Воля к власти", 
                philosopher: "nietzsche", 
                rubrics: ["will"], 
                description: "Фундаментальная жизненная сила",
                extendedDescription: "Не политическое господство, а основной импульс всего живого - стремление к росту, расширению, преодолению сопротивления, утверждению своей силы. Жизнь есть воля к власти; всё остальное - производное. Не сохранение жизни (Шопенгауэр, Дарвин), а её усиление и возвышение. Воля к власти - принцип интерпретации всей реальности, как органической, так и неорганической. Истина, мораль, искусство - различные проявления воли к власти."
            },
            { 
                id: "ubermensch", 
                label: "Сверхчеловек", 
                philosopher: "nietzsche", 
                rubrics: ["ethics"], 
                description: "Преодолевший себя человек",
                extendedDescription: "Не биологический тип, а духовный идеал - человек, преодолевший нигилизм и создавший новые ценности на обломках старых. После смерти Бога сверхчеловек сам становится источником ценностей, утверждая жизнь во всей её полноте, включая страдание. Он говорит 'да' существованию, принимает вечное возвращение. Не господин над другими, а господин над собой. Дитя в метаморфозах духа - невинное творчество, игра, самопреодоление."
            },
            { 
                id: "eternal_return", 
                label: "Вечное возвращение", 
                philosopher: "nietzsche", 
                rubrics: ["time"], 
                description: "Циклическое повторение бытия",
                extendedDescription: "Космологическая гипотеза и экзистенциальный императив: всё, что происходит, будет повторяться бесконечное число раз в точности. Это испытание: можешь ли ты желать вечного возвращения каждого мгновения своей жизни? Утверждение вечного возвращения - высший акт любви к судьбе (amor fati), принятие жизни целиком. Только сверхчеловек способен выдержать эту мысль и превратить её в радость. Вечное возвращение - альтернатива христианской линейной эсхатологии."
            },
            { 
                id: "god_dead", 
                label: "Смерть Бога", 
                philosopher: "nietzsche", 
                rubrics: ["absolute"], 
                description: "Конец метафизических абсолютов",
                extendedDescription: "'Бог мертв' - диагноз культурного события: крах веры в сверхчувственный мир ценностей (христианский Бог, платоновские идеи, моральный миропорядок). Не атеистический тезис, а констатация нигилизма - обесценивания высших ценностей. 'Мы убили его' - европейская рациональность подорвала собственные основания. Это величайшее событие открывает бездну: либо пассивный нигилизм (всё бессмысленно), либо активный - создание новых ценностей сверхчеловеком."
            },
            { 
                id: "perspectivism", 
                label: "Перспективизм", 
                philosopher: "nietzsche", 
                rubrics: ["knowledge"], 
                description: "Множественность интерпретаций",
                extendedDescription: "Нет фактов, только интерпретации; всякое познание перспективно, обусловлено интересами и оценками познающего. Не существует 'вида из ниоткуда', абсолютной истины - всякая истина истинна для определенной перспективы. Но это не релятивизм: перспективы различаются по степени жизнеутверждения, по силе воли к власти, их порождающей. Чем больше перспектив, тем полнее познание. Объективность - умножение перспектив, а не их упразднение."
            },
            { 
                id: "master_morality", 
                label: "Мораль господ", 
                philosopher: "nietzsche", 
                rubrics: ["ethics"], 
                description: "Аристократическая этика",
                extendedDescription: "Исходная, благородная мораль: хорошее = благородное, сильное, прекрасное, утверждающее жизнь; плохое = низкое, слабое, презренное. Оценка исходит из полноты жизни, из избытка силы. Благородный человек творит ценности из себя, его мораль - самоутверждение. Не ресентимент, а патос дистанции. Добродетели: храбрость, щедрость, честь, гордость. Это утверждающая мораль - она говорит 'да' жизни, себе, своей судьбе."
            },
            { 
                id: "slave_morality", 
                label: "Мораль рабов", 
                philosopher: "nietzsche", 
                rubrics: ["ethics"], 
                description: "Ресентимент слабых",
                extendedDescription: "Реактивная мораль бессильных, возникшая из ресентимента к сильным. Начинается с 'нет' всему внешнему, господствующему; добро определяется через отрицание зла. Злое = сильное, господствующее; доброе = слабое, страдающее, смиренное. Это мораль полезности слабых: сострадание, самоотречение, покорность объявляются добродетелями. Христианство - высшее выражение рабской морали, восстание рабов в морали. Она отрицает жизнь, утверждает потустороннее."
            },
            { 
                id: "dionysian", 
                label: "Дионисийское", 
                philosopher: "nietzsche", 
                rubrics: ["will"], 
                description: "Хаос, опьянение, жизненная стихия",
                extendedDescription: "Принцип опьянения, экстаза, разрушения индивидуации - растворение в первоединстве бытия. Дионисийское искусство (музыка) выражает хаос жизни, страдание, противоречие. Не порядок, а становление; не форма, а безграничная энергия. Дионисийское - утверждение жизни даже в её ужасе и абсурде. Это воля к трагическому, способность выносить страдание без утешения. Дионис - бог страдающий и воскресающий, символ вечного становления."
            },
            { 
                id: "apollonian", 
                label: "Аполлоническое", 
                philosopher: "nietzsche", 
                rubrics: ["will"], 
                description: "Порядок, мера, индивидуация",
                extendedDescription: "Принцип сновидения, формы, красоты - созерцание индивидуализированных образов, мир как прекрасная видимость. Аполлоническое искусство (скульптура, эпос) создает иллюзию завершенности, скрывая ужас существования. Principium individuationis, гармония, мера. Аполлон - бог света, делающий жизнь возможной через иллюзию. Но чисто аполлоническое бесплодно - нужен синтез с дионисийским. Трагедия - союз Аполлона и Диониса."
            },
            { 
                id: "ressentiment", 
                label: "Ресентимент", 
                philosopher: "nietzsche", 
                rubrics: ["ethics"], 
                description: "Злоба бессильных, основа морали рабов",
                extendedDescription: "Месть бессильных, отравленное воспоминание о перенесенных унижениях, вытесненная злоба, которая не может разрядиться в действии и обращается в моральное осуждение. Раб не может прямо атаковать господина, поэтому объявляет его силу злом, а свою слабость - добродетелью. Ресентимент творит ценности негативно - через отрицание чужого, а не утверждение своего. Христианская мораль вырастает из ресентимента священников и слабых к жизни, силе, красоте."
            },

            // ГОТЛОБ ФРЕГЕ
            { 
                id: "sense_reference", 
                label: "Смысл и значение", 
                philosopher: "frege", 
                rubrics: ["language"], 
                description: "Sinn und Bedeutung",
                extendedDescription: "Фундаментальное различение Фреге между смыслом (Sinn) и значением (Bedeutung) выражения. Значение - это объект, к которому отсылает выражение (для имени - денотат, для предложения - истинностное значение). Смысл - способ представления этого объекта, когнитивное содержание, которое понимает говорящий. 'Утренняя звезда' и 'вечерняя звезда' имеют одно значение (планета Венера), но разные смыслы. Это различение решает проблему информативности тождественных утверждений и закладывает основу аналитической философии языка. Смысл объективен, не тождествен психическому представлению."
            },
            { 
                id: "function_argument", 
                label: "Функция и аргумент", 
                philosopher: "frege", 
                rubrics: ["language"], 
                description: "Логическая структура языка",
                extendedDescription: "Фреге анализирует логическую структуру предложений по аналогии с математическими функциями. Предложение состоит из ненасыщенной функции и насыщающих её аргументов. Например, '2+3=5' включает функцию '...+3=5' и аргумент '2'. Эта модель применяется и к естественному языку: в 'Сократ мудр' предикат '...мудр' - функция, 'Сократ' - аргумент. Функции могут быть разных уровней (функции от функций). Такой анализ выявляет глубинную логическую форму, скрытую за грамматической поверхностью. Это революция в понимании языка и основа современной логики."
            },
            { 
                id: "logicism", 
                label: "Логицизм", 
                philosopher: "frege", 
                rubrics: ["knowledge"], 
                description: "Математика сводима к логике",
                extendedDescription: "Логицистская программа Фреге: обосновать всю математику, начиная с арифметики, на чисто логических основаниях, без обращения к интуиции. Числа определяются через логические понятия (класс всех равномощных классов), аксиомы арифметики выводятся из логических законов. Это означает, что математические истины аналитичны (в расширенном смысле) и априорны. Хотя программа столкнулась с парадоксами (парадокс Рассела), она оказала огромное влияние на философию математики. Логицизм подчёркивает объективность математики и её независимость от психологии и эмпирического опыта."
            },
            { 
                id: "context_principle", 
                label: "Контекстный принцип", 
                philosopher: "frege", 
                rubrics: ["language"], 
                description: "Значение слова в контексте предложения",
                extendedDescription: "Принцип контекстуальности Фреге: 'Только в контексте предложения слова имеют значение' (Nur im Zusammenhang eines Satzes bedeuten die Wörter etwas). Значение отдельного слова определяется его вкладом в значение предложений, в которых оно употребляется. Это антипсихологический тезис: не нужно искать ментальные образы, соответствующие словам, достаточно понять, как слово функционирует в предложениях. Принцип направлен против атомистической семантики, начинающей со значений отдельных слов. Он предвосхищает холистические теории значения и влияет на Витгенштейна."
            },
            { 
                id: "begriffsschrift", 
                label: "Понятийное письмо", 
                philosopher: "frege", 
                rubrics: ["language"], 
                description: "Формальный язык логики",
                extendedDescription: "'Понятийное письмо' (Begriffsschrift, 1879) - изобретённый Фреге формальный язык для точного выражения логических отношений. Это первая современная система логики, включающая кванторы, функции, переменные. Begriffsschrift подобен формуле в химии - он выражает чистое содержание, освобождённое от случайностей естественного языка. Цель - избежать двусмысленностей и сделать логический вывод механически проверяемым. Нотация Фреге (двумерная) не прижилась, но его идеи легли в основу современной логики. Это язык 'чистого мышления', свободный от психологизма."
            },
            { 
                id: "thought", 
                label: "Мысль", 
                philosopher: "frege", 
                rubrics: ["consciousness"], 
                description: "Объективное содержание мышления",
                extendedDescription: "Мысль (Gedanke) у Фреге - объективное, независимое от субъекта содержание, которое может быть схвачено разными мыслящими существами. Это смысл повествовательного предложения, то, что истинно или ложно. Мысли не психические образования и не физические объекты, а обитают в 'третьем царстве' - объективном, но не материальном. Мы не создаём, а постигаем мысли. Истинность мысли не зависит от того, признаём мы её или нет. Эта концепция - радикальный антипсихологизм и платонизм в отношении логического содержания. Мысли вечны и неизменны."
            },

            // ДЖОН ДЬЮИ
            { 
                id: "instrumentalism", 
                label: "Инструментализм", 
                philosopher: "dewey", 
                rubrics: ["knowledge"], 
                description: "Идеи как инструменты действия",
                extendedDescription: "Инструментализм Дьюи - версия прагматизма, согласно которой идеи, понятия и теории суть инструменты для решения проблем и достижения целей, а не отражения независимой реальности. Истинность идеи определяется её работоспособностью, способностью успешно направлять действие. Познание инструментально по своей природе - оно возникает из проблемной ситуации и направлено на её преобразование. Теории подобны инструментам: их ценность в применении, а не в соответствии некой абсолютной истине. Инструментализм отвергает созерцательную теорию познания."
            },
            { 
                id: "inquiry", 
                label: "Исследование", 
                philosopher: "dewey", 
                rubrics: ["method"], 
                description: "Inquiry - процесс решения проблем",
                extendedDescription: "Исследование (inquiry) у Дьюи - это целенаправленный процесс преобразования неопределённой, проблематичной ситуации в определённую, решённую. Это не просто приобретение знания, а активная реорганизация опыта. Исследование включает этапы: возникновение проблемы, её определение, выдвижение гипотез, рассуждение, экспериментальная проверка. Истинное знание - результат успешного исследования, warranted assertibility. Дьюи применяет эту модель ко всем формам познания - от обыденного до научного. Исследование - это естественный способ взаимодействия организма со средой."
            },
            { 
                id: "experience_dewey", 
                label: "Опыт", 
                philosopher: "dewey", 
                rubrics: ["knowledge"], 
                description: "Непрерывное взаимодействие с миром",
                extendedDescription: "Опыт для Дьюи - не пассивное восприятие или субъективные состояния сознания, а активное взаимодействие организма с окружающей средой. Опыт включает и действие, и претерпевание его последствий. Он непрерывен, каждый опыт влияет на последующие. Опыт не противостоит природе - он в ней и из неё. Дьюи преодолевает традиционные дуализмы субъекта/объекта, теории/практики, средства/цели, помещая их в контекст живого опыта. Опыт имеет как сознательную, так и бессознательную, как индивидуальную, так и социальную составляющие."
            },
            { 
                id: "democracy_education", 
                label: "Демократия и образование", 
                philosopher: "dewey", 
                rubrics: ["politics"], 
                description: "Образование как основа демократии",
                extendedDescription: "Для Дьюи демократия - это не просто форма правления, а образ жизни, основанный на свободном общении и сотрудничестве. Образование - необходимое условие демократии, оно формирует способность к совместному исследованию и решению проблем. Школа должна быть микрокосмом демократического общества, где дети учатся сотрудничеству, критическому мышлению, решению проблем. Цель образования - не передача готовых знаний, а развитие способности к growth, росту и адаптации. Демократическое образование личностно-ориентированно, опытно-экспериментально и социально ответственно."
            },
            { 
                id: "learning_doing", 
                label: "Обучение через действие", 
                philosopher: "dewey", 
                rubrics: ["method"], 
                description: "Learning by doing",
                extendedDescription: "Принцип 'обучение через делание' (learning by doing) - центральный в педагогике Дьюи. Истинное обучение происходит не через заучивание абстрактных истин, а через активное участие в осмысленной деятельности. Знание возникает из действия и для действия. Ребёнок должен не пассивно воспринимать информацию, а сам ставить проблемы, выдвигать гипотезы, экспериментировать. Практическая деятельность - не приложение к теории, а её источник. Этот принцип отражает инструменталистское понимание знания и критику традиционной школы с её вербализмом и оторванностью от жизни."
            },
            { 
                id: "warranted_assertibility", 
                label: "Обоснованная утверждаемость", 
                philosopher: "dewey", 
                rubrics: ["knowledge"], 
                description: "Прагматическая концепция истины",
                extendedDescription: "Дьюи заменяет традиционное понятие истины как соответствия реальности на 'обоснованную утверждаемость' (warranted assertibility). Утверждение обосновано, если оно успешно завершает процесс исследования, решает проблему, делает ситуацию определённой. Это не субъективная уверенность, а объективный результат применения научного метода. Обоснование всегда контекстуально и открыто для пересмотра. Дьюи избегает термина 'истина' из-за его метафизических коннотаций (вечность, абсолютность, независимость от познания). Warranted assertibility - это истина как процесс, а не состояние."
            },
            
            // АНРИ БЕРГСОН
            { 
                id: "duree", 
                label: "Длительность", 
                philosopher: "bergson", 
                rubrics: ["time"], 
                description: "Качественное, непрерывное время",
                extendedDescription: "Длительность (durée) - подлинное, качественное время внутреннего опыта, противопоставленное пространственному, количественному времени науки и здравого смысла. Это непрерывный поток сознания, где прошлое пронизывает настоящее, а моменты взаимопроникают друг в друга. Длительность не измерима часами - она переживается изнутри как творческое становление, где каждое мгновение ново и неповторимо. В отличие от механистического времени физики (последовательность дискретных моментов), длительность - органическая целостность, где ничто не повторяется точно. Бергсон различает длительность реальную (la durée réelle) и время науки как её пространственную проекцию."
            },
            { 
                id: "elan_vital", 
                label: "Жизненный порыв", 
                philosopher: "bergson", 
                rubrics: ["being", "will"], 
                description: "Творческая эволюционная сила жизни",
                extendedDescription: "Жизненный порыв (élan vital) - исходная творческая сила, движущая эволюцией и создающая всё новые формы жизни. Это не механическая причина и не телеологическая цель, а свободный импульс творчества, пробивающийся через сопротивление материи. Élan vital объясняет, почему эволюция не сводима к механическим законам: она содержит элемент непредсказуемой новизны. Жизненный порыв раздваивается, создавая различные эволюционные линии (растения, инстинкт у насекомых, интеллект у человека), но везде сохраняет свою творческую природу. Это не витализм в духе особой 'жизненной силы', а метафизический принцип творческого становления."
            },
            { 
                id: "intuition_bergson", 
                label: "Интуиция", 
                philosopher: "bergson", 
                rubrics: ["knowledge", "method"], 
                description: "Непосредственное постижение длительности",
                extendedDescription: "Интуиция у Бергсона - способ познания, позволяющий схватить реальность изнутри, в её становлении и длительности. В отличие от интеллекта, который расчленяет, пространственно оформляет и останавливает движение, интуиция симпатически проникает в сердцевину вещей, постигая их временную природу. Это не мистическое озарение и не иррациональная догадка, а строгий философский метод, требующий усилия и дисциплины. Интуиция - 'инстинкт, ставший бескорыстным, осознавшим себя'. Она способна постичь жизнь в её творческом порыве, в то время как интеллект создан эволюцией для практического действия и работает с неподвижными формами."
            },
            { 
                id: "intellect_spatialization", 
                label: "Интеллект и пространственность", 
                philosopher: "bergson", 
                rubrics: ["knowledge"], 
                description: "Интеллект как инструмент пространственного освоения мира",
                extendedDescription: "Интеллект - эволюционно возникшая способность, предназначенная для практического действия с твёрдыми телами. Он естественным образом мыслит в терминах пространства, дискретности, неподвижности и тождества. Интеллект создан для конструирования орудий и манипулирования материей, поэтому он расчленяет непрерывное, останавливает движение, сводит качество к количеству. Наука и техника - триумф интеллекта, но он систематически искажает реальность длительности, подменяя её пространственными схемами. Интеллект не способен постичь жизнь и творческое становление - для этого нужна интуиция. Однако интеллект не ошибается - он просто имеет ограниченную сферу применения."
            },
            { 
                id: "creative_evolution", 
                label: "Творческая эволюция", 
                philosopher: "bergson", 
                rubrics: ["being", "time"], 
                description: "Эволюция как непредсказуемое творчество",
                extendedDescription: "Творческая эволюция - концепция, противопоставленная и механицизму, и финализму. Эволюция не определяется ни механическими причинами (дарвинизм), ни заранее данной целью (телеология). Она творческий процесс, создающий радикально новое, непредсказуемое из настоящего. Жизнь не реализует программу, а изобретает себя в каждый момент. Раздвоение жизненного порыва на растительную и животную линии, затем на инстинкт и интеллект - не предустановлено, а результат свободного творчества. Эволюция - не адаптация к среде, а прорыв творческой силы через сопротивление материи. Бергсон создаёт третий путь между механистическим дарвинизмом и витализмом."
            },
            { 
                id: "matter_memory", 
                label: "Материя и память", 
                philosopher: "bergson", 
                rubrics: ["consciousness", "matter"], 
                description: "Дуализм материи и памяти, восприятия и воспоминания",
                extendedDescription: "Материя и память образуют два полюса реальности: материя - чистое настоящее, непрерывно исчезающее; память - сохранение всего прошлого. Восприятие - это действие, направленное на материю в интересах действия; чистое воспоминание - бездейственное сохранение прошлого в духе. Мозг не хранит образы, а выбирает полезные воспоминания для действия. Память не психологическая способность, а онтологическое измерение - прошлое реально существует, не переставая быть прошлым. Различие материи и памяти - не различие двух субстанций, а различие двух движений: движения к расширению (материя, пространство) и движения к сжатию (память, длительность). Сознание - на пересечении этих движений."
            },
            { 
                id: "pure_perception", 
                label: "Чистое восприятие", 
                philosopher: "bergson", 
                rubrics: ["consciousness"], 
                description: "Восприятие как действие, а не представление",
                extendedDescription: "Чистое восприятие - теоретический предел, восприятие без примеси памяти, совпадающее с самим объектом. В реальности такого восприятия нет - всякое актуальное восприятие пронизано воспоминаниями. Но концепция чистого восприятия показывает, что восприятие - не созерцательное представление, а виртуальное действие организма на вещи. Мы воспринимаем вещи там, где они есть, в них самих, а не в мозгу как образы. Восприятие измеряет нашу возможную власть над вещами - мы воспринимаем то, на что можем действовать. Чистое восприятие мгновенно и совпадает с настоящим материи. Память присоединяется к восприятию, обогащая его, но и искажая в интересах действия."
            },
            { 
                id: "open_closed_morality", 
                label: "Открытая и закрытая мораль", 
                philosopher: "bergson", 
                rubrics: ["ethics", "politics"], 
                description: "Два источника морали: социальное давление и мистический призыв",
                extendedDescription: "Закрытая мораль - мораль социального давления, обычаев, долга, направленная на сохранение замкнутого общества (племени, нации). Она статична, основана на привычке и подчинении коллективу. Открытая мораль - мораль свободы и любви, исходящая от великих мистиков и пророков, обращённая ко всему человечеству. Она динамична, творческа, зовёт к превосхождению себя. Закрытая мораль - продукт эволюции, инстинкт, преобразованный интеллектом. Открытая мораль - прорыв жизненного порыва, мистическая интуиция. История человечества - движение от закрытых обществ к открытому человечеству через усилие героев и святых. Но это движение не автоматично, требует творческого усилия."
            },
            { 
                id: "image_bergson", 
                label: "Образ", 
                philosopher: "bergson", 
                rubrics: ["being", "consciousness"], 
                description: "Реальность как совокупность образов между вещью и представлением",
                extendedDescription: "Образ у Бергсона - первичная реальность, предшествующая разделению на материю и сознание, вещь и представление. Образы - это не ментальные сущности в голове и не физические вещи вне нас, а сама реальность в её явленности. Весь универсум - система взаимодействующих образов. Моё тело - привилегированный образ, центр действия, через который другие образы затрагивают меня. Различие между восприятием и материей - не различие между внутренним и внешним, а различие в степени: восприятие - это отбор из тотальности образов тех, которые интересны для действия. Концепция образа преодолевает традиционные дуализмы идеализма и реализма."
            },
            { 
                id: "laughter", 
                label: "Смех", 
                philosopher: "bergson", 
                rubrics: ["ethics"], 
                description: "Социальная функция комического как наказание механического",
                extendedDescription: "Смех - социальный жест, направленный на подавление механического, косного, автоматического в человеческом поведении. Комично всё, что напоминает механизм в живом: повторение, автоматизм, рассеянность, косность характера. Мы смеёмся, когда человек похож на вещь, когда живое подражает неодушевлённому. Смех - коррекция общества, жест предупреждения против всего, что отклоняется от гибкости, подвижности, внимания к жизни. Он требует временной анестезии сердца - мы не смеёмся над тем, к кому питаем симпатию. Смех всегда социален, даже наедине - мы смеёмся для воображаемого общества. Комизм ситуаций сводится к комизму характеров, а комизм характеров - к механическому в живом."
            },

            // ГУССЕРЛЬ
            { 
                id: "intentionality", 
                label: "Интенциональность", 
                philosopher: "husserl", 
                rubrics: ["consciousness"], 
                description: "Направленность сознания",
                extendedDescription: "Фундаментальное свойство сознания - всякое сознание есть сознание о чем-то, направленность на предмет. Нет 'чистого' сознания без предмета, как нет предмета без сознания о нём. Интенциональность конституирует единство сознания и мира, преодолевая дуализм. Различные интенциональные акты (восприятие, воображение, суждение) по-разному конституируют свои предметы. Это не психологический факт, а априорная сущностная структура сознания."
            },
            { 
                id: "epoché", 
                label: "Эпохе", 
                philosopher: "husserl", 
                rubrics: ["method"], 
                description: "Феноменологическая редукция",
                extendedDescription: "Методическое воздержание от суждения, заключение в скобки 'естественной установки' - наивной веры в существование мира. Не отрицание реальности, а приостановка тезиса существования, чтобы исследовать чистые феномены, как они даны сознанию. Эпохе ведет к трансцендентальной субъективности - чистому сознанию, конституирующему смысл мира. Это радикальное начинание, превращающее философию в строгую науку о сущностях явлений сознанию."
            },
            { 
                id: "lifeworld", 
                label: "Жизненный мир", 
                philosopher: "husserl", 
                rubrics: ["being"], 
                description: "Дорефлективный опыт",
                extendedDescription: "Lebenswelt - горизонт всякого опыта, мир как он непосредственно переживается до всякой науки и теории. Фундамент, на котором строятся научные идеализации, но который наука забывает. Жизненный мир интерсубъективен, исторически-культурно обусловлен, дан в непосредственной очевидности. Кризис науки - в утрате связи с жизненным миром. Феноменология должна вернуться к нему, раскрыть его конститутивные структуры."
            },
            { 
                id: "transcendental_ego", 
                label: "Трансцендентальное Я", 
                philosopher: "husserl", 
                rubrics: ["consciousness"], 
                description: "Чистое сознание",
                extendedDescription: "Абсолютная субъективность, открывающаяся после эпохе - полюс всех интенциональных актов, конституирующий смысл мира. Не эмпирическое психологическое 'я', а трансцендентальное условие возможности опыта. Оно не объект в мире, а источник всякой объективности. Ego cogito как абсолютное бытие, для которого мир - интенциональный коррелят. Это картезианское открытие, очищенное от субстанциализма и психологизма."
            },
            { 
                id: "eidetic", 
                label: "Эйдетическая интуиция", 
                philosopher: "husserl", 
                rubrics: ["knowledge"], 
                description: "Усмотрение сущностей",
                extendedDescription: "Wesenschau - непосредственное созерцание инвариантных сущностей (эйдосов) в противоположность эмпирическому познанию фактов. Через вариацию в воображении единичного примера схватывается то, что остается необходимо идентичным - сущность. Это априорное познание, дающее аподиктическую очевидность. Феноменология - эйдетическая наука, исследующая сущностные структуры сознания и его корреляты. Усмотрение сущностей - интеллектуальная интуиция, доступная каждому."
            },
            { 
                id: "noesis_noema", 
                label: "Ноэзис-ноэма", 
                philosopher: "husserl", 
                rubrics: ["consciousness"], 
                description: "Акт сознания и его предметное содержание",
                extendedDescription: "Фундаментальная корреляция в структуре интенциональности: ноэзис - субъективный акт сознания (восприятие, воображение, суждение); ноэма - предметное содержание, смысл, данный в этом акте. Один предмет может быть дан в разных ноэматических модусах. Ноэма - не реальный объект, а смысл, в котором сознание относится к объекту. Эта пара заменяет традиционный дуализм субъект-объект феноменологической корреляцией."
            },
            { 
                id: "constitution", 
                label: "Конституирование", 
                philosopher: "husserl", 
                rubrics: ["consciousness"], 
                description: "Созидание смысла сознанием",
                extendedDescription: "Не творение объектов ex nihilo, а конституирование их смысла в интенциональных актах. Сознание не пассивно отражает готовый мир, а активно синтезирует смысловые единства. Предмет конституируется в многообразии явлений через синтез идентификации. Это не субъективный идеализм - конституирование раскрывает, как объективность возможна для субъективности. Исследование конституции - центральная задача трансцендентальной феноменологии."
            },
            { 
                id: "intersubjectivity", 
                label: "Интерсубъективность", 
                philosopher: "husserl", 
                rubrics: ["consciousness"], 
                description: "Общность опыта субъектов",
                extendedDescription: "Проблема: как трансцендентальное ego, для которого всё - коррелят сознания, конституирует других субъектов как равноправных? Через аппрезентацию - непрямое представление чужого опыта по аналогии с моим. Я воспринимаю тело другого и апперципирую в нём чужое сознание. Интерсубъективность - основа объективного мира, общего для многих субъектов. Солипсизм преодолевается феноменологическим анализом конституирования Другого."
            },

            // БЕРТРАН РАССЕЛ
            { 
                id: "logical_atomism", 
                label: "Логический атомизм", 
                philosopher: "russell", 
                rubrics: ["being", "language"], 
                description: "Мир состоит из атомарных фактов",
                extendedDescription: "Логический атомизм Рассела: мир состоит из логически независимых атомарных фактов, а язык - из атомарных предложений, соответствующих этим фактам. Атомарные факты - простейшие факты, не разложимые на более простые (например, 'это красное'). Сложные предложения строятся из атомарных с помощью логических связок. Логический анализ должен свести сложные выражения к атомарным. Эта программа соединяет эмпиризм (атомарные факты познаются в опыте) с логическим анализом. Влияние на ранний Витгенштейн огромно. Позднее Рассел признал упрощённость этой картины."
            },
            { 
                id: "theory_descriptions", 
                label: "Теория дескрипций", 
                philosopher: "russell", 
                rubrics: ["language"], 
                description: "Анализ определённых описаний",
                extendedDescription: "Теория определённых описаний (1905) - анализ выражений вида 'нынешний король Франции'. Рассел показывает, что грамматическая форма обманчива: определённая дескрипция не является именем и не обязана иметь референт. 'Нынешний король Франции лыс' анализируется как: 'Существует один и только один нынешний король Франции, и он лыс'. Это сложное экзистенциальное утверждение, которое просто ложно, а не бессмысленно. Теория решает проблему несуществующих объектов без введения субсистентных сущностей Мейнонга. Парадигма логического анализа языка."
            },
            { 
                id: "russell_paradox", 
                label: "Парадокс Рассела", 
                philosopher: "russell", 
                rubrics: ["knowledge"], 
                description: "Множество всех множеств",
                extendedDescription: "Парадокс Рассела (1901): рассмотрим множество R всех множеств, не содержащих себя в качестве элемента. Принадлежит ли R само себе? Если да, то по определению оно не должно себе принадлежать. Если нет, то оно должно себе принадлежать. Противоречие. Этот парадокс разрушил наивную теорию множеств Фреге и показал необходимость ограничений в образовании множеств. Рассел предложил теорию типов как решение. Парадокс демонстрирует, что не всякое условие определяет множество, и что самореференция опасна. Фундаментальная проблема оснований математики."
            },
            { 
                id: "acquaintance_description", 
                label: "Знание-знакомство", 
                philosopher: "russell", 
                rubrics: ["knowledge"], 
                description: "Прямое знание vs знание по описанию",
                extendedDescription: "Различение между знанием-знакомством (knowledge by acquaintance) и знанием по описанию (knowledge by description). Знание-знакомство - непосредственное, прямое знание объекта через опыт: мы знакомы с чувственными данными, универсалиями, возможно, с самим собой. Знание по описанию - опосредованное, через дескрипции: мы знаем нынешнего президента США по описанию, не будучи с ним знакомы. Вся наша осмысленная речь об объектах, с которыми мы не знакомы, должна быть проанализирована в терминах знакомства и дескрипций. Это эмпиристский фундаментализм."
            },
            { 
                id: "sense_data", 
                label: "Чувственные данные", 
                philosopher: "russell", 
                rubrics: ["knowledge"], 
                description: "Непосредственные объекты восприятия",
                extendedDescription: "Чувственные данные (sense-data) - непосредственные объекты восприятия: цвета, звуки, запахи, которые мы действительно воспринимаем. Это не физические объекты и не части мозга, а особые сущности. Мы знакомы с чувственными данными, но не с физическими объектами, которые мы познаём только по описанию как причины чувственных данных. Теория чувственных данных - попытка решить проблему восприятия и обосновать эмпиризм. Позднее Рассел и другие философы критиковали эту теорию за введение сомнительных сущностей."
            },
            { 
                id: "external_world", 
                label: "Внешний мир", 
                philosopher: "russell", 
                rubrics: ["being"], 
                description: "Проблема существования внешнего мира",
                extendedDescription: "Проблема внешнего мира для Рассела: как на основании знания чувственных данных обосновать существование независимых от сознания физических объектов? Рассел предлагает гипотезу, что физические объекты - логические конструкции из чувственных данных и возможных чувственных данных (sensibilia). Это попытка примирить эмпиризм с реализмом. Физические объекты не познаются напрямую, но постулируются как наилучшее объяснение упорядоченности опыта. Позднее Рассел склоняется к более реалистическим позициям, признавая непосредственное знание физических объектов."
            },
            
            // ХАЙДЕГГЕР
            { 
                id: "dasein", 
                label: "Dasein", 
                philosopher: "heidegger", 
                rubrics: ["being"], 
                description: "Человеческое бытие-в-мире",
                extendedDescription: "Не 'человек' как субстанция, а способ быть, экзистенция - присутствие (Da-sein), для которого в его бытии речь идет о самом этом бытии. Dasein всегда уже вброшено в мир, озабочено вещами и другими. Не изолированный субъект, а бытие-в-мире как целостная структура. Dasein онтологически отличается от сущего тем, что понимает бытие. Аналитика Dasein - путь к вопросу о смысле бытия вообще."
            },
            { 
                id: "sein", 
                label: "Sein", 
                philosopher: "heidegger", 
                rubrics: ["being"], 
                description: "Бытие как таковое",
                extendedDescription: "Не сущее (конкретная вещь), а само Бытие - то, благодаря чему сущее есть. Бытие забыто метафизикой, подменено сущим. Различие Бытия и сущего (онтологическая дифференция) - основа мышления. Бытие не предмет, не субстанция, не Бог - оно событие, просвет, в котором сущее обнаруживается. Вопрос о смысле Бытия - забытый вопрос, который нужно поставить заново. Бытие дается только в понимании Dasein."
            },
            { 
                id: "geworfenheit", 
                label: "Geworfenheit", 
                philosopher: "heidegger", 
                rubrics: ["being"], 
                description: "Заброшенность в мир",
                extendedDescription: "Фактичность существования - Dasein всегда уже заброшено в определенную ситуацию, которую оно не выбирало: время, место, тело, культуру. Это не вина, а онтологическая структура: Dasein обнаруживает себя 'уже здесь', в настроении (Befindlichkeit). Заброшенность - не дефект, а экзистенциал, указывающий на конечность и фактичность. Настроения (страх, скука) раскрывают заброшенность - что мы есть, но не знаем откуда и зачем."
            },
            { 
                id: "sorge", 
                label: "Sorge", 
                philosopher: "heidegger", 
                rubrics: ["being"], 
                description: "Забота как основа бытия",
                extendedDescription: "Единая структура Dasein, объединяющая его экзистенциалы: забегание-вперед-себя (проект), уже-бытие-в (заброшенность), бытие-при (озабоченность вещами). Не психологическое беспокойство, а онтологическая структура - Dasein существует как забота. Временность - смысл заботы: будущее (проект), прошлое (заброшенность), настоящее (падение). Забота - бытие Dasein, пока оно есть, до самой смерти."
            },
            { 
                id: "sein_zum_tode", 
                label: "Sein-zum-Tode", 
                philosopher: "heidegger", 
                rubrics: ["time"], 
                description: "Бытие-к-смерти",
                extendedDescription: "Смерть - не событие в конце жизни, а экзистенциал, конституирующий бытие Dasein. Dasein существует всегда уже как смертное, его возможность - невозможность существования. Подлинное бытие-к-смерти: забегание в эту возможность, принятие её как самой своей. Неподлинное: бегство от смерти, растворение в Das Man ('люди умирают, но не я'). Только перед лицом смерти Dasein обретает подлинную целостность и решимость. Смерть индивидуализирует."
            },
            { 
                id: "aletheia", 
                label: "Aletheia", 
                philosopher: "heidegger", 
                rubrics: ["knowledge"], 
                description: "Истина как несокрытость",
                extendedDescription: "Изначальная греческая алетейя - не соответствие суждения факту (adaequatio), а раскрытие, выход из сокрытости. Истина - событие просвета (Lichtung), в котором сущее обнаруживается. Она включает и сокрытость - то, что остается во тьме, делает возможным несокрытость. Истина - не свойство суждения, а способ бытия сущего. Dasein - просвет бытия, 'здесь', где сущее может обнаружиться."
            },
            { 
                id: "dwelling", 
                label: "Обитание", 
                philosopher: "heidegger", 
                rubrics: ["being"], 
                description: "Аутентичное пребывание",
                extendedDescription: "Wohnen - подлинный способ человеческого пребывания на земле, не техническое использование, а бережное отношение к вещам и миру. Строить - значит давать место обитанию. Обитание - пребывание смертных на земле под небом, перед божествами, в сообществе (Четверица/Geviert). Современность утратила обитание, заменив его калькулирующим овладением. Поэзия и мышление - пути к восстановлению обитания, к Бытию."
            },
            { 
                id: "das_man", 
                label: "Das Man", 
                philosopher: "heidegger", 
                rubrics: ["being", "consciousness"], 
                description: "Безличное 'они', неподлинное существование",
                extendedDescription: "Усредненная общественность, в которой Dasein растворяется, уклоняясь от собственного бытия. 'Люди говорят', 'так делают' - диктатура безличного. Das Man снимает ответственность, нивелирует различия, успокаивает. Это не другие люди, а способ быть Dasein - бегство от себя в общественные нормы. Неподлинность - не моральный недостаток, а онтологическая возможность. Подлинное существование - вырывание себя из Das Man через решимость."
            },
            { 
                id: "ereignis", 
                label: "Ereignis", 
                philosopher: "heidegger", 
                rubrics: ["being"], 
                description: "Со-бытие, событие присвоения бытия",
                extendedDescription: "Центральное понятие позднего Хайдеггера - событие, в котором Бытие дарует себя, а человек присваивается Бытию. Не случайное происшествие, а структурное событие взаимопринадлежности Бытия и Dasein. Er-eignis - при-своение, вс-обытие. Бытие и время даны в Ereignis, история бытия - последовательность способов события. Это замена субъект-объектной схемы топологией взаимопринадлежности. Мышление должно вслушиваться в Ereignis."
            },
            { 
                id: "geviert", 
                label: "Четверица", 
                philosopher: "heidegger", 
                rubrics: ["being"], 
                description: "Das Geviert: земля, небо, божества, смертные",
                extendedDescription: "Простое единство четырех: земля (несущее, скрывающее), небо (свет, времена года), божественные (намек священного), смертные (люди как смертные). Они зеркально играют друг в друге, каждое отражает остальные. Вещь собирает Четверицу - кувшин вмещает дар земли под небом для возлияния богам и питья смертных. Это до-метафизическое понимание мира, не субъект-объектное. Современная техника разрушает Четверицу."
            },
            { 
                id: "kehre", 
                label: "Поворот", 
                philosopher: "heidegger", 
                rubrics: ["being"], 
                description: "Die Kehre - поворот в мышлении бытия",
                extendedDescription: "Двойной смысл: поворот в самом Бытии (от забвения к раскрытию) и поворот в мысли Хайдеггера (от аналитики Dasein к истории Бытия). После Поворота не Dasein проектирует бытие, а Бытие посылает себя, вручает себя человеку. Не человек - субъект метафизики, а Бытие - дарящее. Поворот - от трансценденции к Ereignis, от воли к Gelassenheit (отрешенности). История метафизики ведет к Повороту - возможному новому началу."
            },
            
            // ВИТГЕНШТЕЙН
            { 
                id: "language_game", 
                label: "Языковые игры", 
                philosopher: "wittgenstein", 
                rubrics: ["language"], 
                description: "Контекстуальное использование языка",
                extendedDescription: "Язык - не единая структура, а множество языковых игр, каждая со своими правилами. Игра - деятельность по правилам: приказывать, описывать, шутить, молиться. Значение слова - его употребление в языковой игре, не ментальная сущность. Грамматика языковой игры определяет, что осмысленно в ней. Нет привилегированной игры; философские проблемы - смешение различных игр, нарушение грамматики."
            },
            { 
                id: "picture_theory", 
                label: "Теория изображения", 
                philosopher: "wittgenstein", 
                rubrics: ["knowledge"], 
                description: "Язык как картина мира",
                extendedDescription: "Ранний Витгенштейн: предложение - логическая картина факта, изоморфная ему. Элементы предложения соответствуют элементам факта, структура предложения отображает структуру факта. Возможность изображения основана на общей логической форме языка и мира. Предложение показывает, как обстоит дело, если оно истинно. Мир - совокупность фактов; язык - совокупность предложений. Позже Витгенштейн отвергает эту теорию."
            },
            { 
                id: "limits_language", 
                label: "Границы языка", 
                philosopher: "wittgenstein", 
                rubrics: ["knowledge", "language"], 
                description: "О чем невозможно говорить",
                extendedDescription: "'Границы моего языка означают границы моего мира'. Осмысленно можно говорить только о фактах; о логической форме, этике, эстетике, метафизике невозможно говорить - они показывают себя, но не могут быть сказаны. Философия не теория, а деятельность прояснения. 'О чем невозможно говорить, о том следует молчать'. Мистическое - не как устроен мир, а что он есть."
            },
            { 
                id: "family_resemblance", 
                label: "Семейное сходство", 
                philosopher: "wittgenstein", 
                rubrics: ["language"], 
                description: "Нечёткие категории",
                extendedDescription: "Концепты часто не имеют общей сущности, а связаны семейным сходством - сеть перекрывающихся подобий без единого ядра. Пример: 'игра' - нет единой черты, общей всем играм, но есть сходства и родство. Отказ от эссенциализма - не обязательно искать определение через род и видовое отличие. Философские проблемы часто возникают из требования единой сущности там, где её нет."
            },
            { 
                id: "form_of_life", 
                label: "Форма жизни", 
                philosopher: "wittgenstein", 
                rubrics: ["language"], 
                description: "Практический контекст языка",
                extendedDescription: "Lebensform - сплетение языка и деятельности, культурно-практический контекст употребления языка. Языковая игра укоренена в форме жизни - в том, что мы делаем, в наших институтах, обычаях, реакциях. Формы жизни - данность, за которой нельзя идти дальше: 'это просто то, что мы делаем'. Понимание языка предполагает разделение формы жизни. 'Если лев мог бы говорить, мы бы его не поняли' - иная форма жизни."
            },
            { 
                id: "showing_saying", 
                label: "Показывание vs говорение", 
                philosopher: "wittgenstein", 
                rubrics: ["language"], 
                description: "То, что может быть показано, не может быть сказано",
                extendedDescription: "Фундаментальное различие: факты могут быть сказаны (в предложениях); логическая форма, этические и эстетические ценности могут только показывать себя, но не говориться. Предложение показывает свою логическую форму в своей структуре, но не может высказать её. Мистическое показывает себя. Философия Трактата сама нарушает это различие - её предложения бессмысленны, они - лестница, которую нужно отбросить, поднявшись по ней."
            },
            { 
                id: "private_language", 
                label: "Аргумент против приватного языка", 
                philosopher: "wittgenstein", 
                rubrics: ["language"], 
                description: "Невозможность чисто личного языка",
                extendedDescription: "Невозможен язык, слова которого относятся к приватным, доступным только говорящему переживаниям. Следование правилу требует возможности проверки, а это невозможно для приватных ощущений. Нет критерия правильности употребления слова для приватного переживания - 'кажется правильным' не значит 'правильно'. Значение не в приватном акте указания, а в публичном употреблении. Это опровергает картезианскую концепцию привилегированного доступа к собственному сознанию."
            },
            { 
                id: "rule_following", 
                label: "Следование правилу", 
                philosopher: "wittgenstein", 
                rubrics: ["language"], 
                description: "Проблема интерпретации правил",
                extendedDescription: "Парадокс: всякая интерпретация правила сама требует правила интерпретации - бесконечный регресс. Следование правилу не основано на интерпретации, а на практике, обычае, дрессировке. Правило не детерминирует применение логически, а направляет через участие в форме жизни. 'Слепое' следование правилу - не механическое, а до-интерпретативное. Регулярность поведения в сообществе - критерий правильности, не ментальное состояние индивида."
            },

            // ЖАК ЛАКАН
            { 
                id: "three_registers", 
                label: "Три регистра", 
                philosopher: "lacan", 
                rubrics: ["consciousness"], 
                description: "Реальное, Символическое, Воображаемое",
                extendedDescription: "Топология Лакана включает три регистра: Реальное (невозможное, непредставимое, травматическое, остаток вне символизации), Символическое (порядок языка, законов, социальных структур, Большого Другого), Воображаемое (сфера образов, идентификаций, иллюзорного единства Я). Эти три регистра переплетены как борромеевы кольца - удаление одного разрывает всю структуру. Субъект конституируется на пересечении трёх регистров. Психоанализ работает с тремя регистрами: симптом укоренён в Реальном, анализируется в Символическом, проявляется в Воображаемом."
            },
            { 
                id: "mirror_stage", 
                label: "Стадия зеркала", 
                philosopher: "lacan", 
                rubrics: ["consciousness"], 
                description: "Формирование Я через образ",
                extendedDescription: "Стадия зеркала (6-18 месяцев) - ключевой момент формирования Я через идентификацию ребёнка со своим зеркальным образом. Ребёнок, ещё моторно не координированный, видит в зеркале целостный образ и радостно узнаёт себя. Но это узнавание - méconnaissance, неузнавание: Я формируется как alienated, отчуждённое в образе Другого. Нарциссическая идентификация с образом закладывает структуру Я как воображаемого образования. Я - это другой (je est un autre). Стадия зеркала вводит в Воображаемый регистр и предшествует вхождению в Символическое."
            },
            { 
                id: "big_other", 
                label: "Большой Другой", 
                philosopher: "lacan", 
                rubrics: ["consciousness"], 
                description: "Символический порядок",
                extendedDescription: "Большой Другой (grand Autre, A) - символический порядок языка, законов, социальных норм, в который субъект вписан помимо своей воли. Это структура, которая говорит субъектом, место, откуда субъект видим и судим. Другой - не конкретный другой человек (малый другой), а анонимный порядок означающих. Желание субъекта - это желание Другого: мы желаем того, чего, как нам кажется, желает от нас Другой, и желаем быть желанными Другим. Большой Другой гарантирует значение, но сам не обладает полнотой - Другой кастрирован, в нём есть нехватка."
            },
            { 
                id: "desire_other", 
                label: "Желание Другого", 
                philosopher: "lacan", 
                rubrics: ["will"], 
                description: "Желание как желание Другого",
                extendedDescription: "Желание человека - это желание Другого в двух смыслах: желание быть признанным, желанным Другим (мы желаем, чтобы нас желали) и желание, которое структурировано Другим (мы желаем того, что Другой желает или предписывает желать). Желание отличается от потребности (биологическое) и требования (обращённое к Другому). Желание возникает из разрыва между потребностью и требованием, из невозможности удовлетворения требования любви. Желание никогда не удовлетворяется, оно постоянно соскальзывает вдоль цепи означающих. Субъект желания - расщеплённый субъект ($)."
            },
            { 
                id: "objet_petit_a", 
                label: "Objet petit a", 
                philosopher: "lacan", 
                rubrics: ["will"], 
                description: "Объект-причина желания",
                extendedDescription: "Объект a (objet petit a) - не объект желания, а его причина, то, что вызывает и поддерживает желание, оставаясь недостижимым. Это остаток, remainder, который ускользает от символизации, частичный объект (грудь, фекалии, взгляд, голос). Объект a - это то, что было потеряно при вхождении в Символический порядок, утраченная вещь (das Ding), которую субъект пытается восстановить. Он находится на границе Реального и Символического. Объект а - plus-de-jouir, прибавочное наслаждение, аналог марксовой прибавочной стоимости. Фантазм структурируется вокруг объекта a."
            },
            { 
                id: "signifier", 
                label: "Означающее", 
                philosopher: "lacan", 
                rubrics: ["language"], 
                description: "Примат означающего над означаемым",
                extendedDescription: "Лакан переворачивает соссюровскую формулу: означающее (S) главенствует над означаемым (s), S/s. Означающее не служит для обозначения означаемого - напротив, означающее производит означаемое. Субъект - эффект означающего: 'означающее представляет субъекта для другого означающего'. Бессознательное структурировано как язык - оно подчиняется законам означающего (метафора, метонимия). Смысл возникает ретроактивно, point de capiton, стёжка. Означающее материально (звук, буква) и дифференциально (определяется через различие с другими означающими). Символический порядок - порядок означающих."
            },
            { 
                id: "lack", 
                label: "Нехватка", 
                philosopher: "lacan", 
                rubrics: ["consciousness"], 
                description: "Конститутивная нехватка субъекта",
                extendedDescription: "Нехватка (manque) - конститутивная для субъекта: субъект изначально неполон, расщеплён ($), ему чего-то не хватает. Эта нехватка не случайна и не может быть заполнена - она структурна, возникает с вхождением в язык. Кастрация - не эмпирическое событие, а символическая операция, вводящая нехватку. Нехватка - источник желания: мы желаем, потому что нам не хватает. Но объект желания - фантазматическое восполнение нехватки - всегда ускользает. Даже Другой неполон, в нём есть нехватка (S(Ⱥ)). Нехватка нехватки - невроз пытается избежать столкновения с нехваткой."
            },
            
            // САРТР
            { 
                id: "existence", 
                label: "Существование", 
                philosopher: "sartre", 
                rubrics: ["being"], 
                description: "Первично перед сущностью",
                extendedDescription: "Для человека существование предшествует сущности - сначала он существует, встречает себя, появляется в мире, и только потом определяется. Нет человеческой природы, нет Бога-творца, задающего сущность. Человек - это то, что он делает из себя, его проект. Только человек существует в полном смысле - сознательно, свободно проектируя себя. Вещи имеют сущность до существования; человек создает свою сущность, существуя."
            },
            { 
                id: "nothingness", 
                label: "Ничто", 
                philosopher: "sartre", 
                rubrics: ["consciousness"], 
                description: "Источник свободы",
                extendedDescription: "Сознание вносит ничто в бытие через негацию, дистанцирование, отрицание. Ничто не существует само по себе, а ничтожится через человеческую реальность. Сознание - это ничто в сердце бытия, дыра в бытии, через которую приходит негативность. Ничтожение - основа свободы: мы не совпадаем с собой, всегда можем сказать 'нет' данному. Тревога - переживание ничто, собственной свободы как бездны возможностей."
            },
            { 
                id: "bad_faith", 
                label: "Дурная вера", 
                philosopher: "sartre", 
                rubrics: ["freedom"], 
                description: "Самообман и бегство от свободы",
                extendedDescription: "Mauvaise foi - ложь себе, попытка избежать тревоги свободы, притворяясь вещью с фиксированной сущностью. 'Я такой, какой есть' - отказ от трансцендирования. Официант, играющий роль официанта; женщина, не замечающая ухаживания. Дурная вера - не просто ложь: я одновременно обманываю и знаю обман. Это возможно из-за структуры сознания - мы не совпадаем с собой. Дурная вера - бегство от ответственности за свою свободу."
            },
            { 
                id: "freedom_sartre", 
                label: "Свобода", 
                philosopher: "sartre", 
                rubrics: ["freedom"], 
                description: "Осуждённость быть свободным",
                extendedDescription: "'Человек осужден быть свободным' - свобода не приятное качество, а тяжелое бремя. Мы не выбираем быть свободными - заброшены в свободу, обречены на неё. Нет оправданий: ни Бога, ни природы, ни обстоятельств. Мы полностью ответственны за себя и за мир. Даже отказ выбирать - выбор. Свобода абсолютна - мы свободны даже в оковах (выбираем отношение к ним). Тревога - осознание этой ужасающей свободы."
            },
            { 
                id: "for_itself", 
                label: "Для-себя-бытие", 
                philosopher: "sartre", 
                rubrics: ["consciousness"], 
                description: "Сознание",
                extendedDescription: "L'être-pour-soi - бытие сознания, характеризующееся негативностью, отсутствием совпадения с собой, трансценденцией. Для-себя не есть, а существует - всегда впереди или позади себя, проектируя будущее, убегая от прошлого. Оно прозрачно для себя, но пусто - чистая спонтанность, ничто. Стремится стать в-себе, обрести плотность бытия, сохраняя сознание (стать Богом), но это невозможно. Для-себя - несчастное сознание, разлад с собой."
            },
            { 
                id: "in_itself", 
                label: "В-себе-бытие", 
                philosopher: "sartre", 
                rubrics: ["being"], 
                description: "Вещи без сознания",
                extendedDescription: "L'être-en-soi - бытие вещей, плотное, массивное, совпадающее с собой. Оно есть то, что оно есть - без негативности, без возможности, без становления. В-себе непрозрачно, инертно, лишено смысла - абсурдная фактичность. 'Бытие есть. Бытие есть в-себе. Бытие есть то, что оно есть.' Для-себя возникает из в-себе как его ничтожение, но мечтает вернуться к плотности в-себе, сохранив сознание - невозможный синтез."
            },
            { 
                id: "look", 
                label: "Взгляд Другого", 
                philosopher: "sartre", 
                rubrics: ["consciousness"], 
                description: "Объективация через Другого",
                extendedDescription: "Le regard - взгляд Другого превращает меня в объект, похищает мой мир, делая его центром другого мира. Стыд - изначальное переживание себя под взглядом Другого, обнаружение своей объектности. Я существую для Другого не как для-себя, а как в-себе - с фиксированными качествами. Конфликт неизбежен: либо я объективирую Другого (садизм), либо он меня (мазохизм). 'Ад - это другие' - не потому что они злы, а потому что их взгляд отчуждает."
            },
            { 
                id: "project", 
                label: "Проект", 
                philosopher: "sartre", 
                rubrics: ["freedom"], 
                description: "Человек как проектирование себя в будущее",
                extendedDescription: "Человек - это прежде всего проект, то, что бросает себя к будущему, сознает себя как проектирующего. Не пассивная вещь, а активное самоопределение. Фундаментальный проект - тотальность выборов, конституирующих личность. Мы не имеем природы, мы - наш проект, постоянное трансцендирование данного к возможному. Проект не план - это само наше бытие как устремленность, выход за пределы фактичности к ценностям, целям, смыслам."
            },
            { 
                id: "engagement", 
                label: "Ангажированность", 
                philosopher: "sartre", 
                rubrics: ["ethics", "freedom"], 
                description: "Вовлечённость, обязательство перед миром",
                extendedDescription: "Engagement - невозможно не быть вовлеченным; даже бездействие - выбор и ответственность. Писатель, философ не может быть нейтральным - он всегда на стороне угнетенных или угнетателей. Свобода требует солидарности: выбирая для себя, выбираешь для всех людей. Это не альтруизм, а следствие структуры свободы: мой проект всегда предполагает определенный образ человека. Ангажированность - признание своей укорененности в ситуации и ответственности за нее."
            },
            
            // ФУКО
            { 
                id: "power_knowledge", 
                label: "Власть-знание", 
                philosopher: "foucault", 
                rubrics: ["politics"], 
                description: "Неразрывность власти и знания",
                extendedDescription: "Pouvoir-savoir - власть и знание непосредственно предполагают друг друга, нет отношений власти без соответствующего поля знания, ни знания, не предполагающего властных отношений. Истина не противоположна власти, а её эффект и инструмент. Дисциплинарные науки (психиатрия, криминология, сексология) производят знание, которое одновременно контролирует. Власть не просто запрещает, но производит реальность, ритуалы истины, дискурсы."
            },
            { 
                id: "episteme", 
                label: "Эпистема", 
                philosopher: "foucault", 
                rubrics: ["language"], 
                description: "Исторические структуры знания",
                extendedDescription: "Эпистема - историческое априори, конфигурация знания определенной эпохи, определяющая возможные формы познания. Не содержание знаний, а правила их образования - что может быть помыслено, сказано, признано истинным. Разрывы между эпистемами (Ренессанс, классическая, современная) - не прогресс, а археологические смены порядка вещей. Эпистема - неосознаваемый горизонт, позитивное бессознательное знания."
            },
            { 
                id: "discipline", 
                label: "Дисциплина", 
                philosopher: "foucault", 
                rubrics: ["politics"], 
                description: "Микрофизика власти",
                extendedDescription: "Технологии власти, производящие послушные тела через детальный контроль жестов, времени, пространства. Не репрессия, а формирование: тюрьма, школа, армия, фабрика создают дисциплинированных индивидов. Иерархический надзор, нормализующая санкция, экзамен - инструменты дисциплины. Власть не только подавляет, но производит - создает индивидов определенного типа. Паноптизм - идеальная модель дисциплинарной власти."
            },
            { 
                id: "biopower", 
                label: "Биовласть", 
                philosopher: "foucault", 
                rubrics: ["politics"], 
                description: "Власть над жизнью",
                extendedDescription: "С XVIII века - переход от суверенной власти (право умерщвлять) к биовласти (контроль над жизнью). Два полюса: анатомо-политика тела (дисциплина) и биополитика населения (регулирование рождаемости, смертности, здоровья). Жизнь становится объектом и целью власти. Расизм - механизм биовласти, легитимирующий умерщвление. Современность - не освобождение жизни от власти, а захват жизни властью, делающей её продуктивной."
            },
            { 
                id: "care_self", 
                label: "Забота о себе", 
                philosopher: "foucault", 
                rubrics: ["ethics"], 
                description: "Этика самопреобразования",
                extendedDescription: "Epimeleia heautou - античная практика работы над собой, превращения себя в произведение искусства. Не подчинение универсальным нормам, а творческое самоконструирование. Техники себя - упражнения, испытания, самоиспытание, ведение дневников. Этика как эстетика существования, а не мораль долга. Против христианского самоотречения - утверждение себя. Современность может обрести этическую перспективу, возродив заботу о себе."
            },
            { 
                id: "archaeology", 
                label: "Археология знания", 
                philosopher: "foucault", 
                rubrics: ["method"], 
                description: "Метод анализа дискурсов",
                extendedDescription: "Археология исследует не прогресс истины, а позитивность дискурсов - правила образования высказываний в определенную эпоху. Не история идей (поиск смысла), а анализ дискурсивных практик (регулярности, формации). Дискурс не выражает реальность или мысль, а конституирует объекты. Археология выявляет эпистемологические разрывы, несовместимость эпистем. Это не герменевтика (поиск скрытого смысла), а картография исторических формаций знания."
            },
            { 
                id: "heterotopia", 
                label: "Гетеротопия", 
                philosopher: "foucault", 
                rubrics: ["politics"], 
                description: "Иные пространства, реальные утопии",
                extendedDescription: "Реально существующие места, которые функционируют как контр-пространства - одновременно реальны и ирреальны, отражают и оспаривают обычные пространства. Примеры: кладбище, тюрьма, музей, театр, корабль. Гетеротопии имеют свои принципы: кризисные/отклонения, изменчивость функции, наложение несовместимых пространств, гетерохронии (разрывы времени), системы открытия/закрытия. Они - зеркала общества, показывающие его иначе."
            },
            { 
                id: "panopticon", 
                label: "Паноптикум", 
                philosopher: "foucault", 
                rubrics: ["politics"], 
                description: "Архитектура тотального надзора",
                extendedDescription: "Идеальная модель дисциплинарной власти (Бентам): круглая тюрьма с центральной башней, откуда надзиратель видит всех заключенных, оставаясь невидимым. Эффект: постоянное ощущение наблюдаемости автоматизирует подчинение - власть становится внутренней. Паноптизм распространяется за пределы тюрьмы: школы, больницы, фабрики. Это диаграмма власти современности - не тиранический контроль, а рассеянный, нормализующий, создающий индивидуальность через надзор."
            },
            { 
                id: "problematization", 
                label: "Проблематизация", 
                philosopher: "foucault", 
                rubrics: ["method"], 
                description: "Превращение данности в вопрос",
                extendedDescription: "Задача критической мысли - не принимать очевидности, а проблематизировать их, показывая, как данное стало данным, что сделало возможным его принятие. Не 'что думать?' а 'как стало возможным так думать?' Безумие, сексуальность, преступность - не вечные сущности, а исторические проблематизации. Проблематизация - не релятивизм, а выявление произвольности настоящего, открытие возможности думать иначе. Свобода как критическая дистанция к данности."
            },
            
            // ДЕЛЁЗ
            { 
                id: "rhizome", 
                label: "Ризома", 
                philosopher: "deleuze", 
                rubrics: ["dialectics"], 
                description: "Нелинейная структура",
                extendedDescription: "Модель множественности без единого центра, корня, иерархии - как корневище растения. Принципы ризомы: связь, гетерогенность (любая точка соединяется с любой), множественность, асигнифицирующий разрыв, картография, декалькомания. Против древовидных структур (бинарная логика, иерархия). Ризома всегда в середине, между, интермеццо. Это онтология и метод: бытие ризоматично, мышление должно быть ризоматическим - создавать связи, линии ускользания."
            },
            { 
                id: "difference", 
                label: "Различие", 
                philosopher: "deleuze", 
                rubrics: ["dialectics"], 
                description: "Онтология множественности",
                extendedDescription: "Différence - не различие между тождественными вещами, а изначальное, продуктивное различие, предшествующее тождеству. Не отрицание (А не есть Б), а утверждение различия как такового. Бытие = становление = различие. Против гегелевской диалектики: не противоречие, а дивергенция, расхождение. Вечное возвращение возвращает не то же, а различие. Повторение = различие; каждое повторение нового - новое. Различие - движущая сила реальности, а не тождество."
            },
            { 
                id: "body_without_organs", 
                label: "Тело без органов", 
                philosopher: "deleuze", 
                rubrics: ["matter"], 
                description: "Недифференцированная полнота",
                extendedDescription: "CsO (Artaud) - не отсутствие органов, а тело, освобожденное от организации, от фиксированных функций. Яйцо - полное тело без органов, интенсивная материя. Не регрессия к хаосу, а экспериментирование с порогами, интенсивностями, становлениями. Организм - стратификация, захват желания; CsO - план имманенции, где циркулируют интенсивности. Опасность: слишком быстрая детерриториализация ведет к смерти. CsO - предел и горизонт."
            },
            { 
                id: "desiring_machines", 
                label: "Машины желания", 
                philosopher: "deleuze", 
                rubrics: ["will"], 
                description: "Производство желания",
                extendedDescription: "Желание - не недостаток, а производство, создание реальности. Машины желания - связи, производящие потоки (энергии, означающих, тел). Всё машина: машина-рот соединяется с машиной-грудью, производя поток молока. Шизофрения - процесс детерриториализации желания, освобожденного от социального кодирования. Капитализм высвобождает желание, но тут же аксиоматизирует его. Революция - не освобождение субъекта, а освобождение желающего производства."
            },
            { 
                id: "assemblage", 
                label: "Ассамбляж", 
                philosopher: "deleuze", 
                rubrics: ["being"], 
                description: "Множественное единство",
                extendedDescription: "Agencement - сборка гетерогенных элементов в функционирующее целое, не тотальность, а констелляция. Не единство структуры, а связь разнородного: тела, знаки, машины, территории. У ассамбляжа два измерения: территориальности и детерриториализации; содержания и выражения. Ассамбляж не имеет сущности - определяется линиями, которые его пересекают. Всё - ассамбляжи: книга, любовь, общество. Философия создает концепты как ассамбляжи."
            },
            { 
                id: "deterritorialization", 
                label: "Детерриториализация", 
                philosopher: "deleuze", 
                rubrics: ["dialectics"], 
                description: "Разрушение структур",
                extendedDescription: "Движение освобождения от кодов, территорий, идентичностей; линия ускользания от стратификаций. Не просто разрушение, но процесс становления-иным. Капитализм - предельная детерриториализация (всё превращается в поток капитала), но одновременно ретерриториализация (на Эдипе, нации, рынке). Абсолютная детерриториализация - план имманенции, где циркулируют чистые интенсивности. Шизо - проводник детерриториализации, параноик - агент ретерриториализации."
            },
            { 
                id: "virtual_actual", 
                label: "Виртуальное-актуальное", 
                philosopher: "deleuze", 
                rubrics: ["being"], 
                description: "Реальное, но не актуализированное",
                extendedDescription: "Не возможное (нереальное) vs действительное, а виртуальное (реальное, но не актуальное) vs актуальное. Виртуальное не менее реально - это структура проблемы, поле сингулярностей. Актуализация - не реализация возможного (уже определенного), а творческое решение проблемы, дифференциация. Виртуальное множественно, актуальное индивидуально. Бергсоновская длительность виртуальна; её актуализация - пространственное время. Искусство схватывает виртуальное."
            },
            { 
                id: "event", 
                label: "Событие", 
                philosopher: "deleuze", 
                rubrics: ["being"], 
                description: "Чистое становление, смысл",
                extendedDescription: "Не происшествие в мире, а то, что извлекается из происшествий - чистое становление, эффект, смысл. События бестелесны - не смешиваются с вещами, но insistent в них, настаивают. 'Битва' как событие - не сражающиеся тела, а чистое становление-побежденным, которое никогда не завершается. Стоическое различение тел и бестелесных эффектов. Философия мыслит событие - не что происходит, а что в происходящем? Достойность события - стать его достойным, не быть его жертвой."
            },
            { 
                id: "fold", 
                label: "Складка", 
                philosopher: "deleuze", 
                rubrics: ["being"], 
                description: "Le pli - складывание, барочная топология",
                extendedDescription: "Барокко как ключ к Лейбницу и современности: мир - бесконечное складывание, а не развертывание заданного. Материя складывается в органические тела; душа - складка, включающая весь мир. Не внешнее и внутреннее, а разные режимы складки. Субъект - результат складывания, а не субстанция. Против диалектики: не снятие противоположностей, а их складывание друг на друга. Современная философия - искусство складок, создание новых сгибов мысли."
            }
        ];
        
        // ============================================
        // 5. СВЯЗИ МЕЖДУ КОНЦЕПЦИЯМИ
        // ============================================
        const relations = [
            // СОКРАТ → ПЛАТОН
            { source: "maieutics", target: "anamnesis", type: "influence", weight: 2 },
            { source: "virtue_knowledge", target: "ideas", type: "influence", weight: 2 },
            { source: "care_soul", target: "tripartite_soul", type: "develop", weight: 2 },
            { source: "daimonion", target: "care_soul", type: "ground", weight: 1 },
            { source: "know_nothing", target: "maieutics", type: "condition", weight: 2 },
            { source: "virtue_knowledge", target: "maieutics", type: "presuppose", weight: 2 },
            { source: "care_soul", target: "virtue_knowledge", type: "culminate", weight: 2 },
            { source: "daimonion", target: "soul", type: "influence", weight: 1 },
            { source: "soul", target: "care_soul", type: "presuppose", weight: 2 },
            { source: "soul", target: "virtue_knowledge", type: "ground", weight: 2 },
            { source: "daimonion", target: "maieutics", type: "mediate", weight: 1 },
            
            // ПЛАТОН → АРИСТОТЕЛЬ
            { source: "eidos", target: "form", type: "develop", weight: 3 },
            { source: "ideas", target: "form", type: "critique", weight: 3 },
            { source: "demiurge", target: "unmoved_mover", type: "develop", weight: 2 },
            { source: "tripartite_soul", target: "golden_mean", type: "influence", weight: 1 },
            
            // ВНУТРИ ПЛАТОНА
            { source: "ideas", target: "eidos", type: "presuppose", weight: 3 },
            { source: "eidos", target: "anamnesis", type: "condition", weight: 2 },
            { source: "cave", target: "ideas", type: "ground", weight: 2 },
            { source: "demiurge", target: "ideas", type: "apply", weight: 2 },
            { source: "ideal_state", target: "tripartite_soul", type: "ground", weight: 2 },
            { source: "tripartite_soul", target: "care_soul", type: "ground", weight: 2 },
            { source: "ideal_state", target: "ideas", type: "ground", weight: 2 },
            { source: "good", target: "ideas", type: "culminate", weight: 3 },
            { source: "good", target: "eidos", type: "culminate", weight: 3 },
            { source: "cave", target: "good", type: "influence", weight: 2 },
            { source: "good", target: "demiurge", type: "influence", weight: 2 },
            { source: "eros", target: "anamnesis", type: "instrument", weight: 2 },
            { source: "eros", target: "care_soul", type: "influence", weight: 2 },
            { source: "eros", target: "good", type: "ground", weight: 2 },
            { source: "eros", target: "cave", type: "influence", weight: 1 },
            { source: "eros", target: "tripartite_soul", type: "ground", weight: 2 },
            { source: "methexis", target: "eidos", type: "mediate", weight: 3, bidirectional: true },
            { source: "methexis", target: "cave", type: "ground", weight: 2 },
            { source: "methexis", target: "ideas", type: "ground", weight: 3 },
            { source: "mimesis", target: "methexis", type: "apply", weight: 2 },
            { source: "mimesis", target: "ideas", type: "ground", weight: 2 },
            { source: "chora", target: "demiurge", type: "condition", weight: 2 },
            { source: "chora", target: "matter_ar", type: "dialogue", weight: 1, bidirectional: true },
            { source: "good", target: "methexis", type: "influence", weight: 2 },
            
            // ВНУТРИ АРИСТОТЕЛЯ
            { source: "form", target: "matter_ar", type: "presuppose", weight: 3, bidirectional: true },
            { source: "form", target: "entelechy", type: "culminate", weight: 2 },
            { source: "four_causes", target: "entelechy", type: "presuppose", weight: 2 },
            { source: "unmoved_mover", target: "entelechy", type: "ground", weight: 2 },
            { source: "categories", target: "form", type: "ground", weight: 2 },
            { source: "golden_mean", target: "virtue_knowledge", type: "develop", weight: 2 },
            { source: "golden_mean", target: "entelechy", type: "ground", weight: 2 },
            { source: "act_potency", target: "form", type: "presuppose", weight: 3, bidirectional: true },
            { source: "act_potency", target: "matter_ar", type: "presuppose", weight: 3, bidirectional: true },
            { source: "act_potency", target: "entelechy", type: "presuppose", weight: 3 },
            { source: "act_potency", target: "unmoved_mover", type: "ground", weight: 3 },
            { source: "four_causes", target: "act_potency", type: "ground", weight: 2 },
            { source: "phronesis", target: "golden_mean", type: "instrument", weight: 3 },
            { source: "phronesis", target: "virtue_knowledge", type: "develop", weight: 3 },
            { source: "phronesis", target: "eudaimonia", type: "instrument", weight: 3 },
            { source: "eudaimonia", target: "entelechy", type: "culminate", weight: 3 },
            { source: "eudaimonia", target: "golden_mean", type: "ground", weight: 3 },
            { source: "logos", target: "form", type: "presuppose", weight: 3 },
            { source: "logos", target: "categories", type: "ground", weight: 3 },
            { source: "logos", target: "unmoved_mover", type: "ground", weight: 3 },
            
            // ПЛАТОН → ПЛОТИН
            { source: "good", target: "the_one", type: "develop", weight: 3 },
            { source: "ideas", target: "nous", type: "develop", weight: 3 },
            { source: "eidos", target: "nous", type: "influence", weight: 2 },
            { source: "demiurge", target: "world_soul", type: "influence", weight: 2 },
            { source: "anamnesis", target: "henosis", type: "develop", weight: 2 },
            { source: "eros", target: "henosis", type: "influence", weight: 2 },
            { source: "cave", target: "contemplation", type: "influence", weight: 2 },
            
            // АРИСТОТЕЛЬ → ПЛОТИН
            { source: "unmoved_mover", target: "the_one", type: "influence", weight: 2 },
            { source: "entelechy", target: "emanation", type: "influence", weight: 2 },
            { source: "form", target: "nous", type: "influence", weight: 2 },
            
            // ВНУТРИ ПЛОТИНА
            { source: "the_one", target: "emanation", type: "emerge_from", weight: 3 },
            { source: "emanation", target: "nous", type: "emerge_from", weight: 3 },
            { source: "emanation", target: "world_soul", type: "emerge_from", weight: 3 },
            { source: "nous", target: "world_soul", type: "ground", weight: 2 },
            { source: "world_soul", target: "matter_plotinus", type: "oppose", weight: 2 },
            { source: "henosis", target: "the_one", type: "culminate", weight: 3 },
            { source: "contemplation", target: "nous", type: "ground", weight: 2 },
            { source: "contemplation", target: "henosis", type: "instrument", weight: 2 },
            
            // ПЛОТИН → АВГУСТИН
            { source: "the_one", target: "grace", type: "influence", weight: 2 },
            { source: "emanation", target: "two_cities", type: "influence", weight: 1 },
            { source: "nous", target: "faith_reason", type: "influence", weight: 2 },
            { source: "henosis", target: "confession", type: "influence", weight: 2 },
            { source: "world_soul", target: "time_augustine", type: "influence", weight: 1 },
            { source: "contemplation", target: "confession", type: "influence", weight: 2 },
            
            // ПЛОТИН → ДРУГИЕ
            { source: "the_one", target: "substance_spinoza", type: "influence", weight: 2 },
            { source: "emanation", target: "absolute_idea", type: "influence", weight: 2 },
            { source: "contemplation", target: "intellectual_love", type: "influence", weight: 2 },
            
            // АРИСТОТЕЛЬ → СРЕДНЕВЕКОВЬЕ
            { source: "form", target: "essence_existence", type: "influence", weight: 3 },
            { source: "four_causes", target: "five_ways", type: "influence", weight: 2 },
            { source: "act_potency", target: "essence_existence", type: "influence", weight: 3 },
            
            // ВНУТРИ АВГУСТИНА
            { source: "grace", target: "original_sin", type: "complement", weight: 2 },
            { source: "faith_reason", target: "confession", type: "presuppose", weight: 2 },
            { source: "two_cities", target: "grace", type: "ground", weight: 2 },
            { source: "time_augustine", target: "confession", type: "condition", weight: 2 },
            { source: "two_cities", target: "faith_reason", type: "ground", weight: 2 },
            { source: "original_sin", target: "confession", type: "ground", weight: 2 },
            { source: "grace", target: "confession", type: "influence", weight: 2 },
            
            // АВГУСТИН → ФОМА
            { source: "faith_reason", target: "thomistic_synthesis", type: "influence", weight: 2 },
            { source: "grace", target: "natural_law", type: "influence", weight: 2 },
            
            // ПЛАТОН → АВГУСТИН
            { source: "good", target: "grace", type: "influence", weight: 2 },
            { source: "ideas", target: "faith_reason", type: "influence", weight: 2 },
            { source: "anamnesis", target: "confession", type: "influence", weight: 2 },
            { source: "eidos", target: "grace", type: "influence", weight: 1 },
            { source: "tripartite_soul", target: "two_cities", type: "influence", weight: 1 },
            
            // ВНУТРИ ФОМЫ
            { source: "essence_existence", target: "five_ways", type: "presuppose", weight: 3 },
            { source: "natural_law", target: "thomistic_synthesis", type: "apply", weight: 2 },
            { source: "analogy", target: "essence_existence", type: "ground", weight: 2 },
            { source: "thomistic_synthesis", target: "form", type: "develop", weight: 2 },
            { source: "thomistic_synthesis", target: "essence_existence", type: "ground", weight: 2 },
            { source: "natural_law", target: "five_ways", type: "ground", weight: 2 },
            { source: "accidents", target: "essence_existence", type: "ground", weight: 2 },
            { source: "actual_being", target: "act_potency", type: "apply", weight: 3 },
            { source: "actual_being", target: "essence_existence", type: "ground", weight: 3 },
            { source: "participatio", target: "methexis", type: "apply", weight: 3 },
            { source: "participatio", target: "essence_existence", type: "mediate", weight: 3 },
            { source: "participatio", target: "analogy", type: "ground", weight: 3 },
            
            // ДЕКАРТ
            { source: "cogito", target: "dualism", type: "emerge_from", weight: 3 },
            { source: "res_cogitans", target: "res_extensa", type: "oppose", weight: 3 },
            { source: "dualism", target: "res_cogitans", type: "presuppose", weight: 2 },
            { source: "method", target: "cogito", type: "instrument", weight: 2 },
            { source: "clear_distinct", target: "innate_ideas", type: "condition", weight: 2 },
            { source: "innate_ideas", target: "res_cogitans", type: "ground", weight: 2 },
            { source: "cogito", target: "know_nothing", type: "critique", weight: 2 },
            
            // ДЕКАРТ → ЛОКК
            { source: "innate_ideas", target: "tabula_rasa", type: "oppose", weight: 3 },
            { source: "res_extensa", target: "primary_qualities", type: "influence", weight: 2 },
            { source: "clear_distinct", target: "simple_ideas", type: "dialogue", weight: 1, bidirectional: true },
            
            // ВНУТРИ ЛОККА
            { source: "tabula_rasa", target: "simple_ideas", type: "condition", weight: 3 },
            { source: "simple_ideas", target: "complex_ideas", type: "emerge_from", weight: 3 },
            { source: "primary_qualities", target: "secondary_qualities", type: "oppose", weight: 2 },
            { source: "primary_qualities", target: "substance_locke", type: "presuppose", weight: 2 },
            { source: "substance_locke", target: "simple_ideas", type: "ground", weight: 2 },
            { source: "personal_identity", target: "complex_ideas", type: "emerge_from", weight: 2 },
            
            // ЛОКК → БЕРКЛИ
            { source: "primary_qualities", target: "esse_percipi", type: "critique", weight: 3 },
            { source: "substance_locke", target: "immaterialism", type: "critique", weight: 3 },
            { source: "simple_ideas", target: "ideas_berkeley", type: "influence", weight: 2 },
            
            // ЛОКК → ЮМ
            { source: "simple_ideas", target: "impressions", type: "develop", weight: 3 },
            { source: "complex_ideas", target: "ideas_hume", type: "influence", weight: 2 },
            { source: "tabula_rasa", target: "bundle_theory", type: "influence", weight: 2 },
            { source: "substance_locke", target: "bundle_theory", type: "influence", weight: 2 },
            
            // ЛОКК → ЛЕЙБНИЦ
            { source: "tabula_rasa", target: "petites_perceptions", type: "oppose", weight: 2 },
            { source: "tabula_rasa", target: "innate_ideas", type: "critique", weight: 2 },
            
            // ЛОКК → КАНТ
            { source: "primary_qualities", target: "thing_itself", type: "influence", weight: 2 },
            { source: "simple_ideas", target: "apriori", type: "oppose", weight: 2 },
            
            // СПИНОЗА
            { source: "substance_spinoza", target: "modes", type: "emerge_from", weight: 3 },
            { source: "attributes", target: "substance_spinoza", type: "presuppose", weight: 2 },
            { source: "conatus", target: "modes", type: "ground", weight: 2 },
            { source: "intellectual_love", target: "substance_spinoza", type: "ground", weight: 2 },
            { source: "determinism", target: "substance_spinoza", type: "ground", weight: 2 },
            { source: "substance_spinoza", target: "dualism", type: "critique", weight: 2 },
            { source: "determinism", target: "autonomy", type: "oppose", weight: 2 },
            { source: "natura_naturans", target: "substance_spinoza", type: "ground", weight: 3 },
            { source: "natura_naturata", target: "modes", type: "ground", weight: 3 },
            { source: "natura_naturans", target: "natura_naturata", type: "presuppose", weight: 2, bidirectional: true },
            { source: "adequate_ideas", target: "intellectual_love", type: "instrument", weight: 2 },
            { source: "adequate_ideas", target: "clear_distinct", type: "dialogue", weight: 1, bidirectional: true },
            
            // АРИСТОТЕЛЬ → СПИНОЗА
            { source: "entelechy", target: "substance_spinoza", type: "influence", weight: 2 },
            
            // СПИНОЗА → ГЕГЕЛЬ
            { source: "substance_spinoza", target: "absolute_idea", type: "influence", weight: 2 },
            { source: "determinism", target: "dialectic", type: "dialogue", weight: 2, bidirectional: true },
            
            // ЛЕЙБНИЦ
            { source: "monads", target: "preestablished", type: "presuppose", weight: 2 },
            { source: "sufficient_reason", target: "best_worlds", type: "condition", weight: 2 },
            { source: "petites_perceptions", target: "monads", type: "ground", weight: 2 },
            { source: "monads", target: "substance_spinoza", type: "critique", weight: 2 },
            { source: "preestablished", target: "dualism", type: "synthesize", weight: 2 },
            { source: "best_worlds", target: "demiurge", type: "develop", weight: 1 },
            { source: "sufficient_reason", target: "four_causes", type: "develop", weight: 1 },
            { source: "sufficient_reason", target: "preestablished", type: "ground", weight: 2 },
            { source: "best_worlds", target: "monads", type: "ground", weight: 2 },
            { source: "apperception", target: "monads", type: "exemplify", weight: 3 },
            { source: "apperception", target: "petites_perceptions", type: "oppose", weight: 2 },
            { source: "apperception", target: "transcendental_ego", type: "influence", weight: 2 },
            { source: "apperception", target: "intentionality", type: "influence", weight: 2 },
            { source: "continuity", target: "preestablished", type: "presuppose", weight: 2 },
            { source: "continuity", target: "monads", type: "presuppose", weight: 2 },
            
            // ЛЕЙБНИЦ → КАНТ
            { source: "apperception", target: "transcendental_ego", type: "influence", weight: 2 },
            { source: "monads", target: "thing_itself", type: "influence", weight: 2 },
            { source: "preestablished", target: "transcendental", type: "critique", weight: 2 },
            { source: "sufficient_reason", target: "antinomies", type: "influence", weight: 2 },
            { source: "petites_perceptions", target: "apriori", type: "dialogue", weight: 1, bidirectional: true },
            
            // ВНУТРИ БЕРКЛИ
            { source: "esse_percipi", target: "immaterialism", type: "presuppose", weight: 3 },
            { source: "immaterialism", target: "ideas_berkeley", type: "ground", weight: 2 },
            { source: "god_perceiver", target: "esse_percipi", type: "condition", weight: 2 },
            { source: "ideas_berkeley", target: "esse_percipi", type: "presuppose", weight: 2 },
            
            // БЕРКЛИ → ЮМ
            { source: "immaterialism", target: "impressions", type: "influence", weight: 2 },
            { source: "esse_percipi", target: "causality_critique", type: "influence", weight: 2 },
            
            // БЕРКЛИ → КАНТ
            { source: "immaterialism", target: "phenomenon", type: "influence", weight: 2 },
            { source: "esse_percipi", target: "transcendental", type: "dialogue", weight: 1, bidirectional: true },
            
            // ЮМ
            { source: "impressions", target: "ideas_hume", type: "emerge_from", weight: 2 },
            { source: "causality_critique", target: "custom", type: "emerge_from", weight: 2 },
            { source: "bundle_theory", target: "impressions", type: "emerge_from", weight: 2 },
            { source: "is_ought", target: "natural_law", type: "critique", weight: 2 },
            { source: "causality_critique", target: "four_causes", type: "critique", weight: 2 },
            { source: "impressions", target: "innate_ideas", type: "critique", weight: 2 },
            { source: "causality_critique", target: "impressions", type: "ground", weight: 2 },
            { source: "custom", target: "ideas_hume", type: "mediate", weight: 2 },
            { source: "is_ought", target: "impressions", type: "ground", weight: 2 },
            
            // КАНТ
            { source: "thing_itself", target: "phenomenon", type: "oppose", weight: 3 },
            { source: "apriori", target: "phenomenon", type: "condition", weight: 2 },
            { source: "categorical", target: "autonomy", type: "presuppose", weight: 3 },
            { source: "synthetic_apriori", target: "transcendental", type: "exemplify", weight: 2 },
            { source: "transcendental", target: "apriori", type: "condition", weight: 2 },
            { source: "thing_itself", target: "ideas", type: "critique", weight: 2 },
            { source: "apriori", target: "impressions", type: "critique", weight: 2 },
            { source: "synthetic_apriori", target: "innate_ideas", type: "develop", weight: 2 },
            { source: "categorical", target: "natural_law", type: "develop", weight: 2 },
            { source: "categorical", target: "apriori", type: "emerge_from", weight: 3 },
            { source: "autonomy", target: "transcendental", type: "ground", weight: 2 },
            { source: "categorical", target: "phenomenon", type: "influence", weight: 1 },
            { source: "antinomies", target: "thing_itself", type: "limit", weight: 3 },
            { source: "transcendental", target: "antinomies", type: "ground", weight: 3 },
            { source: "synthetic_apriori", target: "antinomies", type: "influence", weight: 2 },
            { source: "sublime", target: "thing_itself", type: "influence", weight: 2 },
            { source: "sublime", target: "aesthetic_judgment", type: "ground", weight: 2 },
            { source: "sublime", target: "dionysian", type: "dialogue", weight: 1, bidirectional: true },
            { source: "postulates", target: "categorical", type: "condition", weight: 3 },
            { source: "postulates", target: "autonomy", type: "condition", weight: 3 },
            { source: "aesthetic_judgment", target: "phenomenon", type: "ground", weight: 2 },
            { source: "aesthetic_judgment", target: "transcendental", type: "ground", weight: 2 },
            
            // КАНТ → ГЕГЕЛЬ
            { source: "antinomies", target: "dialectic", type: "influence", weight: 3 },
            
            // КАНТ → ШОПЕНГАУЭР
            { source: "thing_itself", target: "will_schop", type: "develop", weight: 3 },
            { source: "phenomenon", target: "representation", type: "influence", weight: 2 },
            { source: "transcendental", target: "aesthetics_schop", type: "influence", weight: 2 },
            { source: "categorical", target: "compassion", type: "critique", weight: 2 },
            { source: "sublime", target: "aesthetics_schop", type: "influence", weight: 2 },
            
            // КАНТ → НИЦШЕ
            { source: "autonomy", target: "will_power", type: "critique", weight: 2 },
            { source: "postulates", target: "god_dead", type: "critique", weight: 2 },
            
            // ФИХТЕ
            { source: "absolute_ego", target: "non_ego", type: "oppose", weight: 3 },
            { source: "tathandlung", target: "absolute_ego", type: "presuppose", weight: 2 },
            { source: "striving", target: "non_ego", type: "ground", weight: 2 },
            { source: "practical_primacy", target: "tathandlung", type: "ground", weight: 2 },
            { source: "absolute_ego", target: "transcendental", type: "develop", weight: 3 },
            { source: "tathandlung", target: "cogito", type: "critique", weight: 2 },
            { source: "imagination", target: "absolute_ego", type: "mediate", weight: 3 },
            { source: "imagination", target: "non_ego", type: "mediate", weight: 3 },
            { source: "imagination", target: "tathandlung", type: "mediate", weight: 3 },
            { source: "wissenschaftslehre", target: "tathandlung", type: "presuppose", weight: 2 },
            { source: "wissenschaftslehre", target: "absolute_ego", type: "presuppose", weight: 2 },
            
            // ФИХТЕ → ГЕГЕЛЬ
            { source: "absolute_ego", target: "absolute_idea", type: "influence", weight: 3 },
            { source: "tathandlung", target: "dialectic", type: "influence", weight: 2 },
            
            // ГЕГЕЛЬ
            { source: "dialectic", target: "aufhebung", type: "instrument", weight: 3 },
            { source: "absolute_idea", target: "weltgeist", type: "ground", weight: 2 },
            { source: "dialectic", target: "absolute_idea", type: "instrument", weight: 3 },
            { source: "master_slave", target: "dialectic", type: "ground", weight: 2 },
            { source: "objective_spirit", target: "weltgeist", type: "ground", weight: 2 },
            { source: "cunning_reason", target: "weltgeist", type: "ground", weight: 2 },
            { source: "aufhebung", target: "non_ego", type: "synthesize", weight: 2 },
            { source: "dialectic", target: "thing_itself", type: "synthesize", weight: 2 },
            { source: "absolute_idea", target: "absolute_ego", type: "develop", weight: 3 },
            { source: "dialectic", target: "aufhebung", type: "instrument", weight: 3 },
            { source: "absolute_idea", target: "weltgeist", type: "ground", weight: 2 },
            { source: "dialectic", target: "absolute_idea", type: "instrument", weight: 3 },
            { source: "master_slave", target: "dialectic", type: "ground", weight: 2 },
            { source: "objective_spirit", target: "weltgeist", type: "ground", weight: 2 },
            { source: "cunning_reason", target: "weltgeist", type: "ground", weight: 2 },
            { source: "negative", target: "nothingness", type: "develop", weight: 2 },
            { source: "concrete", target: "abstract", type: "presuppose", weight: 3, bidirectional: true },
            { source: "abstract", target: "dialectic", type: "ground", weight: 2 },
            { source: "abstract", target: "aufhebung", type: "limit", weight: 2 },
            { source: "concrete", target: "absolute_idea", type: "culminate", weight: 2 },
            { source: "concrete", target: "dialectic", type: "ground", weight: 2 },
            
            // ГЕГЕЛЬ → МАРКС
            { source: "entfremdung", target: "alienation", type: "influence", weight: 3 },
            
            // ГЕГЕЛЬ → КЬЕРКЕГОР
            { source: "absolute_idea", target: "individual", type: "critique", weight: 3 },
            { source: "objective_spirit", target: "subjective_truth", type: "oppose", weight: 2 },
            { source: "dialectic", target: "stages_existence", type: "critique", weight: 2 },
            { source: "aufhebung", target: "leap_faith", type: "oppose", weight: 2 },
            
            // ШОПЕНГАУЭР
            { source: "will_schop", target: "representation", type: "oppose", weight: 3 },
            { source: "suffering", target: "will_schop", type: "emerge_from", weight: 2 },
            { source: "denial_will", target: "suffering", type: "complement", weight: 2 },
            { source: "aesthetics_schop", target: "denial_will", type: "instrument", weight: 2 },
            { source: "compassion", target: "denial_will", type: "instrument", weight: 2 },
            { source: "will_schop", target: "absolute_idea", type: "critique", weight: 3 },
            { source: "representation", target: "phenomenon", type: "develop", weight: 2 },
            { source: "individuation", target: "representation", type: "condition", weight: 3 },
            { source: "individuation", target: "will_schop", type: "oppose", weight: 2 },
            { source: "individuation", target: "suffering", type: "condition", weight: 2 },
            
            // ШОПЕНГАУЭР → ВИТГЕНШТЕЙН
            { source: "will_schop", target: "showing_saying", type: "influence", weight: 2 },
            { source: "representation", target: "picture_theory", type: "influence", weight: 2 },
            { source: "aesthetics_schop", target: "limits_language", type: "influence", weight: 1 },
            
            // КЬЕРКЕГОР
            { source: "stages_existence", target: "leap_faith", type: "culminate", weight: 2 },
            { source: "anxiety", target: "leap_faith", type: "condition", weight: 2 },
            { source: "despair", target: "anxiety", type: "ground", weight: 2 },
            { source: "individual", target: "subjective_truth", type: "presuppose", weight: 2 },
            { source: "subjective_truth", target: "leap_faith", type: "presuppose", weight: 2 },
            { source: "individual", target: "absolute_idea", type: "critique", weight: 2 },
            { source: "leap_faith", target: "dialectic", type: "critique", weight: 2 },
            { source: "repetition", target: "eternal_return", type: "dialogue", weight: 2, bidirectional: true },
            { source: "repetition", target: "stages_existence", type: "mediate", weight: 2 },
            { source: "moment", target: "leap_faith", type: "condition", weight: 3 },
            { source: "moment", target: "time_augustine", type: "develop", weight: 2 },
            { source: "moment", target: "anxiety", type: "ground", weight: 2 },
            
            // МАРКС
            { source: "praxis", target: "alienation", type: "complement", weight: 2 },
            { source: "base_superstructure", target: "class_struggle", type: "condition", weight: 2 },
            { source: "commodity_fetish", target: "alienation", type: "ground", weight: 2 },
            { source: "historical_materialism", target: "base_superstructure", type: "ground", weight: 2 },
            { source: "praxis", target: "tathandlung", type: "develop", weight: 2 },
            { source: "dialectic", target: "historical_materialism", type: "influence", weight: 3 },
            { source: "alienation", target: "objective_spirit", type: "critique", weight: 2 },
            { source: "historical_materialism", target: "praxis", type: "presuppose", weight: 2 },
            { source: "base_superstructure", target: "alienation", type: "ground", weight: 2 },
            { source: "class_struggle", target: "praxis", type: "ground", weight: 2 },
            { source: "commodity_fetish", target: "base_superstructure", type: "ground", weight: 2 },
            { source: "ideology", target: "base_superstructure", type: "ground", weight: 2 },
            { source: "ideology", target: "alienation", type: "mediate", weight: 2 },
            
            // МАРКС → ФУКО
            { source: "base_superstructure", target: "episteme", type: "dialogue", weight: 2, bidirectional: true },
            { source: "ideology", target: "power_knowledge", type: "dialogue", weight: 2, bidirectional: true },
            
            // НИЦШЕ
            { source: "will_power", target: "ubermensch", type: "culminate", weight: 3 },
            { source: "god_dead", target: "ubermensch", type: "ground", weight: 2 },
            { source: "eternal_return", target: "will_power", type: "presuppose", weight: 2 },
            { source: "perspectivism", target: "god_dead", type: "emerge_from", weight: 2 },
            { source: "master_morality", target: "slave_morality", type: "oppose", weight: 3 },
            { source: "will_schop", target: "will_power", type: "develop", weight: 3 },
            { source: "god_dead", target: "absolute_idea", type: "critique", weight: 3 },
            { source: "ubermensch", target: "categorical", type: "critique", weight: 2 },
            { source: "perspectivism", target: "thing_itself", type: "critique", weight: 2 },
            { source: "master_morality", target: "natural_law", type: "critique", weight: 2 },
            { source: "master_morality", target: "will_power", type: "exemplify", weight: 3 },
            { source: "master_morality", target: "ubermensch", type: "ground", weight: 3 },
            { source: "slave_morality", target: "god_dead", type: "influence", weight: 2 },
            { source: "dionysian", target: "apollonian", type: "presuppose", weight: 3 },
            { source: "dionysian", target: "apollonian", type: "internal_contradiction", weight: 3 },
            { source: "dionysian", target: "will_power", type: "presuppose", weight: 2 },
            { source: "apollonian", target: "will_power", type: "presuppose", weight: 2 },
            { source: "dionysian", target: "eternal_return", type: "influence", weight: 2 },
            { source: "apollonian", target: "representation", type: "dialogue", weight: 1, bidirectional: true },
            { source: "ressentiment", target: "slave_morality", type: "emerge_from", weight: 3 },
            { source: "ressentiment", target: "master_morality", type: "oppose", weight: 2 },
            { source: "ressentiment", target: "will_power", type: "oppose", weight: 2 },
            
            // НИЦШЕ → СОВРЕМЕННЫЕ
            { source: "perspectivism", target: "episteme", type: "influence", weight: 2 },
            { source: "will_power", target: "power_knowledge", type: "influence", weight: 2 },
            { source: "will_power", target: "desiring_machines", type: "influence", weight: 2 },
            { source: "eternal_return", target: "difference", type: "influence", weight: 2 },
            
            // СПИНОЗА → НИЦШЕ
            { source: "intellectual_love", target: "eternal_return", type: "influence", weight: 2 },
            { source: "determinism", target: "eternal_return", type: "dialogue", weight: 2, bidirectional: true },
            
            // ГУССЕРЛЬ
            { source: "intentionality", target: "epoché", type: "presuppose", weight: 3 },
            { source: "transcendental_ego", target: "eidetic", type: "instrument", weight: 2 },
            { source: "lifeworld", target: "epoché", type: "oppose", weight: 2 },
            { source: "eidetic", target: "intentionality", type: "ground", weight: 2 },
            { source: "transcendental_ego", target: "cogito", type: "develop", weight: 3 },
            { source: "epoché", target: "method", type: "develop", weight: 2 },
            { source: "noesis_noema", target: "intentionality", type: "presuppose", weight: 3 },
            { source: "noesis_noema", target: "eidetic", type: "ground", weight: 3 },
            { source: "constitution", target: "transcendental_ego", type: "presuppose", weight: 3 },
            { source: "constitution", target: "intentionality", type: "presuppose", weight: 3 },
            { source: "intersubjectivity", target: "lifeworld", type: "presuppose", weight: 2 },
            { source: "intersubjectivity", target: "look", type: "influence", weight: 2 },
            { source: "intersubjectivity", target: "transcendental_ego", type: "critique", weight: 2 },
            { source: "intentionality", target: "lifeworld", type: "condition", weight: 2 },
            
            // ДЕКАРТ → ГУССЕРЛЬ
            { source: "cogito", target: "transcendental_ego", type: "influence", weight: 2 },
            { source: "method", target: "epoché", type: "influence", weight: 2 },
            { source: "clear_distinct", target: "eidetic", type: "influence", weight: 2 },
            
            // ХАЙДЕГГЕР
            { source: "dasein", target: "sein", type: "condition", weight: 3 },
            { source: "geworfenheit", target: "sorge", type: "presuppose", weight: 2 },
            { source: "dasein", target: "geworfenheit", type: "presuppose", weight: 2 },
            { source: "sein_zum_tode", target: "dasein", type: "condition", weight: 2 },
            { source: "aletheia", target: "sein", type: "presuppose", weight: 2 },
            { source: "dwelling", target: "dasein", type: "ground", weight: 2 },
            { source: "sein", target: "absolute_idea", type: "critique", weight: 3 },
            { source: "dasein", target: "transcendental_ego", type: "critique", weight: 2 },
            { source: "sorge", target: "intentionality", type: "develop", weight: 2 },
            { source: "das_man", target: "dasein", type: "limit", weight: 2 },
            { source: "das_man", target: "geworfenheit", type: "influence", weight: 2 },
            { source: "das_man", target: "sein_zum_tode", type: "limit", weight: 2 },
            { source: "dwelling", target: "das_man", type: "oppose", weight: 2 },
            { source: "ereignis", target: "sein", type: "presuppose", weight: 3 },
            { source: "ereignis", target: "aletheia", type: "ground", weight: 3 },
            { source: "ereignis", target: "event", type: "dialogue", weight: 2, bidirectional: true },
            { source: "geviert", target: "dwelling", type: "condition", weight: 2 },
            { source: "geviert", target: "dasein", type: "ground", weight: 2 },
            { source: "kehre", target: "sein", type: "internal_contradiction", weight: 2 },
            { source: "kehre", target: "ereignis", type: "mediate", weight: 2 },
            
            // ХАЙДЕГГЕР → ФУКО
            { source: "aletheia", target: "archaeology", type: "influence", weight: 2 },
            { source: "dwelling", target: "care_self", type: "dialogue", weight: 2, bidirectional: true },
            
            // ВИТГЕНШТЕЙН
            { source: "language_game", target: "form_of_life", type: "presuppose", weight: 2 },
            { source: "picture_theory", target: "limits_language", type: "condition", weight: 2 },
            { source: "family_resemblance", target: "language_game", type: "presuppose", weight: 2 },
            { source: "limits_language", target: "categories", type: "critique", weight: 2 },
            { source: "language_game", target: "picture_theory", type: "critique", weight: 2 },
            { source: "picture_theory", target: "language_game", type: "internal_contradiction", weight: 2 },
            { source: "showing_saying", target: "limits_language", type: "condition", weight: 3 },
            { source: "showing_saying", target: "picture_theory", type: "ground", weight: 3 },
            { source: "private_language", target: "form_of_life", type: "limit", weight: 3 },
            { source: "private_language", target: "language_game", type: "ground", weight: 3 },
            { source: "rule_following", target: "language_game", type: "presuppose", weight: 3 },
            { source: "rule_following", target: "family_resemblance", type: "ground", weight: 3 },
            
            // АВГУСТИН → ВИТГЕНШТЕЙН
            { source: "confession", target: "language_game", type: "critique", weight: 1 },
            
            // САРТР
            { source: "existence", target: "nothingness", type: "presuppose", weight: 3 },
            { source: "freedom_sartre", target: "bad_faith", type: "oppose", weight: 3 },
            { source: "nothingness", target: "freedom_sartre", type: "condition", weight: 3 },
            { source: "for_itself", target: "in_itself", type: "oppose", weight: 3 },
            { source: "look", target: "for_itself", type: "ground", weight: 2 },
            { source: "existence", target: "dasein", type: "develop", weight: 2 },
            { source: "nothingness", target: "sein", type: "develop", weight: 2 },
            { source: "freedom_sartre", target: "geworfenheit", type: "dialogue", weight: 2, bidirectional: true },
            { source: "bad_faith", target: "dualism", type: "critique", weight: 2 },
            { source: "for_itself", target: "nothingness", type: "presuppose", weight: 2 },
            { source: "for_itself", target: "freedom_sartre", type: "ground", weight: 2 },
            { source: "look", target: "bad_faith", type: "influence", weight: 2 },
            { source: "in_itself", target: "existence", type: "ground", weight: 2 },
            { source: "project", target: "existence", type: "presuppose", weight: 3 },
            { source: "project", target: "freedom_sartre", type: "presuppose", weight: 3 },
            { source: "project", target: "for_itself", type: "ground", weight: 3 },
            { source: "engagement", target: "bad_faith", type: "oppose", weight: 2 },
            { source: "engagement", target: "praxis", type: "dialogue", weight: 2, bidirectional: true },
            { source: "engagement", target: "freedom_sartre", type: "culminate", weight: 2 },
            
            // КАНТ → САРТР
            { source: "phenomenon", target: "for_itself", type: "influence", weight: 2 },
            
            // ФУКО
            { source: "power_knowledge", target: "episteme", type: "presuppose", weight: 3 },
            { source: "discipline", target: "biopower", type: "emerge_from", weight: 2 },
            { source: "archaeology", target: "episteme", type: "instrument", weight: 2 },
            { source: "care_self", target: "care_soul", type: "develop", weight: 2 },
            { source: "power_knowledge", target: "transcendental", type: "critique", weight: 2 },
            { source: "episteme", target: "apriori", type: "critique", weight: 2 },
            { source: "biopower", target: "conatus", type: "develop", weight: 2 },
            { source: "discipline", target: "power_knowledge", type: "exemplify", weight: 3 },
            { source: "biopower", target: "episteme", type: "influence", weight: 2 },
            { source: "care_self", target: "discipline", type: "oppose", weight: 2 },
            { source: "panopticon", target: "discipline", type: "exemplify", weight: 3 },
            { source: "panopticon", target: "biopower", type: "ground", weight: 3 },
            { source: "heterotopia", target: "episteme", type: "influence", weight: 2 },
            { source: "heterotopia", target: "power_knowledge", type: "limit", weight: 2 },
            { source: "problematization", target: "archaeology", type: "instrument", weight: 2 },
            { source: "problematization", target: "care_self", type: "ground", weight: 2 },
            
            // ДЕЛЁЗ
            { source: "rhizome", target: "assemblage", type: "exemplify", weight: 2 },
            { source: "difference", target: "body_without_organs", type: "presuppose", weight: 2 },
            { source: "desiring_machines", target: "body_without_organs", type: "presuppose", weight: 2 },
            { source: "deterritorialization", target: "rhizome", type: "instrument", weight: 2 },
            { source: "difference", target: "dialectic", type: "critique", weight: 3 },
            { source: "rhizome", target: "weltgeist", type: "critique", weight: 2 },
            { source: "body_without_organs", target: "res_extensa", type: "critique", weight: 2 },
            { source: "desiring_machines", target: "conatus", type: "develop", weight: 2 },
            { source: "virtual_actual", target: "difference", type: "presuppose", weight: 3 },
            { source: "virtual_actual", target: "act_potency", type: "develop", weight: 2 },
            { source: "event", target: "ereignis", type: "dialogue", weight: 2, bidirectional: true },
            { source: "event", target: "difference", type: "exemplify", weight: 2 },
            { source: "fold", target: "body_without_organs", type: "apply", weight: 2 },
            { source: "fold", target: "rhizome", type: "presuppose", weight: 2 },
            
            // ДОПОЛНИТЕЛЬНЫЕ МЕЖКОНЦЕПТУАЛЬНЫЕ СВЯЗИ
            { source: "conatus", target: "will_power", type: "influence", weight: 2 },
            { source: "eternal_return", target: "dialectic", type: "critique", weight: 2 },
            { source: "compassion", target: "categorical", type: "influence", weight: 2 },
            { source: "alienation", target: "bad_faith", type: "influence", weight: 2 },
            { source: "determinism", target: "freedom_sartre", type: "oppose", weight: 2 },
            { source: "entelechy", target: "conatus", type: "influence", weight: 2 },
            { source: "original_sin", target: "geworfenheit", type: "influence", weight: 1 },
            { source: "look", target: "master_slave", type: "develop", weight: 2 },
            
            // ВНУТРЕННИЕ ПРОТИВОРЕЧИЯ
            { source: "thing_itself", target: "phenomenon", type: "internal_contradiction", weight: 3 },
            { source: "res_cogitans", target: "res_extensa", type: "internal_contradiction", weight: 3 },
            { source: "freedom_sartre", target: "bad_faith", type: "internal_contradiction", weight: 2 },
            { source: "will_schop", target: "denial_will", type: "internal_contradiction", weight: 2 },
            { source: "for_itself", target: "in_itself", type: "internal_contradiction", weight: 2 },
            { source: "absolute_ego", target: "non_ego", type: "internal_contradiction", weight: 2 },
            
            // ДУША В ИСТОРИИ ФИЛОСОФИИ
            { source: "soul", target: "tripartite_soul", type: "develop", weight: 2 },
            { source: "soul", target: "anamnesis", type: "influence", weight: 2 },
            { source: "soul", target: "entelechy", type: "influence", weight: 2 },
            { source: "soul", target: "confession", type: "influence", weight: 2 },
            { source: "soul", target: "res_cogitans", type: "influence", weight: 2 },
            { source: "soul", target: "despair", type: "influence", weight: 2 },
            
            // ИДЕОЛОГИЯ
            { source: "ideology", target: "absolute_idea", type: "critique", weight: 2 },
            { source: "ideology", target: "objective_spirit", type: "critique", weight: 2 },
            { source: "ideology", target: "power_knowledge", type: "dialogue", weight: 2, bidirectional: true },
            { source: "ideology", target: "episteme", type: "dialogue", weight: 2, bidirectional: true },
            { source: "ideology", target: "slave_morality", type: "dialogue", weight: 2, bidirectional: true },
            { source: "ideology", target: "bad_faith", type: "influence", weight: 2 },
            { source: "ideology", target: "perspectivism", type: "dialogue", weight: 2, bidirectional: true },
            { source: "ideology", target: "deterritorialization", type: "influence", weight: 1 },
            
            // АРИСТОТЕЛЬ: ЕЩЕ PHRONESIS
            { source: "phronesis", target: "practical_primacy", type: "influence", weight: 2 },
            { source: "eudaimonia", target: "categorical", type: "dialogue", weight: 2, bidirectional: true },
            
            // Внутри Локка
            { source: "personal_identity", target: "property_theory", type: "presuppose", weight: 3 },
            { source: "tabula_rasa", target: "property_theory", type: "ground", weight: 2 },
            
            // С предшественниками
            { source: "natural_law", target: "property_theory", type: "influence", weight: 2 },
            
            // С Марксом
            { source: "property_theory", target: "alienation", type: "critique", weight: 3 },
            { source: "property_theory", target: "base_superstructure", type: "influence", weight: 2 },
            { source: "ideology", target: "property_theory", type: "critique", weight: 2 },
            
            // С Гегелем 
            { source: "property_theory", target: "objective_spirit", type: "influence", weight: 2 },

            // === ПАРМЕНИД ===
    
            // Внутренние связи
            { source: "way_truth", target: "way_opinion", type: "oppose", weight: 2 },
            { source: "being_is", target: "one_being", type: "presuppose", weight: 3 },
            { source: "way_truth", target: "being_is", type: "instrument", weight: 3 },
            { source: "way_opinion", target: "way_truth", type: "oppose", weight: 3 },
            { source: "immutability", target: "one_being", type: "presuppose", weight: 3 },
            { source: "sphere_being", target: "one_being", type: "exemplify", weight: 2 },
            
            // Парменид → Платон
            { source: "being_is", target: "ideas", type: "influence", weight: 3 },
            { source: "one_being", target: "eidos", type: "influence", weight: 3 },
            { source: "immutability", target: "ideas", type: "influence", weight: 2 },
            { source: "way_truth", target: "anamnesis", type: "influence", weight: 2 },
            { source: "way_opinion", target: "cave", type: "influence", weight: 2 },
            
            // Парменид → Аристотель
            { source: "being_is", target: "categories", type: "influence", weight: 2 },
            { source: "immutability", target: "unmoved_mover", type: "influence", weight: 2 },
            
            // Парменид → Другие
            { source: "being_is", target: "sein", type: "influence", weight: 2 },
            { source: "way_truth", target: "aletheia", type: "influence", weight: 2 },
            
            // === ГЕРАКЛИТ ===
            
            // Внутренние связи
            { source: "panta_rhei", target: "fire", type: "exemplify", weight: 3 },
            { source: "logos_heraclitus", target: "unity_opposites", type: "presuppose", weight: 3 },
            { source: "war_father", target: "unity_opposites", type: "ground", weight: 3 },
            { source: "hidden_harmony", target: "unity_opposites", type: "emerge_from", weight: 2 },
            { source: "fire", target: "logos_heraclitus", type: "ground", weight: 2 },
            
            // Гераклит ↔ Парменид (оппозиция)
            { source: "panta_rhei", target: "immutability", type: "oppose", weight: 3 },
            { source: "fire", target: "one_being", type: "oppose", weight: 2 },
            
            // Гераклит → Платон
            { source: "logos_heraclitus", target: "logos", type: "influence", weight: 2 },
            { source: "panta_rhei", target: "cave", type: "influence", weight: 1 },
            
            // Гераклит → Гегель (ключевое!)
            { source: "unity_opposites", target: "dialectic", type: "influence", weight: 3 },
            { source: "war_father", target: "negative", type: "influence", weight: 3 },
            { source: "hidden_harmony", target: "aufhebung", type: "influence", weight: 2 },
            { source: "panta_rhei", target: "dialectic", type: "influence", weight: 2 },
            
            // Гераклит → Ницше
            { source: "war_father", target: "will_power", type: "influence", weight: 2 },
            { source: "unity_opposites", target: "dionysian", type: "influence", weight: 2 },
            
            // Гераклит → Делёз
            { source: "panta_rhei", target: "difference", type: "influence", weight: 2 },
            { source: "fire", target: "desiring_machines", type: "influence", weight: 1 },
            
            // === ПИФАГОР ===
            
            // Внутренние связи
            { source: "number_essence", target: "harmony_spheres", type: "presuppose", weight: 3 },
            { source: "tetraktys", target: "number_essence", type: "exemplify", weight: 2 },
            { source: "music_mathematics", target: "harmony_spheres", type: "apply", weight: 2 },
            { source: "metempsychosis", target: "harmony_spheres", type: "influence", weight: 1 },
            
            // Пифагор → Парменид
            { source: "number_essence", target: "sphere_being", type: "influence", weight: 1 },
            
            // Пифагор → Платон
            { source: "number_essence", target: "ideas", type: "influence", weight: 3 },
            { source: "harmony_spheres", target: "demiurge", type: "influence", weight: 2 },
            { source: "metempsychosis", target: "anamnesis", type: "influence", weight: 2 },
            { source: "metempsychosis", target: "tripartite_soul", type: "influence", weight: 2 },
            { source: "tetraktys", target: "good", type: "influence", weight: 1 },
            
            // Пифагор → Аристотель
            { source: "number_essence", target: "form", type: "influence", weight: 2 },
            { source: "harmony_spheres", target: "unmoved_mover", type: "influence", weight: 1 },
            
            // Пифагор → Другие
            { source: "music_mathematics", target: "aesthetic_judgment", type: "influence", weight: 1 },
            
            // === ФРЭНСИС БЭКОН ===
            
            // Внутренние связи
            { source: "idols", target: "idols_tribe", type: "exemplify", weight: 2 },
            { source: "idols", target: "idols_cave", type: "exemplify", weight: 2 },
            { source: "idols", target: "idols_marketplace", type: "exemplify", weight: 2 },
            { source: "idols", target: "idols_theatre", type: "exemplify", weight: 2 },
            { source: "induction", target: "new_organon", type: "instrument", weight: 3 },
            { source: "knowledge_power", target: "new_organon", type: "culminate", weight: 2 },
            { source: "idols", target: "knowledge_power", type: "limit", weight: 2 },
            
            // Бэкон → Декарт (оппозиция)
            { source: "induction", target: "method", type: "dialogue", weight: 2, bidirectional: true },
            { source: "idols_cave", target: "clear_distinct", type: "dialogue", weight: 1, bidirectional: true },
            
            // Бэкон → Локк (ключевое влияние)
            { source: "induction", target: "tabula_rasa", type: "influence", weight: 3 },
            { source: "new_organon", target: "simple_ideas", type: "influence", weight: 2 },
            { source: "idols", target: "primary_qualities", type: "influence", weight: 2 },
            
            // Бэкон → Юм
            { source: "induction", target: "custom", type: "influence", weight: 2 },
            { source: "idols_marketplace", target: "impressions", type: "influence", weight: 1 },
            
            // Бэкон → Конт
            { source: "knowledge_power", target: "positive_knowledge", type: "influence", weight: 2 },
            { source: "new_organon", target: "hierarchy_sciences", type: "influence", weight: 2 },
            
            // Бэкон и язык
            { source: "idols_marketplace", target: "language_game", type: "influence", weight: 2 },
            
            // === ОГЮСТ КОНТ ===
            
            // Внутренние связи
            { source: "three_stages", target: "positive_knowledge", type: "culminate", weight: 3 },
            { source: "positive_knowledge", target: "sociology", type: "apply", weight: 3 },
            { source: "hierarchy_sciences", target: "positive_knowledge", type: "ground", weight: 2 },
            { source: "social_physics", target: "sociology", type: "ground", weight: 2 },
            { source: "hierarchy_sciences", target: "sociology", type: "culminate", weight: 2 },
            
            // Конт → Дьюи
            { source: "positive_knowledge", target: "instrumentalism", type: "influence", weight: 2 },
            { source: "sociology", target: "democracy_education", type: "influence", weight: 2 },
            
            // Конт ↔ Кант
            { source: "three_stages", target: "antinomies", type: "critique", weight: 2 },
            { source: "positive_knowledge", target: "thing_itself", type: "critique", weight: 2 },
            
            // Конт ↔ Гегель
            { source: "three_stages", target: "weltgeist", type: "dialogue", weight: 2, bidirectional: true },
            { source: "positive_knowledge", target: "absolute_idea", type: "critique", weight: 2 },
            
            // Конт → Фуко
            { source: "three_stages", target: "episteme", type: "influence", weight: 2 },
            { source: "sociology", target: "discipline", type: "influence", weight: 1 },
            
            // === ДЖОН ДЬЮИ ===
            
            // Внутренние связи
            { source: "instrumentalism", target: "inquiry", type: "presuppose", weight: 3 },
            { source: "experience_dewey", target: "inquiry", type: "condition", weight: 3 },
            { source: "learning_doing", target: "inquiry", type: "instrument", weight: 2 },
            { source: "warranted_assertibility", target: "instrumentalism", type: "presuppose", weight: 3 },
            { source: "democracy_education", target: "experience_dewey", type: "ground", weight: 2 },
            
            // Дьюи ← Локк
            { source: "tabula_rasa", target: "experience_dewey", type: "influence", weight: 2 },
            { source: "complex_ideas", target: "inquiry", type: "influence", weight: 1 },
            
            // Дьюи ← Юм
            { source: "custom", target: "warranted_assertibility", type: "influence", weight: 2 },
            
            // Дьюи ← Кант
            { source: "practical_primacy", target: "instrumentalism", type: "influence", weight: 2 },
            
            // Дьюи ↔ Фихте
            { source: "inquiry", target: "tathandlung", type: "dialogue", weight: 2, bidirectional: true },
            { source: "instrumentalism", target: "practical_primacy", type: "develop", weight: 2 },
            
            // Дьюи ↔ Маркс
            { source: "inquiry", target: "praxis", type: "dialogue", weight: 2, bidirectional: true },
            { source: "democracy_education", target: "historical_materialism", type: "dialogue", weight: 1, bidirectional: true },
            
            // Дьюи → Витгенштейн
            { source: "learning_doing", target: "form_of_life", type: "influence", weight: 2 },
            
            // === ГОТЛОБ ФРЕГЕ ===
            
            // Внутренние связи
            { source: "sense_reference", target: "function_argument", type: "presuppose", weight: 3 },
            { source: "context_principle", target: "sense_reference", type: "condition", weight: 3 },
            { source: "logicism", target: "begriffsschrift", type: "instrument", weight: 3 },
            { source: "function_argument", target: "begriffsschrift", type: "ground", weight: 2 },
            { source: "thought", target: "sense_reference", type: "presuppose", weight: 2 },
            
            // Фреге ← Лейбниц
            { source: "sufficient_reason", target: "logicism", type: "influence", weight: 2 },
            
            // Фреге ← Кант
            { source: "synthetic_apriori", target: "logicism", type: "critique", weight: 2 },
            
            // Фреге → Рассел
            { source: "logicism", target: "logical_atomism", type: "influence", weight: 3 },
            { source: "sense_reference", target: "theory_descriptions", type: "influence", weight: 3 },
            { source: "function_argument", target: "logical_atomism", type: "influence", weight: 2 },
            { source: "begriffsschrift", target: "logical_atomism", type: "influence", weight: 2 },
            
            // Фреге → Витгенштейн
            { source: "sense_reference", target: "picture_theory", type: "influence", weight: 3 },
            { source: "context_principle", target: "language_game", type: "influence", weight: 2 },
            { source: "thought", target: "showing_saying", type: "influence", weight: 2 },
            
            // Фреге → Гуссерль
            { source: "thought", target: "noesis_noema", type: "dialogue", weight: 2, bidirectional: true },
            { source: "sense_reference", target: "intentionality", type: "influence", weight: 1 },
            
            // === БЕРТРАН РАССЕЛ ===
            
            // Внутренние связи
            { source: "logical_atomism", target: "theory_descriptions", type: "instrument", weight: 3 },
            { source: "acquaintance_description", target: "sense_data", type: "presuppose", weight: 3 },
            { source: "sense_data", target: "external_world", type: "ground", weight: 2 },
            { source: "russell_paradox", target: "logical_atomism", type: "ground", weight: 2 },
            { source: "theory_descriptions", target: "acquaintance_description", type: "presuppose", weight: 2 },
            
            // Рассел ← Локк
            { source: "simple_ideas", target: "sense_data", type: "influence", weight: 2 },
            { source: "primary_qualities", target: "external_world", type: "influence", weight: 2 },
            
            // Рассел ← Юм
            { source: "impressions", target: "sense_data", type: "influence", weight: 3 },
            { source: "ideas_hume", target: "acquaintance_description", type: "influence", weight: 2 },
            
            // Рассел → Витгенштейн
            { source: "logical_atomism", target: "picture_theory", type: "influence", weight: 3 },
            { source: "logical_atomism", target: "limits_language", type: "influence", weight: 2 },
            { source: "theory_descriptions", target: "language_game", type: "influence", weight: 2 },
            
            // Рассел ↔ Гуссерль
            { source: "sense_data", target: "epoché", type: "dialogue", weight: 1, bidirectional: true },
            
            // === ЖАК ЛАКАН ===
            
            // Внутренние связи
            { source: "three_registers", target: "mirror_stage", type: "presuppose", weight: 3 },
            { source: "big_other", target: "three_registers", type: "presuppose", weight: 3 },
            { source: "desire_other", target: "objet_petit_a", type: "presuppose", weight: 3 },
            { source: "lack", target: "desire_other", type: "condition", weight: 3 },
            { source: "signifier", target: "big_other", type: "presuppose", weight: 2 },
            { source: "mirror_stage", target: "lack", type: "emerge_from", weight: 2 },
            
            // Лакан ← Декарт
            { source: "cogito", target: "mirror_stage", type: "critique", weight: 2 },
            
            // Лакан ← Гегель
            { source: "master_slave", target: "mirror_stage", type: "influence", weight: 3 },
            { source: "dialectic", target: "desire_other", type: "influence", weight: 2 },
            
            // Лакан ← Кьеркегор
            { source: "anxiety", target: "lack", type: "influence", weight: 2 },
            { source: "despair", target: "lack", type: "influence", weight: 2 },
            
            // Лакан ← Сартр
            { source: "look", target: "mirror_stage", type: "influence", weight: 2 },
            { source: "nothingness", target: "lack", type: "influence", weight: 2 },
            { source: "for_itself", target: "desire_other", type: "influence", weight: 2 },
            
            // Лакан ← Хайдеггер
            { source: "das_man", target: "big_other", type: "influence", weight: 2 },
            
            // Лакан ↔ Витгенштейн
            { source: "signifier", target: "language_game", type: "dialogue", weight: 2, bidirectional: true },
            { source: "big_other", target: "form_of_life", type: "dialogue", weight: 2, bidirectional: true },
            
            // Лакан ↔ Фуко
            { source: "big_other", target: "power_knowledge", type: "dialogue", weight: 2, bidirectional: true },
            { source: "desire_other", target: "biopower", type: "dialogue", weight: 1, bidirectional: true },
            
            // Лакан ↔ Делёз
            { source: "desire_other", target: "desiring_machines", type: "dialogue", weight: 3, bidirectional: true },
            { source: "objet_petit_a", target: "body_without_organs", type: "dialogue", weight: 2, bidirectional: true },
            { source: "three_registers", target: "rhizome", type: "dialogue", weight: 1, bidirectional: true },
            
            // === ДОПОЛНИТЕЛЬНЫЕ МЕЖФИЛОСОФСКИЕ СВЯЗИ ===
            
            // Досократики между собой
            { source: "number_essence", target: "being_is", type: "dialogue", weight: 2, bidirectional: true },
            { source: "logos_heraclitus", target: "logos", type: "influence", weight: 3 },
            
            // Бэкон ↔ Спиноза
            { source: "induction", target: "adequate_ideas", type: "dialogue", weight: 1, bidirectional: true },
            
            // Конт ↔ Ницше
            { source: "positive_knowledge", target: "perspectivism", type: "oppose", weight: 2 },
            { source: "three_stages", target: "god_dead", type: "dialogue", weight: 1, bidirectional: true },
            
            // Дьюи ↔ Хайдеггер
            { source: "experience_dewey", target: "dasein", type: "dialogue", weight: 2, bidirectional: true },
            { source: "inquiry", target: "sorge", type: "dialogue", weight: 1, bidirectional: true },
            
            // Рассел ↔ Хайдеггер
            { source: "logical_atomism", target: "sein", type: "oppose", weight: 2 },
            { source: "external_world", target: "dasein", type: "dialogue", weight: 1, bidirectional: true },

            // === АНРИ БЕРГСОН ===
    
            // ВНУТРЕННИЕ СВЯЗИ (13 связей)
            { source: "duree", target: "elan_vital", type: "presuppose", weight: 3 },
            { source: "intuition_bergson", target: "duree", type: "instrument", weight: 3 },
            { source: "intellect_spatialization", target: "intuition_bergson", type: "oppose", weight: 3 },
            { source: "creative_evolution", target: "elan_vital", type: "presuppose", weight: 3 },
            { source: "duree", target: "creative_evolution", type: "presuppose", weight: 3 },
            { source: "matter_memory", target: "duree", type: "presuppose", weight: 2 },
            { source: "pure_perception", target: "matter_memory", type: "presuppose", weight: 2 },
            { source: "image_bergson", target: "pure_perception", type: "ground", weight: 2 },
            { source: "open_closed_morality", target: "elan_vital", type: "emerge_from", weight: 2 },
            { source: "open_closed_morality", target: "creative_evolution", type: "ground", weight: 2 },
            { source: "laughter", target: "intellect_spatialization", type: "influence", weight: 1 },
            { source: "laughter", target: "elan_vital", type: "ground", weight: 1 },
            { source: "intuition_bergson", target: "image_bergson", type: "instrument", weight: 2 }, 

            // СВЯЗИ С ПРЕДШЕСТВЕННИКАМИ
            
            // Бергсон ← Кант (критика априоризма)
            { source: "duree", target: "apriori", type: "critique", weight: 2 }, 
            { source: "intuition_bergson", target: "thing_itself", type: "develop", weight: 2 }, 

            // Бергсон ← Спиноза (сильное влияние!)
            { source: "conatus", target: "elan_vital", type: "influence", weight: 3 }, 
            { source: "intellectual_love", target: "intuition_bergson", type: "influence", weight: 1 }, 

            // Бергсон ← Шопенгауэр (важнейший источник)
            { source: "will_schop", target: "elan_vital", type: "influence", weight: 3 }, 
            { source: "representation", target: "intellect_spatialization", type: "influence", weight: 2 }, 

            // Бергсон ← Ницше (современники, параллели)
            { source: "will_power", target: "elan_vital", type: "influence", weight: 2 }, 
            { source: "dionysian", target: "duree", type: "influence", weight: 1 }, 

            // СВЯЗИ С СОВРЕМЕННИКАМИ
            
            // Бергсон ↔ Гуссерль (параллельные разработки)
            { source: "duree", target: "lifeworld", type: "dialogue", weight: 2, bidirectional: true }, 
            { source: "intuition_bergson", target: "eidetic", type: "dialogue", weight: 1, bidirectional: true }, 
            { source: "pure_perception", target: "intentionality", type: "dialogue", weight: 2, bidirectional: true }, 

            // Бергсон vs Рассел (известная полемика)
            { source: "duree", target: "logical_atomism", type: "oppose", weight: 2 }, 
            { source: "intuition_bergson", target: "sense_data", type: "critique", weight: 1 }, 

            // ВЛИЯНИЕ НА ПОСЛЕДОВАТЕЛЕЙ
            
            // Бергсон → Хайдеггер (Хайдеггер критикует, но испытывает влияние)
            { source: "duree", target: "sein_zum_tode", type: "influence", weight: 1 }, 

            // Бергсон → Сартр (признанное влияние)
            { source: "duree", target: "for_itself", type: "influence", weight: 2 }, 
            { source: "creative_evolution", target: "freedom_sartre", type: "influence", weight: 2 }, 
            { source: "intuition_bergson", target: "nothingness", type: "influence", weight: 1 }, 

            // Бергсон → Мерло-Понти (через восприятие и тело)
            { source: "pure_perception", target: "dasein", type: "influence", weight: 1 }, 
            { source: "image_bergson", target: "dasein", type: "influence", weight: 1 }, 

            // Бергсон → Делёз (ключевое влияние! Делёз написал "Бергсонизм")
            { source: "duree", target: "difference", type: "influence", weight: 3 }, 
            { source: "elan_vital", target: "desiring_machines", type: "influence", weight: 3 }, 
            { source: "creative_evolution", target: "virtual_actual", type: "influence", weight: 3 }, 
            { source: "intuition_bergson", target: "event", type: "influence", weight: 2 }, 
            { source: "matter_memory", target: "virtual_actual", type: "influence", weight: 3 }, 
            { source: "image_bergson", target: "assemblage", type: "influence", weight: 2 }, 
            { source: "duree", target: "rhizome", type: "influence", weight: 1 }
            
        ];

        // Создаём карту философов по id -> имя на русском
        const philosopherIdToName = {};
        philosophers.forEach(p => {
            philosopherIdToName[p.id] = p.nameRu;
        });
        
        // Создаём объект philosopherConcepts для совместимости с существующим кодом
        const philosopherConcepts = {};
        philosophers.forEach(p => {
            philosopherConcepts[p.nameRu] = {
                color: p.color,
                years: p.years
            };
        });
        
        // Создаём объект philosopherOrder (уже есть в старом коде, но можно регенерировать)
        const philosopherOrder = {};
        philosophers.forEach(p => {
            philosopherOrder[p.nameRu] = p.birth;
        });
        
        // Преобразуем relationTypes из массива в объект
        const relationTypesObj = {};
        relationTypes.forEach(rt => {
            relationTypesObj[rt.id] = {
                color: rt.color,
                label: rt.label
            };
        });
        
        // Создаём nodes из concepts
        const nodes = concepts.map(c => ({
            id: c.id,
            label: c.label,
            concept: philosopherIdToName[c.philosopher], // Преобразуем id в имя
            description: c.description,
            extendedDescription: c.extendedDescription
        }));
        
        // Создаём links из relations
        const links = relations.map(r => ({
            source: r.source,
            target: r.target,
            type: r.type,
            weight: r.weight || 2, // Вес по умолчанию, если не указан
            bidirectional: r.bidirectional || false
        }));
        
        // Создаём обратный индекс концепция -> рубрики
        const conceptToRubrics = {};
        concepts.forEach(c => {
            conceptToRubrics[c.id] = c.rubrics || [];
        });
        
        // Создаём объект rubrics для совместимости
        const rubricsObj = {};
        rubrics.forEach(r => {
            rubricsObj[r.name] = {
                concepts: concepts.filter(c => c.rubrics && c.rubrics.includes(r.id)).map(c => c.id),
                description: r.description
            };
        });
        
        // Индивидуальные веса для связей (примеры ключевых связей)
        const specificWeights = {
            // Фундаментальные сильные связи (вес 3)
            "ideas-form": 3,                    // Платон → Аристотель (критика идей)
            "eidos-form": 3,                    // Эйдос → Форма (развитие)
            "cogito-dualism": 3,                // Cogito обосновывает дуализм
            "substance_spinoza-modes": 3,       // Субстанция обосновывает модусы
            "dialectic-absolute_idea": 3,       // Диалектика обосновывает абсолютную идею
            "will_schop-representation": 3,     // Воля противостоит представлению
            "thing_itself-phenomenon": 3,       // Вещь в себе vs феномен
            "existence-nothingness": 3,         // Существование обосновывает Ничто
            "intentionality-epoché": 3,         // Интенциональность обосновывает эпохе
            "dasein-sein": 3,                   // Dasein обосновывает Sein
            
            // Исторически значимые влияния (вес 3)
            "form-essence_existence": 3,        // Аристотель → Фома
            "absolute_ego-absolute_idea": 3,    // Фихте → Гегель
            "dialectic-historical_materialism": 3, // Гегель → Маркс
            "will_schop-will_power": 3,         // Шопенгауэр → Ницше
            "transcendental-absolute_ego": 3,   // Кант → Фихте
            
            // Внутренние противоречия (вес 2-3 в зависимости от центральности)
            "thing_itself-phenomenon_internal": 3, // Центральная антиномия Канта
            "res_cogitans-res_extensa_internal": 3, // Центральная проблема Декарта
            "freedom_sartre-bad_faith_internal": 2, // Важная, но не единственная тема
            
            // Средние связи (вес 2) - существенные, но не критичные
            "maieutics-anamnesis": 2,
            "care_soul-tripartite_soul": 2,
            "four_causes-five_ways": 2,
            "impressions-ideas_hume": 2,
            "apriori-phenomenon": 2,
            "master_slave-dialectic": 2,
            
            // Слабые связи (вес 1) - косвенные влияния
            "daimonion-subjective_truth": 1,    // Дальняя связь Сократ → Кьеркегор
            "demiurge-best_worlds": 1,          // Периферийное влияние
            "tripartite_soul-golden_mean": 1,   // Косвенное влияние
            "geworfenheit-original_sin": 1,     // Тематическая параллель, не прямое влияние
            
            // Аристотель
            "act_potency-form": 3,
            "act_potency-matter_ar": 3,
            "act_potency-entelechy": 3,
            "act_potency-essence_existence": 3,  // Ключевое влияние на томизм
            
            // Платон
            "good-ideas": 3,
            "good-eidos": 3,
            "eros-anamnesis": 2,
            "eros-good": 2,
            
            // Гегель
            "dialectic-entfremdung": 2,
            "entfremdung-objective_spirit": 2,
            "entfremdung-alienation": 3,  // Важная историческая связь
            
            // Кант
            "antinomies-thing_itself": 3,
            "antinomies-dialectic": 3,  // Ключевое влияние
            
            // Ницше
            "dionysian-apollonian": 3,  // Центральная оппозиция
            "dionysian-will_power": 2,
            "apollonian-will_power": 2,
            "ressentiment-slave_morality": 3,
            
            // Хайдеггер
            "das_man-dasein": 2,
            
            // Платон: новые веса
            "methexis-eidos": 3,                    // Центральная связь платонизма
            "methexis-cave": 2,
            "mimesis-methexis": 2,
            "chora-demiurge": 2,
            
            // Аристотель: новые веса
            "phronesis-golden_mean": 3,
            "phronesis-virtue_knowledge": 3,        // Развитие сократовской этики
            "eudaimonia-entelechy": 3,
            "logos-form": 3,
            "eudaimonia-categorical": 2,            // Важная критика Кантом
            
            // Фома: новые веса
            "participatio-methexis": 3,             // Ключевое историческое влияние
            "participatio-essence_existence": 3,
            "actual_being-act_potency": 3,
            
            // Спиноза: новые веса
            "natura_naturans-substance_spinoza": 3,
            "natura_naturata-modes": 3,
            "adequate_ideas-intellectual_love": 2,
            
            // Лейбниц: новые веса
            "apperception-monads": 3,
            "apperception-intentionality": 2,       // Важное влияние на феноменологию
            
            // Кант: новые веса
            "sublime-thing_itself": 2,
            "postulates-categorical": 3,
            "aesthetic_judgment-transcendental": 2,
            
            // Фихте: новые веса
            "imagination-absolute_ego": 3,
            "imagination-non_ego": 3,
            "wissenschaftslehre-tathandlung": 2,
            
            // Гегель: новые веса
            "negative-dialectic": 3,                // Центральная концепция
            "negative-aufhebung": 3,
            "concrete-absolute_idea": 2,
            "concrete-abstract": 3,                 // Центральная оппозиция Гегеля
            "abstract-dialectic": 2,
            "abstract-aufhebung": 2,
            
            // Шопенгауэр: новые веса
            "individuation-representation": 3,
            "individuation-will_schop": 2,
            
            // Кьеркегор: новые веса
            "repetition-eternal_return": 2,
            "moment-leap_faith": 3,
            "moment-time_augustine": 2,
            
            // Гуссерль: новые веса
            "noesis_noema-intentionality": 3,       // Центральная структура
            "constitution-transcendental_ego": 3,
            "intersubjectivity-lifeworld": 2,
            
            // Хайдеггер: новые веса
            "ereignis-sein": 3,                     // Поздний Хайдеггер
            "geviert-dwelling": 2,
            "kehre-sein": 2,
            
            // Витгенштейн: новые веса
            "showing_saying-limits_language": 3,    // Tractatus
            "private_language-form_of_life": 3,    // Философские исследования
            "rule_following-language_game": 3,
            
            // Сартр: новые веса
            "project-existence": 3,
            "project-freedom_sartre": 3,
            "engagement-bad_faith": 2,
            
            // Фуко: новые веса
            "panopticon-discipline": 3,             // Знаменитый анализ
            "problematization-archaeology": 2,
            
            // Делёз: новые веса
            "virtual_actual-difference": 3,
            "event-ereignis": 2,
            "fold-body_without_organs": 2
            
        };
        
        // Назначаем веса из relations, если они уже есть
        links.forEach(link => {
            const key = getLinkKey(link);
            const reverseKey = `${typeof link.target === 'string' ? link.target : link.target.id}-${typeof link.source === 'string' ? link.source : link.source.id}`;
            
            // Если вес уже задан в relations, используем его
            if (link.weight) {
                // Ничего не делаем, вес уже установлен
            }
            // Проверяем специфический вес
            else if (specificWeights[key]) {
                link.weight = specificWeights[key];
            } else if (specificWeights[reverseKey] && link.bidirectional) {
                link.weight = specificWeights[reverseKey];
            } else {
                // Вес по умолчанию в зависимости от типа связи
                switch(link.type) {
                    case "ground":
                    case "develop":
                    case "synthesize":
                        link.weight = 2;
                        break;
                    case "internal_contradiction":
                        link.weight = 2;
                        break;
                    case "influence":
                    case "dialogue":
                        link.weight = 1;
                        break;
                    case "oppose":
                    case "critique":
                        link.weight = 2;
                        break;
                    default:
                        link.weight = 2;
                }
            }
        });
        
        // Глобальные переменные для переключения режимов расчёта
        let useWeightedPaths = true;
        let respectDirection = true;

        // Независимые настройки для поиска пути
        let useWeightsInPathFinding = true;
        let respectDirectionInPathFinding = true;

        // Режимы строгости хронологии
        const CHRONOLOGY_MODES = {
            STRICT: 'strict',       // Строгая: учёт реальных периодов активности
            MODERATE: 'moderate',   // Умеренная: окно ±50 лет от рождения
            LOOSE: 'loose'          // Свободная: окно ±100 лет от рождения
        };

        // Текущий режим хронологии (по умолчанию строгий)
        let currentChronologyMode = CHRONOLOGY_MODES.STRICT;

        // Возраст начала интеллектуальной активности
        const MATURITY_AGE = 25;

        // Функция для генерации ключа связи
        function getLinkKey(link) {
            const source = typeof link.source === 'string' ? link.source : link.source.id;
            const target = typeof link.target === 'string' ? link.target : link.target.id;
            return `${source}-${target}`;
        }
        
        // Назначаем веса
        links.forEach(link => {
            const key = getLinkKey(link);
            const reverseKey = `${typeof link.target === 'string' ? link.target : link.target.id}-${typeof link.source === 'string' ? link.source : link.source.id}`;
            
            // Проверяем специфический вес
            if (specificWeights[key]) {
                link.weight = specificWeights[key];
            } else if (specificWeights[reverseKey] && link.bidirectional) {
                link.weight = specificWeights[reverseKey];
            } else {
                // Вес по умолчанию в зависимости от типа связи
                switch(link.type) {
                    case "ground":
                    case "develop":
                    case "synthesize":
                        link.weight = 2; // По умолчанию среднее для этих типов
                        break;
                    case "internal_contradiction":
                        link.weight = 2; // Противоречия обычно важны
                        break;
                    case "influence":
                    case "dialogue":
                        link.weight = 1; // По умолчанию слабое для косвенных влияний
                        break;
                    case "oppose":
                    case "critique":
                        link.weight = 2; // Критика обычно существенна
                        break;
                    default:
                        link.weight = 2;
                }
            }
        });
        
        // Дополнительная логика: усиливаем веса для связей внутри одного философа
        links.forEach(link => {
            const sourceNode = nodes.find(n => n.id === (typeof link.source === 'string' ? link.source : link.source.id));
            const targetNode = nodes.find(n => n.id === (typeof link.target === 'string' ? link.target : link.target.id));
            
            // Если связь внутри системы одного философа и это ground/synthesize
            if (sourceNode && targetNode && 
                sourceNode.concept === targetNode.concept && 
                (link.type === "ground" || link.type === "synthesize")) {
                // Увеличиваем вес на 1, но не больше 3
                link.weight = Math.min(link.weight + 1, 3);
            }
        });
        
        // Состояние фильтров
        let selectedPhilosophers = new Set(Object.keys(philosopherConcepts));
        let selectedRelations = new Set(Object.keys(relationTypesObj));
        
        // Режимы фильтрации: 'all' - только выбранные, 'internal' - только внутренние, 'context' - с соседними
        let filterMode = 'all';
        
        // Инициализация селектов для поиска пути
        function initPathFinder() {
            const sourceSelect = document.getElementById('sourceSelect');
            const targetSelect = document.getElementById('targetSelect');
            
            nodes.forEach(node => {
                const option1 = document.createElement('option');
                option1.value = node.id;
                option1.textContent = `${node.label} (${node.concept})`;
                sourceSelect.appendChild(option1);
                
                const option2 = document.createElement('option');
                option2.value = node.id;
                option2.textContent = `${node.label} (${node.concept})`;
                targetSelect.appendChild(option2);
            });
        }
        
        // ============================================
        // ПРОВЕРКА ХРОНОЛОГИЧЕСКОЙ КОРРЕКТНОСТИ
        // ============================================

        /**
         * Строгая проверка хронологии: учитывает реальные периоды активности
         * @param {Object} fromPhil - Философ "от кого"
         * @param {Object} toPhil - Философ "к кому"
         * @returns {boolean} - Может ли fromPhil повлиять на toPhil
         */
        function strictChronologyCheck(fromPhil, toPhil) {
            // Периоды активной деятельности (с MATURITY_AGE лет до смерти)
            const fromActiveStart = fromPhil.birth + MATURITY_AGE;
            const fromActiveEnd = fromPhil.death;
            const toActiveStart = toPhil.birth + MATURITY_AGE;
            const toActiveEnd = toPhil.death;
            
            // Случай 1: fromPhil умер до начала активности toPhil
            // Посмертное влияние через тексты и идеи
            if (fromActiveEnd < toActiveStart) {
                return true;
            }
            
            // Случай 2: Современники
            // fromPhil стал активным раньше или одновременно с toPhil
            // И дожил хотя бы до начала активности toPhil
            if (fromActiveStart <= toActiveStart && fromActiveEnd >= toActiveStart) {
                return true;
            }
            
            // Случай 3: fromPhil стал активным позже, но их периоды пересекаются
            // И toPhil дожил до активности fromPhil (может быть взаимное влияние)
            // НО этот случай сложный - лучше блокировать, если fromPhil младше
            if (fromActiveStart > toActiveStart && fromActiveStart <= toActiveEnd) {
                // Дополнительная проверка: разница в возрасте не должна быть слишком большой
                // Если fromPhil значительно младше, он вряд ли мог повлиять на уже зрелого toPhil
                const ageDifference = fromPhil.birth - toPhil.birth;
                if (ageDifference > 20) {
                    return false; // fromPhil слишком молод, чтобы повлиять на toPhil
                }
                return true; // Современники с небольшой разницей в возрасте
            }
            
            // Все остальные случаи - анахронизм
            return false;
        }

        /**
         * Умеренная проверка: окно ±50 лет от рождения
         * @param {Object} fromPhil - Философ "от кого"
         * @param {Object} toPhil - Философ "к кому"
         * @returns {boolean}
         */
        function moderateChronologyCheck(fromPhil, toPhil) {
            // toPhil должен родиться не раньше чем за 50 лет до fromPhil
            return toPhil.birth >= fromPhil.birth - 50;
        }

        /**
         * Свободная проверка: окно ±100 лет от рождения
         * @param {Object} fromPhil - Философ "от кого"
         * @param {Object} toPhil - Философ "к кому"
         * @returns {boolean}
         */
        function looseChronologyCheck(fromPhil, toPhil) {
            // toPhil должен родиться не раньше чем за 100 лет до fromPhil
            return toPhil.birth >= fromPhil.birth - 100;
        }

        /**
         * Универсальная функция проверки хронологической корректности
         * @param {string} fromNodeId - ID узла "от"
         * @param {string} toNodeId - ID узла "к"
         * @param {string} mode - Режим проверки (strict/moderate/loose)
         * @returns {boolean} - Валиден ли переход
         */
        function isChronologicallyValid(fromNodeId, toNodeId, mode = currentChronologyMode) {
            const fromNode = nodes.find(n => n.id === fromNodeId);
            const toNode = nodes.find(n => n.id === toNodeId);
            
            if (!fromNode || !toNode) return true; // Если узлы не найдены, разрешаем
            
            // Находим данные философов по имени (nameRu)
            const fromPhil = philosophers.find(p => p.nameRu === fromNode.concept);
            const toPhil = philosophers.find(p => p.nameRu === toNode.concept);
            
            if (!fromPhil || !toPhil) return true; // Если философы не найдены, разрешаем
            
            // Если один и тот же философ - всегда разрешаем
            if (fromPhil.id === toPhil.id) return true;
            
            // Применяем соответствующую проверку
            switch(mode) {
                case CHRONOLOGY_MODES.STRICT:
                    return strictChronologyCheck(fromPhil, toPhil);
                    
                case CHRONOLOGY_MODES.MODERATE:
                    return moderateChronologyCheck(fromPhil, toPhil);
                    
                case CHRONOLOGY_MODES.LOOSE:
                    return looseChronologyCheck(fromPhil, toPhil);
                    
                default:
                    return true; // По умолчанию разрешаем
            }
        }

        /**
         * Анализ пути на наличие анахронизмов
         * @param {Array} path - Массив ID узлов пути
         * @param {string} mode - Режим проверки (strict/moderate/loose)
         * @returns {Array} - Массив предупреждений об анахронизмах
         */
        function analyzePath(path, mode = CHRONOLOGY_MODES.STRICT) {
            const warnings = [];
            
            for (let i = 0; i < path.length - 1; i++) {
                const fromId = path[i];
                const toId = path[i + 1];
                
                // Проверяем по СТРОГОМУ режиму, независимо от выбранного
                // чтобы показать потенциальные проблемы
                if (!isChronologicallyValid(fromId, toId, mode)) {
                    const fromNode = nodes.find(n => n.id === fromId);
                    const toNode = nodes.find(n => n.id === toId);
                    
                    if (fromNode && toNode) {
                        const fromPhil = philosophers.find(p => p.nameRu === fromNode.concept);
                        const toPhil = philosophers.find(p => p.nameRu === toNode.concept);
                        
                        if (fromPhil && toPhil) {
                            warnings.push({
                                from: fromNode.label,
                                to: toNode.label,
                                fromPhil: fromNode.concept,
                                toPhil: toNode.concept,
                                fromYears: `${fromPhil.birth}-${fromPhil.death}`,
                                toYears: `${toPhil.birth}-${toPhil.death}`
                            });
                        }
                    }
                }
            }
            
            return warnings;
        }

        // Поиск кратчайшего пути между двумя концепциями (BFS)
        function findShortestPath(sourceId, targetId, respectChronology = true, useDirection = null) {
            // Используем глобальный параметр, если не передан явно
            const shouldRespectDirection = useDirection !== null ? useDirection : respectDirection;
            
            if (useWeightedPaths) {
                return findShortestPathWeighted(sourceId, targetId, respectChronology, shouldRespectDirection);
            } else {
                return findShortestPathUnweighted(sourceId, targetId, respectChronology, shouldRespectDirection);
            }
        }
        
        // Взвешенный поиск (Дейкстра)
        function findShortestPathWeighted(sourceId, targetId, respectChronology = true, shouldRespectDirection = true) {
            if (sourceId === targetId) return [sourceId];
            
            const distances = {};
            const previous = {};
            const unvisited = new Set();
            
            nodes.forEach(n => {
                distances[n.id] = Infinity;
                previous[n.id] = null;
                unvisited.add(n.id);
            });
            
            distances[sourceId] = 0;
            
            while (unvisited.size > 0) {
                // Найти узел с минимальным расстоянием
                let current = null;
                let minDist = Infinity;
                unvisited.forEach(nodeId => {
                    if (distances[nodeId] < minDist) {
                        minDist = distances[nodeId];
                        current = nodeId;
                    }
                });
                
                if (current === null || distances[current] === Infinity) break;
                if (current === targetId) break;
                
                unvisited.delete(current);
                
                const currentNode = nodes.find(n => n.id === current);
                
                // Обновить расстояния до соседей
                links.forEach(link => {
                    const src = link.source.id || link.source;
                    const tgt = link.target.id || link.target;
                    
                    let neighbor = null;
                    let canTraverse = false;
                    
                    if (shouldRespectDirection) {
                        // Учитываем направленность
                        if (src === current) {
                            neighbor = tgt;
                            canTraverse = true;
                        } else if (link.bidirectional && tgt === current) {
                            neighbor = src;
                            canTraverse = true;
                        }
                    } else {
                        // Не учитываем направленность - граф ненаправленный
                        if (src === current) {
                            neighbor = tgt;
                            canTraverse = true;
                        } else if (tgt === current) {
                            neighbor = src;
                            canTraverse = true;
                        }
                    }
                    
                    if (canTraverse && neighbor && unvisited.has(neighbor)) {
                        // Преобразуем вес: больший вес = меньшая "стоимость" связи
                        const weight = link.weight || 2;
                        const cost = 4 - weight;
                        const alt = distances[current] + cost;
                        
                        if (respectChronology) {
                            // Используем новую функцию проверки с выбранным режимом
                            if (!isChronologicallyValid(current, neighbor, currentChronologyMode)) {
                                return; // Пропускаем этот переход как хронологически некорректный
                            }
                        }
                        
                        if (alt < distances[neighbor]) {
                            distances[neighbor] = alt;
                            previous[neighbor] = current;
                        }
                    }
                });
            }
            
            // Восстановить путь
            if (distances[targetId] === Infinity) return null;
            
            const path = [];
            let current = targetId;
            while (current !== null) {
                path.unshift(current);
                current = previous[current];
            }
            
            return path;
        }
        
        // Невзвешенный поиск (BFS)
        function findShortestPathUnweighted(sourceId, targetId, respectChronology = true, shouldRespectDirection = true) {
            if (sourceId === targetId) return [sourceId];
            
            const queue = [[sourceId]];
            const visited = new Set([sourceId]);
            
            const adjacency = {};
            nodes.forEach(n => adjacency[n.id] = []);
            
            links.forEach(l => {
                const src = l.source.id || l.source;
                const tgt = l.target.id || l.target;
                
                if (shouldRespectDirection) {
                    adjacency[src].push(tgt);
                    if (l.bidirectional) {
                        adjacency[tgt].push(src);
                    }
                } else {
                    adjacency[src].push(tgt);
                    adjacency[tgt].push(src);
                }
            });
            
            while (queue.length > 0) {
                const path = queue.shift();
                const currentNodeId = path[path.length - 1];
                
                if (currentNodeId === targetId) {
                    return path;
                }
                
                const neighbors = adjacency[currentNodeId] || [];
                for (const neighborId of neighbors) {
                    if (!visited.has(neighborId)) {
                        if (respectChronology) {
                            // Используем новую функцию проверки с выбранным режимом
                            if (!isChronologicallyValid(currentNodeId, neighborId, currentChronologyMode)) {
                                continue; // Пропускаем этот переход как хронологически некорректный
                            }
                        }
                        
                        visited.add(neighborId);
                        queue.push([...path, neighborId]);
                    }
                }
            }
            
            return null;
        }
        
        // Функция для отображения найденного пути
        function findAndShowPath() {
            const sourceId = document.getElementById('sourceSelect').value;
            const targetId = document.getElementById('targetSelect').value;
            const resultDiv = document.getElementById('pathResult');
            
            const respectChronology = document.getElementById('respectChronology').checked;
            const respectDirectionPath = document.getElementById('respectDirectionPath').checked;
            const useWeightsPath = document.getElementById('useWeightsPath').checked;
            
            // НОВОЕ: Получаем выбранный режим хронологии
            const selectedChronologyMode = document.getElementById('chronologyModeSelect').value;
            
            if (!sourceId || !targetId) {
                alert('Выберите обе концепции');
                return;
            }
            
            if (sourceId === targetId) {
                alert('Выберите разные концепции');
                return;
            }
            
            // Временно меняем глобальные переменные для поиска пути
            const originalWeights = useWeightedPaths;
            const originalDirection = respectDirection;
            const originalChronologyMode = currentChronologyMode; // НОВОЕ: Сохраняем режим
            
            useWeightedPaths = useWeightsPath;
            respectDirection = respectDirectionPath;
            currentChronologyMode = selectedChronologyMode; // НОВОЕ: Устанавливаем выбранный режим
            
            const path = findShortestPath(sourceId, targetId, respectChronology, respectDirectionPath);
            
            // Восстанавливаем глобальные переменные
            useWeightedPaths = originalWeights;
            respectDirection = originalDirection;
            currentChronologyMode = originalChronologyMode; // НОВОЕ: Восстанавливаем режим
            
            if (!path) {
                const sourceNode = nodes.find(n => n.id === sourceId);
                const targetNode = nodes.find(n => n.id === targetId);
                
                let message = 'Эти концепции не связаны';
                if (respectChronology && respectDirectionPath) {
                    message += ' хронологически корректным путём с учётом направленности связей.';
                } else if (respectChronology) {
                    message += ' хронологически корректным путём.';
                } else if (respectDirectionPath) {
                    message += ' с учётом направленности связей.';
                } else {
                    message += ' в графе.';
                }

                resultDiv.innerHTML = `
                    <div class="path-length">❌ Путь не найден</div>
                    <div class="path-chain">${message}<br><br>
                    <small style="color: #95a5a6;">Попробуйте снять ограничения ниже.</small></div>
                    <button onclick="clearPathHighlight()" style="width: 100%; margin-top: 10px; background: #95a5a6; color: white; border: none; padding: 8px; border-radius: 6px; cursor: pointer; font-size: 12px;">
                        Очистить
                    </button>
                `;
                resultDiv.classList.add('show');
                resetHighlight();
                return;
            }
            
            // Анализируем путь на анахронизмы
            const anachronismWarnings = analyzePath(path, selectedChronologyMode);

            // Формируем визуальное представление пути
            const pathNodes = path.map(id => nodes.find(n => n.id === id));
            
            // Создаём HTML с узлами и стрелками
            let pathHTML = '';
            
            for (let i = 0; i < pathNodes.length; i++) {
                const node = pathNodes[i];
                const philosopherColor = philosopherConcepts[node.concept].color;
                
                // Добавляем узел с философом
                pathHTML += `
                    <span class="path-node-container">
                        <span class="path-philosopher">${node.concept}</span>
                        <span class="path-node" style="border-color: ${philosopherColor};" title="${node.concept}: ${node.description}">
                            ${node.label}
                        </span>
                    </span>
                `;
                
                // Добавляем стрелку, если это не последний узел
                if (i < pathNodes.length - 1) {
                    const currentNode = pathNodes[i];
                    const nextNode = pathNodes[i + 1];
                    
                    // Находим связь между текущим и следующим узлом
                    const link = links.find(l => {
                        const src = l.source.id || l.source;
                        const tgt = l.target.id || l.target;
                        
                        if (respectDirectionPath) {
                            return (src === currentNode.id && tgt === nextNode.id) ||
                                   (l.bidirectional && src === nextNode.id && tgt === currentNode.id);
                        } else {
                            return (src === currentNode.id && tgt === nextNode.id) ||
                                   (src === nextNode.id && tgt === currentNode.id);
                        }
                    });
                    
                    if (link) {
                        const linkColor = relationTypesObj[link.type].color;
                        const linkLabel = relationTypesObj[link.type].label;
                        const src = link.source.id || link.source;
                        const tgt = link.target.id || link.target;
                        
                        // Определяем направление стрелки
                        let arrow;
                        if (link.bidirectional) {
                            arrow = '↔';
                        } else if (src === currentNode.id && tgt === nextNode.id) {
                            arrow = '→';
                        } else {
                            arrow = '←';
                        }
                        
                        pathHTML += `
                            <span class="path-arrow ${link.bidirectional ? 'bidirectional' : ''}" 
                                  style="color: ${linkColor};" 
                                  title="${linkLabel}">
                                ${arrow}
                            </span>
                        `;
                    } else {
                        pathHTML += `<span class="path-arrow" style="color: #95a5a6;">→</span>`;
                    }
                }
            }
            
            // Добавляем информацию о хронологии и режиме
            const years = pathNodes.map(n => philosopherConcepts[n.concept].years);
            const modeNames = {
                strict: 'строгий',
                moderate: 'умеренный', 
                loose: 'свободный'
            };
            
            const chronologyInfo = respectChronology ? 
                `<div style="margin-top: 8px; font-size: 10px; color: #7f8c8d;">
                    <strong>Хронология:</strong> ${years[0]} → ${years[years.length - 1]}<br>
                    <strong>Режим:</strong> ${modeNames[selectedChronologyMode]}
                </div>` : '';
            
            // Формируем предупреждения об анахронизмах
            let warningsHTML = '';
            if (anachronismWarnings.length > 0) {
                warningsHTML = `
                    <div class="anachronism-warnings">
                        <div class="anachronism-warnings-title">Обнаружены анахронизмы</div>
                        ${anachronismWarnings.map(w => `
                            <div class="anachronism-item">
                                <strong>${w.from}</strong> (${w.fromPhil}, ${w.fromYears}) → 
                                <strong>${w.to}</strong> (${w.toPhil}, ${w.toYears})
                            </div>
                        `).join('')}
                        <div style="font-size: 9px; color: #856404; margin-top: 6px; font-style: italic;">
                            Эти переходы могут быть хронологически некорректны в строгом режиме.
                        </div>
                    </div>
                `;
            }
            
            resultDiv.innerHTML = `
                <div class="path-length">✅ Длина пути: ${path.length} концепций</div>
                <div class="path-chain" style="line-height: 2;">${pathHTML}</div>
                ${chronologyInfo}
                ${warningsHTML}
                <button onclick="clearPathHighlight()" style="width: 100%; margin-top: 10px; background: #e74c3c; color: white; border: none; padding: 8px; border-radius: 6px; cursor: pointer; font-size: 12px; transition: background 0.3s;" onmouseover="this.style.background='#c0392b'" onmouseout="this.style.background='#e74c3c'">
                     Сбросить подсветку
                </button>
            `;
            resultDiv.classList.add('show');
            
            // Подсвечиваем путь на графе
            highlightPath(path, respectDirectionPath);
        }
        
        // Подсветка пути на графе
        function highlightPath(path, respectDirection = true) {
            resetHighlight();
            
            const pathSet = new Set(path);
            const pathLinks = new Set();
            
            // Находим связи, которые входят в путь
            for (let i = 0; i < path.length - 1; i++) {
                const currentNode = path[i];
                const nextNode = path[i + 1];
                
                const link = links.find(l => {
                    const src = l.source.id || l.source;
                    const tgt = l.target.id || l.target;
                    
                    if (respectDirection) {
                        // Учитываем направленность: ищем связь в прямом направлении или bidirectional
                        return (src === currentNode && tgt === nextNode) ||
                               (l.bidirectional && src === nextNode && tgt === currentNode);
                    } else {
                        // Не учитываем направленность: любая связь между этими узлами подходит
                        return (src === currentNode && tgt === nextNode) ||
                               (src === nextNode && tgt === currentNode);
                    }
                });
                
                if (link) pathLinks.add(link);
            }
            
            // Применяем стили
            node.classed("dimmed", d => !pathSet.has(d.id))
                .classed("highlighted", d => pathSet.has(d.id));
            
            link.classed("dimmed", l => !pathLinks.has(l))
                .classed("path-highlight", l => pathLinks.has(l));
        }
        
        // Очистка подсветки пути
        function clearPathHighlight() {
            resetHighlight();
            const resultDiv = document.getElementById('pathResult');
            resultDiv.classList.remove('show');
            resultDiv.innerHTML = '';
        }
        
        // Инициализация фильтров
        function initFilters() {
            // Создаем фильтры философов
            const philContainer = document.getElementById('philosopherFilters');
            Object.entries(philosopherConcepts).forEach(([name, data]) => {
                const item = document.createElement('div');
                item.className = 'legend-item';
                item.innerHTML = `
                    <input type="checkbox" id="phil-${name}" checked onchange="togglePhilosopher('${name}')">
                    <label for="phil-${name}">
                        <div class="legend-color" style="background: ${data.color}"></div>
                        <span>${name}<small style="color: #95a5a6; font-size: 9px;"> (${data.years})</small></span>
                    </label>
                `;
                philContainer.appendChild(item);
            });
        
            // Создаем фильтры связей (без изменений)
            const relContainer = document.getElementById('relationFilters');
            Object.entries(relationTypesObj).forEach(([type, typeData]) => {
                const item = document.createElement('div');
                item.className = 'legend-item';
                item.innerHTML = `
                    <input type="checkbox" id="rel-${type}" checked onchange="toggleRelation('${type}')">
                    <label for="rel-${type}">
                        <div class="legend-line" style="background: ${typeData.color}"></div>
                        <span>${typeData.label}</span>
                    </label>
                `;
                relContainer.appendChild(item);
            });
        }
        
        // Переключение философа
        function togglePhilosopher(philosopher) {
            if (selectedPhilosophers.has(philosopher)) {
                selectedPhilosophers.delete(philosopher);
            } else {
                selectedPhilosophers.add(philosopher);
            }
            applyFilters();
        }
        
        // Переключение типа связи
        function toggleRelation(relationType) {
            if (selectedRelations.has(relationType)) {
                selectedRelations.delete(relationType);
            } else {
                selectedRelations.add(relationType);
            }
            applyFilters();
        }
        
        // Выбрать всех философов
        function selectAllPhilosophers() {
            selectedPhilosophers = new Set(Object.keys(philosopherConcepts));
            Object.keys(philosopherConcepts).forEach(name => {
                document.getElementById(`phil-${name}`).checked = true;
            });
            applyFilters();
        }
        
        // Снять всех философов
        function deselectAllPhilosophers() {
            selectedPhilosophers.clear();
            Object.keys(philosopherConcepts).forEach(name => {
                document.getElementById(`phil-${name}`).checked = false;
            });
            applyFilters();
        }
        
        // Выбрать все связи
        function selectAllRelations() {
            selectedRelations = new Set(Object.keys(relationTypesObj));
            Object.keys(relationTypesObj).forEach(type => {
                document.getElementById(`rel-${type}`).checked = true;
            });
            applyFilters();
        }
        
        // Снять все связи
        function deselectAllRelations() {
            selectedRelations.clear();
            Object.keys(relationTypesObj).forEach(type => {
                document.getElementById(`rel-${type}`).checked = false;
            });
            applyFilters();
        }
        
        // Переключение режима фильтрации
        function changeFilterMode(mode) {
            filterMode = mode;
            applyFilters();
        }
        
        // Debounce для оптимизации частых вызовов
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
        
        // Оптимизированная версия applyFilters с debounce
        const debouncedApplyFilters = debounce(function() {
            applyFiltersImmediate();
        }, 150);
        
        function applyFilters() {
            debouncedApplyFilters();
        }

        // Применение фильтров с взаимосвязанной логикой
        function applyFiltersImmediate() {
            const allRelationsSelected = selectedRelations.size === Object.keys(relationTypesObj).length;
            
            if (filterMode === 'all') {
                // Режим 1: Только выбранные философы
                const validLinks = links.filter(l => {
                    const typeSelected = selectedRelations.has(l.type);
                    const sourcePhilosopherSelected = selectedPhilosophers.has(l.source.concept);
                    const targetPhilosopherSelected = selectedPhilosophers.has(l.target.concept);
                    return typeSelected && sourcePhilosopherSelected && targetPhilosopherSelected;
                });
                
                const nodesInValidLinks = new Set();
                validLinks.forEach(l => {
                    nodesInValidLinks.add(l.source.id || l.source);
                    nodesInValidLinks.add(l.target.id || l.target);
                });
                
                node.style("display", d => {
                    const philosopherSelected = selectedPhilosophers.has(d.concept);
                    const inValidLinks = allRelationsSelected || nodesInValidLinks.has(d.id);
                    return (philosopherSelected && inValidLinks) ? null : "none";
                });
                
                link.style("display", l => {
                    const typeSelected = selectedRelations.has(l.type);
                    const sourcePhilosopherSelected = selectedPhilosophers.has(l.source.concept);
                    const targetPhilosopherSelected = selectedPhilosophers.has(l.target.concept);
                    const sourceInValidLinks = allRelationsSelected || nodesInValidLinks.has(l.source.id);
                    const targetInValidLinks = allRelationsSelected || nodesInValidLinks.has(l.target.id);
                    
                    return (typeSelected && sourcePhilosopherSelected && targetPhilosopherSelected && 
                            sourceInValidLinks && targetInValidLinks) ? null : "none";
                });
                
            } else if (filterMode === 'internal') {
                // Режим 2: Только внутренние связи
                const validLinks = links.filter(l => {
                    const typeSelected = selectedRelations.has(l.type);
                    const sourcePhilosopherSelected = selectedPhilosophers.has(l.source.concept);
                    const targetPhilosopherSelected = selectedPhilosophers.has(l.target.concept);
                    const samePhilosopher = l.source.concept === l.target.concept;
                    return typeSelected && sourcePhilosopherSelected && targetPhilosopherSelected && samePhilosopher;
                });
                
                const nodesInValidLinks = new Set();
                validLinks.forEach(l => {
                    nodesInValidLinks.add(l.source.id || l.source);
                    nodesInValidLinks.add(l.target.id || l.target);
                });
                
                node.style("display", d => {
                    const philosopherSelected = selectedPhilosophers.has(d.concept);
                    const inValidLinks = allRelationsSelected || nodesInValidLinks.has(d.id);
                    return (philosopherSelected && inValidLinks) ? null : "none";
                });
                
                link.style("display", l => {
                    const typeSelected = selectedRelations.has(l.type);
                    const sourcePhilosopherSelected = selectedPhilosophers.has(l.source.concept);
                    const targetPhilosopherSelected = selectedPhilosophers.has(l.target.concept);
                    const samePhilosopher = l.source.concept === l.target.concept;
                    const sourceInValidLinks = allRelationsSelected || nodesInValidLinks.has(l.source.id);
                    const targetInValidLinks = allRelationsSelected || nodesInValidLinks.has(l.target.id);
                    
                    return (typeSelected && sourcePhilosopherSelected && targetPhilosopherSelected && 
                            samePhilosopher && sourceInValidLinks && targetInValidLinks) ? null : "none";
                });
                
            } else if (filterMode === 'context') {
                // Режим 3: С соседними узлами
                const validLinks = links.filter(l => {
                    const typeSelected = selectedRelations.has(l.type);
                    const sourcePhilosopherSelected = selectedPhilosophers.has(l.source.concept);
                    const targetPhilosopherSelected = selectedPhilosophers.has(l.target.concept);
                    return typeSelected && (sourcePhilosopherSelected || targetPhilosopherSelected);
                });
                
                const visibleNodes = new Set();
                validLinks.forEach(l => {
                    visibleNodes.add(l.source.id || l.source);
                    visibleNodes.add(l.target.id || l.target);
                });
                
                node.style("display", d => {
                    return visibleNodes.has(d.id) ? null : "none";
                });
                
                link.style("display", l => {
                    const typeSelected = selectedRelations.has(l.type);
                    const sourcePhilosopherSelected = selectedPhilosophers.has(l.source.concept);
                    const targetPhilosopherSelected = selectedPhilosophers.has(l.target.concept);
                    const sourceVisible = visibleNodes.has(l.source.id);
                    const targetVisible = visibleNodes.has(l.target.id);
                    
                    return (typeSelected && (sourcePhilosopherSelected || targetPhilosopherSelected) && 
                            sourceVisible && targetVisible) ? null : "none";
                });
                
            } else if (filterMode === 'external') {
                // Режим 4: Только внешние связи (новый)
                // Показываем только те узлы выбранных философов, которые имеют внешние связи
                const validLinks = links.filter(l => {
                    const typeSelected = selectedRelations.has(l.type);
                    const sourcePhilosopherSelected = selectedPhilosophers.has(l.source.concept);
                    const targetPhilosopherSelected = selectedPhilosophers.has(l.target.concept);
                    // Связь валидна, если один конец - выбранный философ, другой - нет
                    const isExternal = (sourcePhilosopherSelected && !targetPhilosopherSelected) ||
                                      (!sourcePhilosopherSelected && targetPhilosopherSelected);
                    return typeSelected && isExternal;
                });
                
                const visibleNodes = new Set();
                validLinks.forEach(l => {
                    visibleNodes.add(l.source.id || l.source);
                    visibleNodes.add(l.target.id || l.target);
                });
                
                node.style("display", d => {
                    return visibleNodes.has(d.id) ? null : "none";
                });
                
                link.style("display", l => {
                    const typeSelected = selectedRelations.has(l.type);
                    const sourcePhilosopherSelected = selectedPhilosophers.has(l.source.concept);
                    const targetPhilosopherSelected = selectedPhilosophers.has(l.target.concept);
                    const isExternal = (sourcePhilosopherSelected && !targetPhilosopherSelected) ||
                                      (!sourcePhilosopherSelected && targetPhilosopherSelected);
                    const sourceVisible = visibleNodes.has(l.source.id);
                    const targetVisible = visibleNodes.has(l.target.id);
                    
                    return (typeSelected && isExternal && sourceVisible && targetVisible) ? null : "none";
                });
            }
            
            // Обновляем статистику
            updateFilterStats();
            
            // Сбрасываем подсветку для скрытых узлов
            const visibleNodeIds = new Set();
            node.each(function(d) {
                if (this.style.display !== "none") {
                    visibleNodeIds.add(d.id);
                }
            });
            
            selectedNodes.forEach(node => {
                if (!visibleNodeIds.has(node.id)) {
                    selectedNodes.delete(node);
                }
            });

            if (selectedNodes.size === 0) {
                resetHighlight();
            } else {
                highlightConnected(Array.from(selectedNodes));
            }
        }

        // Переключение режима одинаковой толщины связей
        function toggleUniformLinkWidth() {
            const isUniform = document.getElementById('uniformLinkWidth').checked;
            
            if (isUniform) {
                svg.classed('uniform-width-links', true);
            } else {
                svg.classed('uniform-width-links', false);
            }
        }

        // Обновление статистики фильтров
        function updateFilterStats() {
            let visibleNodesCount = 0;
            let visibleLinksCount = 0;
            
            node.each(function() {
                if (this.style.display !== "none") visibleNodesCount++;
            });
            
            link.each(function() {
                if (this.style.display !== "none") visibleLinksCount++;
            });
            
            const totalNodes = nodes.length;
            const totalLinks = links.length;
            
            document.getElementById('filterStats').textContent = 
                `Показано: ${visibleNodesCount}/${totalNodes} концепций, ${visibleLinksCount}/${totalLinks} связей`;
        }
        
        // Расчет влиятельности концепций (degree centrality) с кэшированием
        let influenceCache = null;
        
        function calculateInfluence() {
            if (influenceCache) return influenceCache;
            
            const influence = {};
            
            nodes.forEach(n => {
                influence[n.id] = { in: 0, out: 0, total: 0, node: n };
            });
            
            links.forEach(l => {
                const src = l.source.id || l.source;
                const tgt = l.target.id || l.target;
                influence[src].out++;
                influence[tgt].in++;
                if (l.bidirectional) {
                    influence[src].in++;
                    influence[tgt].out++;
                }
            });
            
            Object.values(influence).forEach(i => {
                i.total = i.in + i.out;
            });
            
            const result = Object.values(influence).sort((a, b) => b.total - a.total);
            influenceCache = result;
            return result;
        }
        
        function invalidateInfluenceCache() {
            influenceCache = null;
        }
        
        // Расчет узлов-мостов (betweenness centrality - ПОЛНАЯ версия с асинхронностью)
        let betweennessCache = null;
        let betweennessCalculating = false;
        
        // Асинхронная версия для полного расчёта без блокировки UI
        // Правильный расчёт Betweenness Centrality (алгоритм Брандеса)
        async function calculateBetweennessAsync(progressCallback) {
            if (betweennessCache) return betweennessCache;
            if (betweennessCalculating) return null;
            
            betweennessCalculating = true;
            const betweenness = {};
            nodes.forEach(n => betweenness[n.id] = 0);
            
            let processedNodes = 0;
            const totalNodes = nodes.length;
            
            // Для каждого исходного узла
            for (let sourceIdx = 0; sourceIdx < nodes.length; sourceIdx++) {
                const source = nodes[sourceIdx];
                
                const S = []; // Стек узлов в порядке невозрастающего расстояния
                const P = {}; // Предшественники на кратчайших путях
                const sigma = {}; // Количество кратчайших путей
                const d = {}; // Расстояния
                const delta = {}; // Зависимости
                
                nodes.forEach(n => {
                    P[n.id] = [];
                    sigma[n.id] = 0;
                    d[n.id] = -1;
                    delta[n.id] = 0;
                });
                
                sigma[source.id] = 1;
                d[source.id] = 0;
                
                const Q = [source.id];
                
                // BFS для поиска кратчайших путей
                while (Q.length > 0) {
                    const v = Q.shift();
                    S.push(v);
                    
                    // Для каждого соседа v
                    links.forEach(link => {
                        const src = link.source.id || link.source;
                        const tgt = link.target.id || link.target;
                        
                        let w = null;
                        
                        // Учитываем направленность графа
                        if (respectDirection) {
                            if (src === v) {
                                w = tgt;
                            } else if (link.bidirectional && tgt === v) {
                                w = src;
                            }
                        } else {
                            // Ненаправленный граф
                            if (src === v) {
                                w = tgt;
                            } else if (tgt === v) {
                                w = src;
                            }
                        }
                        
                        if (w !== null) {
                            // Вес связи (если useWeightedPaths = true)
                            const weight = useWeightedPaths ? (4 - (link.weight || 2)) : 1;
                            
                            // Путь к w найден впервые?
                            if (d[w] < 0) {
                                Q.push(w);
                                d[w] = d[v] + weight;
                            }
                            
                            // Кратчайший путь к w через v?
                            if (d[w] === d[v] + weight) {
                                sigma[w] += sigma[v];
                                P[w].push(v);
                            }
                        }
                    });
                }
                
                // Накопление (обратный проход)
                while (S.length > 0) {
                    const w = S.pop();
                    P[w].forEach(v => {
                        delta[v] += (sigma[v] / sigma[w]) * (1 + delta[w]);
                    });
                    if (w !== source.id) {
                        betweenness[w] += delta[w];
                    }
                }
                
                processedNodes++;
                
                // Обновляем прогресс каждые 5 узлов
                if (processedNodes % 5 === 0) {
                    if (progressCallback) {
                        progressCallback(processedNodes, totalNodes);
                    }
                    await new Promise(resolve => setTimeout(resolve, 0));
                }
            }
            
            // Нормализация
            const normFactor = respectDirection ? 1.0 : 2.0;
            Object.keys(betweenness).forEach(key => {
                betweenness[key] /= normFactor;
            });
            
            const result = Object.entries(betweenness)
                .map(([id, value]) => ({
                    node: nodes.find(n => n.id === id),
                    value: value,
                    count: Math.round(value)
                }))
                .sort((a, b) => b.value - a.value);
            
            betweennessCache = result;
            betweennessCalculating = false;
            
            if (progressCallback) {
                progressCallback(totalNodes, totalNodes);
            }
            
            return result;
        }
        
        // Синхронная версия для обратной совместимости (возвращает кэш или null)
        function calculateBetweenness() {
            if (betweennessCache) return betweennessCache;
            
            // Если кэша нет - запускаем асинхронный расчёт
            if (!betweennessCalculating) {
                calculateBetweennessAsync();
            }
            
            return null; // Вернём null, пока идёт расчёт
        }
        
        // Сброс кэша при изменении графа
        function invalidateBetweennessCache() {
            betweennessCache = null;
            betweennessCalculating = false;
        }
        
        // Кэш для PageRank
        let pageRankCache = null;
        let pageRankCalculating = false;
        
        function calculatePageRank(iterations = 20, dampingFactor = 0.85, progressCallback = null) {
            if (pageRankCache) return Promise.resolve(pageRankCache);
            if (pageRankCalculating) return Promise.resolve(null);
            
            pageRankCalculating = true;
            
            return new Promise(async (resolve) => {
                const pageRank = {};
                const inLinks = {};
                const outDegree = {};
                
                // Инициализация
                nodes.forEach(n => {
                    pageRank[n.id] = 1.0 / nodes.length;
                    inLinks[n.id] = [];
                    outDegree[n.id] = 0;
                });
                
                // Построить списки входящих связей и подсчитать исходящие
                links.forEach(link => {
                    const src = link.source.id || link.source;
                    const tgt = link.target.id || link.target;
                    const weight = useWeightedPaths ? (link.weight || 2) / 3.0 : 1.0;
                    
                    if (respectDirection) {
                        // Направленный граф
                        inLinks[tgt].push({ from: src, weight: weight });
                        outDegree[src]++;
                        
                        if (link.bidirectional) {
                            inLinks[src].push({ from: tgt, weight: weight });
                            outDegree[tgt]++;
                        }
                    } else {
                        // Ненаправленный граф
                        inLinks[tgt].push({ from: src, weight: weight });
                        inLinks[src].push({ from: tgt, weight: weight });
                        outDegree[src]++;
                        outDegree[tgt]++;
                    }
                });
                
                // Итеративный расчет
                for (let iter = 0; iter < iterations; iter++) {
                    const newPageRank = {};
                    
                    nodes.forEach(node => {
                        let sum = 0;
                        
                        inLinks[node.id].forEach(inLink => {
                            if (outDegree[inLink.from] > 0) {
                                sum += (pageRank[inLink.from] / outDegree[inLink.from]) * inLink.weight;
                            }
                        });
                        
                        newPageRank[node.id] = (1 - dampingFactor) / nodes.length + dampingFactor * sum;
                    });
                    
                    // Обновить значения
                    Object.keys(newPageRank).forEach(key => {
                        pageRank[key] = newPageRank[key];
                    });
                    
                    // Обновляем прогресс
                    if (progressCallback && iter % 5 === 0) {
                        progressCallback(iter, iterations);
                        await new Promise(res => setTimeout(res, 0));
                    }
                }
                
                const result = Object.entries(pageRank)
                    .map(([id, value]) => ({
                        node: nodes.find(n => n.id === id),
                        value: value
                    }))
                    .sort((a, b) => b.value - a.value);
                
                pageRankCache = result;
                pageRankCalculating = false;
                
                if (progressCallback) progressCallback(iterations, iterations);
                
                resolve(result);
            });
        }
        
        function invalidatePageRankCache() {
            pageRankCache = null;
            pageRankCalculating = false;
        }
        
        // Кэш для Closeness
        let closenessCache = null;
        let closenessCalculating = false;
        
        async function calculateClosenessCentrality(progressCallback = null) {
            if (closenessCache) return closenessCache;
            if (closenessCalculating) return null;
            
            closenessCalculating = true;
            const closeness = {};
            
            let processedNodes = 0;
            const totalNodes = nodes.length;
            
            for (let i = 0; i < nodes.length; i++) {
                const source = nodes[i];
                let totalDistance = 0;
                let reachableNodes = 0;
                
                for (let j = 0; j < nodes.length; j++) {
                    if (i === j) continue;
                    
                    const target = nodes[j];
                    // Используем глобальный параметр respectDirection
                    const path = findShortestPath(source.id, target.id, false, respectDirection);
                    
                    if (path) {
                        // Для взвешенного графа суммируем веса
                        if (useWeightedPaths) {
                            let pathWeight = 0;
                            for (let k = 0; k < path.length - 1; k++) {
                                const link = links.find(l => {
                                    const src = l.source.id || l.source;
                                    const tgt = l.target.id || l.target;
                                    
                                    if (respectDirection) {
                                        return (src === path[k] && tgt === path[k + 1]) ||
                                               (l.bidirectional && tgt === path[k] && src === path[k + 1]);
                                    } else {
                                        return (src === path[k] && tgt === path[k + 1]) ||
                                               (tgt === path[k] && src === path[k + 1]);
                                    }
                                });
                                pathWeight += (4 - (link?.weight || 2));
                            }
                            totalDistance += pathWeight;
                        } else {
                            totalDistance += path.length - 1;
                        }
                        reachableNodes++;
                    }
                }
                
                // Нормализованная closeness (Wasserman & Faust)
                if (reachableNodes > 0) {
                    const rawCloseness = reachableNodes / totalDistance;
                    const normalizedCloseness = (reachableNodes / (nodes.length - 1)) * rawCloseness;
                    
                    closeness[source.id] = {
                        value: normalizedCloseness,
                        node: source,
                        reachable: reachableNodes
                    };
                } else {
                    closeness[source.id] = { value: 0, node: source, reachable: 0 };
                }
                
                processedNodes++;
                
                if (processedNodes % 5 === 0) {
                    if (progressCallback) {
                        progressCallback(processedNodes, totalNodes);
                    }
                    await new Promise(resolve => setTimeout(resolve, 0));
                }
            }
            
            const result = Object.values(closeness).sort((a, b) => b.value - a.value);
            closenessCache = result;
            closenessCalculating = false;
            
            if (progressCallback) progressCallback(totalNodes, totalNodes);
            
            return result;
        }
        
        function invalidateClosenessCache() {
            closenessCache = null;
            closenessCalculating = false;
        }
        
        // Кэш для Clustering
        let clusteringCache = null;
        
        function calculateClusteringCoefficient() {
            if (clusteringCache) return clusteringCache;
            
            const clustering = {};
            
            nodes.forEach(node => {
                // Найти всех соседей (для кластеризации всегда ненаправленный подход)
                const neighbors = new Set();
                links.forEach(link => {
                    const src = link.source.id || link.source;
                    const tgt = link.target.id || link.target;
                    
                    if (src === node.id) neighbors.add(tgt);
                    if (tgt === node.id || link.bidirectional) neighbors.add(src);
                });
                
                const k = neighbors.size;
                if (k < 2) {
                    clustering[node.id] = { value: 0, node: node, neighbors: k };
                    return;
                }
                
                // Подсчитать связи между соседями
                let edgesBetweenNeighbors = 0;
                const neighborArray = Array.from(neighbors);
                
                for (let i = 0; i < neighborArray.length; i++) {
                    for (let j = i + 1; j < neighborArray.length; j++) {
                        const hasEdge = links.some(link => {
                            const src = link.source.id || link.source;
                            const tgt = link.target.id || link.target;
                            return (src === neighborArray[i] && tgt === neighborArray[j]) ||
                                   (src === neighborArray[j] && tgt === neighborArray[i]) ||
                                   (link.bidirectional && 
                                    ((src === neighborArray[i] && tgt === neighborArray[j]) ||
                                     (src === neighborArray[j] && tgt === neighborArray[i])));
                        });
                        if (hasEdge) edgesBetweenNeighbors++;
                    }
                }
                
                clustering[node.id] = {
                    value: (2.0 * edgesBetweenNeighbors) / (k * (k - 1)),
                    node: node,
                    neighbors: k
                };
            });
            
            const result = Object.values(clustering).sort((a, b) => b.value - a.value);
            clusteringCache = result;
            return result;
        }
        
        function invalidateClusteringCache() {
            clusteringCache = null;
        }
        
        // Взвешенная степень узла
        function calculateWeightedDegree() {
            const weightedDegree = {};
            
            nodes.forEach(node => {
                let inWeight = 0;
                let outWeight = 0;
                let inCount = 0;
                let outCount = 0;
                
                links.forEach(link => {
                    const src = link.source.id || link.source;
                    const tgt = link.target.id || link.target;
                    const weight = useWeightedPaths ? (link.weight || 2) : 1;
                    
                    if (respectDirection) {
                        // Направленный граф
                        if (tgt === node.id) {
                            inWeight += weight;
                            inCount++;
                        }
                        if (src === node.id) {
                            outWeight += weight;
                            outCount++;
                        }
                        if (link.bidirectional) {
                            if (src === node.id) {
                                inWeight += weight;
                                inCount++;
                            }
                            if (tgt === node.id) {
                                outWeight += weight;
                                outCount++;
                            }
                        }
                    } else {
                        // Ненаправленный граф
                        if (tgt === node.id || src === node.id) {
                            inWeight += weight;
                            outWeight += weight;
                            inCount++;
                            outCount++;
                        }
                    }
                });
                
                weightedDegree[node.id] = {
                    inWeight: inWeight,
                    outWeight: outWeight,
                    totalWeight: respectDirection ? (inWeight + outWeight) : inWeight, // Для ненаправленного не удваиваем
                    inCount: inCount,
                    outCount: outCount,
                    totalCount: respectDirection ? (inCount + outCount) : inCount,
                    node: node
                };
            });
            
            return Object.values(weightedDegree).sort((a, b) => b.totalWeight - a.totalWeight);
        }
        
        // Кэш для Eigenvector Centrality
        let eigenvectorCache = null;
        let eigenvectorCalculating = false;
        
        async function calculateEigenvectorCentrality(iterations = 100, progressCallback = null) {
            if (eigenvectorCache) return eigenvectorCache;
            if (eigenvectorCalculating) return null;
            
            eigenvectorCalculating = true;
            
            return new Promise(async (resolve) => {
                const eigenvector = {};
                
                // Инициализация равными значениями
                nodes.forEach(n => {
                    eigenvector[n.id] = 1.0 / Math.sqrt(nodes.length);
                });
                
                // Построить матрицу смежности
                const adjacency = {};
                nodes.forEach(n => adjacency[n.id] = []);
                
                links.forEach(link => {
                    const src = link.source.id || link.source;
                    const tgt = link.target.id || link.target;
                    const weight = useWeightedPaths ? (link.weight || 2) / 3.0 : 1.0;
                    
                    if (respectDirection) {
                        // Направленный граф - входящие связи
                        adjacency[tgt].push({ neighbor: src, weight: weight });
                        if (link.bidirectional) {
                            adjacency[src].push({ neighbor: tgt, weight: weight });
                        }
                    } else {
                        // Ненаправленный граф
                        adjacency[src].push({ neighbor: tgt, weight: weight });
                        adjacency[tgt].push({ neighbor: src, weight: weight });
                    }
                });
                
                // Power iteration method
                for (let iter = 0; iter < iterations; iter++) {
                    const newEigenvector = {};
                    
                    // Вычисляем новые значения
                    nodes.forEach(node => {
                        let sum = 0;
                        adjacency[node.id].forEach(edge => {
                            sum += eigenvector[edge.neighbor] * edge.weight;
                        });
                        newEigenvector[node.id] = sum;
                    });
                    
                    // Нормализация (L2 norm)
                    let norm = 0;
                    Object.values(newEigenvector).forEach(val => {
                        norm += val * val;
                    });
                    norm = Math.sqrt(norm);
                    
                    // Избегаем деления на ноль
                    if (norm < 1e-10) {
                        console.warn('Eigenvector: норма слишком мала, прерываем итерации');
                        break;
                    }
                    
                    Object.keys(newEigenvector).forEach(key => {
                        eigenvector[key] = newEigenvector[key] / norm;
                    });
                    
                    // Обновляем прогресс
                    if (progressCallback && iter % 10 === 0) {
                        progressCallback(iter, iterations);
                        await new Promise(res => setTimeout(res, 0));
                    }
                }
                
                const result = Object.entries(eigenvector)
                    .map(([id, value]) => ({
                        node: nodes.find(n => n.id === id),
                        value: value
                    }))
                    .sort((a, b) => b.value - a.value);
                
                eigenvectorCache = result;
                eigenvectorCalculating = false;
                
                if (progressCallback) progressCallback(iterations, iterations);
                
                resolve(result);
            });
        }
        
        function invalidateEigenvectorCache() {
            eigenvectorCache = null;
            eigenvectorCalculating = false;
        }
        
        // Переменные для визуализации размером
        let originalNodeRadii = {};
        let isVisualizingBySize = false;
        let currentVisualizedMetric = null;
        
        // Сохранить оригинальные радиусы узлов
        function saveOriginalRadii() {
            if (Object.keys(originalNodeRadii).length === 0) {
                nodes.forEach(n => {
                    originalNodeRadii[n.id] = 18; // Оригинальный радиус
                });
            }
        }
        
        // Визуализация метрики размером узлов
        function visualizeMetricBySize(metricData, metricName) {
            if (!metricData || metricData.length === 0) {
                alert('Нет данных для визуализации');
                return;
            }
            
            saveOriginalRadii();
            
            isVisualizingBySize = true;
            currentVisualizedMetric = metricName;
            
            // Найти минимальное и максимальное значение
            const values = metricData.map(d => d.value || d.totalWeight || 0);
            const minValue = Math.min(...values);
            const maxValue = Math.max(...values);
            
            // Диапазон радиусов: от 8 до 35
            const minRadius = 8;
            const maxRadius = 35;
            
            // Создать мапу значений
            const valueMap = {};
            metricData.forEach(item => {
                const value = item.value || item.totalWeight || 0;
                // Нормализация в диапазон радиусов
                let radius;
                if (maxValue === minValue) {
                    radius = (minRadius + maxRadius) / 2;
                } else {
                    radius = minRadius + ((value - minValue) / (maxValue - minValue)) * (maxRadius - minRadius);
                }
                valueMap[item.node.id] = radius;
            });
            
            // Применить новые радиусы
            node.selectAll("circle")
                .transition()
                .duration(500)
                .attr("r", d => valueMap[d.id] || minRadius);
            
            // Обновить позицию текста
            node.selectAll("text")
                .transition()
                .duration(500)
                .attr("dy", d => -(valueMap[d.id] || minRadius) - 7);
            
            // Обновить маркеры (стрелки) - увеличить refX для больших узлов
            links.forEach((l, i) => {
                const tgt = l.target.id || l.target;
                const targetRadius = valueMap[tgt] || minRadius;
                
                link.filter((linkData, idx) => idx === i)
                    .attr("marker-end", d => {
                        // Создаём временный маркер с правильным refX
                        const markerId = `arrow-${d.type}-${i}`;
                        const existingMarker = defs.select(`#${markerId}`);
                        
                        if (existingMarker.empty()) {
                            const newMarker = defs.append("marker")
                                .attr("id", markerId)
                                .attr("viewBox", "0 -5 10 10")
                                .attr("refX", targetRadius + 8)
                                .attr("refY", 0)
                                .attr("markerWidth", 6)
                                .attr("markerHeight", 6)
                                .attr("orient", "auto")
                                .append("path")
                                .attr("d", "M0,-5L10,0L0,5")
                                .attr("fill", relationTypesObj[d.type].color);
                        } else {
                            existingMarker.attr("refX", targetRadius + 8);
                        }
                        
                        return `url(#${markerId})`;
                    });
            });
            
            // Обновить надпись кнопки
            const btn = document.getElementById('visualizeSizeBtn');
            if (btn) {
                btn.textContent = '🔄 Сбросить размеры';
                btn.style.background = '#e74c3c';
            }
            
            console.log(`Визуализация метрики "${metricName}" размером узлов активирована`);
        }
        
        // Восстановить оригинальные размеры
        function resetNodeSizes() {
            if (!isVisualizingBySize) return;
            
            isVisualizingBySize = false;
            currentVisualizedMetric = null;
            
            // Восстановить радиусы
            node.selectAll("circle")
                .transition()
                .duration(500)
                .attr("r", 18);
            
            // Восстановить позицию текста
            node.selectAll("text")
                .transition()
                .duration(500)
                .attr("dy", -25);
            
            // Восстановить оригинальные маркеры
            link.attr("marker-end", d => `url(#arrow-${d.type})`);
            
            // Удалить временные маркеры
            defs.selectAll("[id^='arrow-'][id$='-']").remove();
            
            // Обновить надпись кнопки
            const btn = document.getElementById('visualizeSizeBtn');
            if (btn) {
                btn.textContent = '📏 Визуализировать размером';
                btn.style.background = '#27ae60';
            }
            
            console.log('Оригинальные размеры узлов восстановлены');
        }
        
        // Переключатель визуализации
        function toggleVisualizationBySize() {
            if (isVisualizingBySize) {
                resetNodeSizes();
            } else {
                // Визуализировать текущую метрику
                if (!currentMetric) {
                    alert('Сначала выберите метрику из табов');
                    return;
                }
                
                let metricData = null;
                
                switch(currentMetric) {
                    case 'degree':
                        metricData = calculateWeightedDegree();
                        break;
                    case 'pagerank':
                        metricData = pageRankCache;
                        break;
                    case 'betweenness':
                        metricData = betweennessCache;
                        break;
                    case 'closeness':
                        metricData = closenessCache;
                        break;
                    case 'clustering':
                        metricData = clusteringCache;
                        break;
                    case 'eigenvector':
                        metricData = eigenvectorCache;
                        break;
                }
                
                if (!metricData) {
                    alert('Сначала запустите анализ для выбранной метрики');
                    return;
                }
                
                visualizeMetricBySize(metricData, currentMetric);
            }
        }
        
        // Поиск компонент связности
        function findConnectedComponents() {
            const visited = new Set();
            const components = [];
            
            nodes.forEach(node => {
                if (visited.has(node.id)) return;
                
                const component = [];
                const queue = [node.id];
                visited.add(node.id);
                
                while (queue.length > 0) {
                    const current = queue.shift();
                    component.push(current);
                    
                    links.forEach(link => {
                        const src = link.source.id || link.source;
                        const tgt = link.target.id || link.target;
                        
                        if (respectDirection) {
                            if (src === current && !visited.has(tgt)) {
                                visited.add(tgt);
                                queue.push(tgt);
                            } else if (link.bidirectional && tgt === current && !visited.has(src)) {
                                visited.add(src);
                                queue.push(src);
                            }
                        } else {
                            if (src === current && !visited.has(tgt)) {
                                visited.add(tgt);
                                queue.push(tgt);
                            } else if (tgt === current && !visited.has(src)) {
                                visited.add(src);
                                queue.push(src);
                            }
                        }
                    });
                }
                
                components.push(component);
            });
            
            return components;
        }
        
        // Расчёт общей статистики графа
        async function calculateGraphStatistics(progressCallback = null) {
            const stats = {
                nodes: nodes.length,
                edges: links.length,
                density: 0,
                avgDegree: 0,
                diameter: 0,
                avgPathLength: 0,
                components: 0,
                avgClustering: 0,
                reciprocity: 0
            };
            
            // Плотность
            const maxEdges = nodes.length * (nodes.length - 1);
            stats.density = (2 * links.length) / maxEdges;
            
            // Средняя степень
            const degrees = nodes.map(n => {
                let degree = 0;
                links.forEach(l => {
                    const src = l.source.id || l.source;
                    const tgt = l.target.id || l.target;
                    
                    if (respectDirection) {
                        if (src === n.id || tgt === n.id) degree++;
                        if (l.bidirectional && (src === n.id || tgt === n.id)) degree++;
                    } else {
                        if (src === n.id || tgt === n.id) degree++;
                    }
                });
                return degree;
            });
            stats.avgDegree = degrees.reduce((a, b) => a + b, 0) / degrees.length;
            
            // Взаимность (reciprocity)
            let bidirectionalCount = links.filter(l => l.bidirectional).length;
            stats.reciprocity = links.length > 0 ? bidirectionalCount / links.length : 0;
            
            if (progressCallback) progressCallback(1, 4);
            await new Promise(resolve => setTimeout(resolve, 0));
            
            // Диаметр и средняя длина пути
            let totalPaths = 0;
            let pathCount = 0;
            let maxPath = 0;
            
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    const path = findShortestPath(nodes[i].id, nodes[j].id, false, respectDirection);
                    if (path) {
                        const length = path.length - 1;
                        totalPaths += length;
                        pathCount++;
                        maxPath = Math.max(maxPath, length);
                    }
                }
            }
            
            stats.diameter = maxPath;
            stats.avgPathLength = pathCount > 0 ? totalPaths / pathCount : 0;
            
            if (progressCallback) progressCallback(2, 4);
            await new Promise(resolve => setTimeout(resolve, 0));
            
            // Средний коэффициент кластеризации
            const clustering = calculateClusteringCoefficient();
            stats.avgClustering = clustering.reduce((sum, c) => sum + c.value, 0) / clustering.length;
            
            if (progressCallback) progressCallback(3, 4);
            await new Promise(resolve => setTimeout(resolve, 0));
            
            // Количество компонент связности
            stats.components = findConnectedComponents().length;
            
            if (progressCallback) progressCallback(4, 4);
            
            return stats;
        }
        
        // Описания и интерпретации метрик
        const metricDescriptions = {
            degree: {
                name: "Степень узла (Degree Centrality)",
                description: "Количество связей узла с другими узлами",
                interpretation: () => {
                    if (respectDirection && useWeightedPaths) {
                        return "В направленном взвешенном графе: высокий входящий вес = концепцию часто цитируют через сильные связи, высокий исходящий = концепция оказывает сильное влияние на другие.";
                    } else if (respectDirection && !useWeightedPaths) {
                        return "В направленном графе: высокие входящие связи = на концепцию часто ссылаются, высокие исходящие = концепция активно влияет на другие. Сила связей не учитывается.";
                    } else if (!respectDirection && useWeightedPaths) {
                        return "В ненаправленном взвешенном графе: высокое значение = концепция связана со многими идеями сильными связями. Чем больше вес связей, тем важнее концепция.";
                    } else {
                        return "В ненаправленном графе: высокое значение = концепция связана со многими идеями. Это \"хабы\" философской сети. Все связи считаются одинаково важными.";
                    }
                },
                usage: "Используйте для выявления наиболее активно используемых концепций, вокруг которых строятся философские системы.",
                formula: () => useWeightedPaths ? "Σ весов всех связей узла" : "Количество рёбер, инцидентных узлу"
            },
            
            pagerank: {
                name: "PageRank",
                description: "Авторитетность узла через качество входящих связей",
                interpretation: () => {
                    if (respectDirection && useWeightedPaths) {
                        return "Направленный взвешенный: концепция получает больше авторитета от важных узлов через сильные связи. Фундаментальное влияние (вес 3) передаёт больше авторитета, чем слабое упоминание (вес 1).";
                    } else if (respectDirection && !useWeightedPaths) {
                        return "Направленный: концепция важна, если на неё ссылаются другие влиятельные идеи. Все связи считаются равными по силе.";
                    } else if (!respectDirection && useWeightedPaths) {
                        return "Ненаправленный взвешенный: концепция важна через сильные связи с другими важными концепциями. Симметричное взаимное усиление.";
                    } else {
                        return "Ненаправленный: концепция важна, если связана с другими важными концепциями. Симметричная версия без учёта силы и направления связей.";
                    }
                },
                usage: "Используйте для определения концепций, которые получают влияние от других важных идей. Отличается от Degree тем, что учитывает не только количество, но и важность соседей.",
                formula: () => "PR(A) = (1-d)/N + d × Σ(PR(Ti)/C(Ti))" + (useWeightedPaths ? " × w(Ti,A)" : "")
            },
            
            betweenness: {
                name: "Betweenness Centrality (Посредничество)",
                description: "Частота нахождения узла на кратчайших путях между другими узлами",
                interpretation: () => {
                    if (respectDirection && useWeightedPaths) {
                        return "Направленный взвешенный: концепции-мосты, через которые проходит направленное влияние по наиболее сильным связям. Алгоритм предпочитает пути с высокими весами.";
                    } else if (respectDirection && !useWeightedPaths) {
                        return "Направленный: концепции-мосты для направленного влияния. Путь выбирается по минимуму рёбер, сила связей не важна.";
                    } else if (!respectDirection && useWeightedPaths) {
                        return "Ненаправленный взвешенный: концепции-мосты между традициями. Идеи распространяются через сильные связи — фундаментальные влияния важнее слабых упоминаний.";
                    } else {
                        return "Ненаправленный: концепции-мосты между традициями. Путь определяется минимумом шагов, все связи равнозначны.";
                    }
                },
                usage: "Используйте для поиска концепций, которые соединяют различные философские школы. Удаление таких узлов может разбить граф на изолированные компоненты.",
                formula: () => {
                    const base = "CB(v) = Σ(σst(v)/σst), где σst — число кратчайших путей";
                    return base + (useWeightedPaths ? " (с учётом весов — минимум 'стоимости')" : " (минимум рёбер)");
                }
            },
            
            closeness: {
                name: "Closeness Centrality (Близость)",
                description: "Обратное среднее расстояние от узла до всех остальных узлов",
                interpretation: () => {
                    if (respectDirection && useWeightedPaths) {
                        return "Направленный взвешенный: концепция в центре потока влияния. Может быстро «достучаться» до других идей по сильным направленным связям. Фундаментальные связи сокращают 'расстояние'.";
                    } else if (respectDirection && !useWeightedPaths) {
                        return "Направленный: из концепции можно быстро достичь других идей по направленным связям. Расстояние = число шагов.";
                    } else if (!respectDirection && useWeightedPaths) {
                        return "Ненаправленный взвешенный: концепция в самом центре сети взаимовлияний. Сильные связи делают её более 'близкой' ко всем остальным идеям.";
                    } else {
                        return "Ненаправленный: концепция в центре сети. Может достичь любой другой идеи за минимум шагов, независимо от силы связей.";
                    }
                },
                usage: "Используйте для выявления концепций, которые могут служить отправной точкой для понимания всей философской системы. Они наиболее «доступны» из любой части сети.",
                formula: () => {
                    const base = "CC(v) = (n-1) / Σd(v,u), где d(v,u) — расстояние";
                    return base + (useWeightedPaths ? " (взвешенное)" : " (по числу рёбер)");
                }
            },
            
            clustering: {
                name: "Clustering Coefficient (Коэффициент кластеризации)",
                description: "Степень, в которой соседи узла связаны между собой",
                interpretation: () => {
                    return "Высокий коэффициент = концепция в плотном кластере взаимосвязанных идей (философская школа). Низкий = соединяет разные группы. Метрика всегда ненаправленная по определению, веса не влияют на расчёт.";
                },
                usage: "Используйте для определения, является ли концепция частью тесно связанной философской школы (высокий коэффициент) или служит мостом между разными традициями (низкий коэффициент).",
                formula: () => "C(v) = 2e(v) / (k(v)(k(v)-1)), где e(v) — рёбра между соседями"
            },
            
            eigenvector: {
                name: "Eigenvector Centrality",
                description: "Влиятельность узла через связи с другими влиятельными узлами",
                interpretation: () => {
                    if (respectDirection && useWeightedPaths) {
                        return "Направленный взвешенный: концепция важна, если на неё сильно влияют другие важные концепции. Входящая связь от влиятельного узла с весом 3 даёт больше 'очков', чем с весом 1.";
                    } else if (respectDirection && !useWeightedPaths) {
                        return "Направленный: концепция важна через входящие связи от других важных узлов. Количество важнее силы связи.";
                    } else if (!respectDirection && useWeightedPaths) {
                        return "Ненаправленный взвешенный: концепция важна через сильные связи с другими важными концепциями. Взаимное усиление через фундаментальные влияния.";
                    } else {
                        return "Ненаправленный: концепция важна, если связана с другими важными концепциями. Симметричное взаимное усиление, все связи равны.";
                    }
                },
                usage: "Используйте для выявления концепций, которые составляют ядро философской традиции. Они важны не сами по себе, а через взаимное усиление с другими ключевыми идеями.",
                formula: () => {
                    const base = "x(v) = (1/λ) × Σ A(v,u) × x(u)";
                    return base + (useWeightedPaths ? ", A — взвешенная матрица" : ", A — бинарная матрица");
                }
            }
        };
        
        // Функция показа описания метрики
        function showMetricDescription(metricName) {
            const desc = metricDescriptions[metricName];
            if (!desc) return '';
            
            // Получаем динамические значения (функции или статические строки)
            const interpretation = typeof desc.interpretation === 'function' 
                ? desc.interpretation() 
                : desc.interpretation;
            const formula = typeof desc.formula === 'function' 
                ? desc.formula() 
                : desc.formula;
            
            return `
                <div style="background: rgba(52, 152, 219, 0.1); padding: 12px; border-radius: 8px; margin-bottom: 12px; font-size: 11px; line-height: 1.6;">
                    <div style="font-weight: 700; color: #2c3e50; margin-bottom: 6px; font-size: 12px;">
                        ${desc.name}
                    </div>
                    <div style="color: #34495e; margin-bottom: 8px;">
                        <strong>Что измеряет:</strong> ${desc.description}
                    </div>
                    <div style="color: #34495e; margin-bottom: 8px;">
                        <strong>Интерпретация:</strong> ${interpretation}
                    </div>
                    <div style="color: #34495e; margin-bottom: 8px;">
                        <strong>Применение:</strong> ${desc.usage}
                    </div>
                    <div style="color: #7f8c8d; font-style: italic; font-size: 10px;">
                        <strong>Формула:</strong> ${formula}
                    </div>
                </div>
            `;
        }
        
        // Текущая выбранная метрика
        let currentMetric = null;
        
        // Переключение использования весов
        function toggleWeightUsage() {
            useWeightedPaths = document.getElementById('useWeightsToggle').checked;
            
            // Сбрасываем кэш всех метрик, зависящих от весов
            invalidateBetweennessCache();
            invalidatePageRankCache();
            invalidateClosenessCache();
            invalidateClusteringCache();
            invalidateEigenvectorCache();
            
            console.log('Режим учёта весов:', useWeightedPaths ? 'Включён' : 'Выключен');
            
            // Если визуализация активна, сбрасываем её
            if (isVisualizingBySize) {
                resetNodeSizes();
            }
            
            // Если есть текущая метрика, обновляем её
            if (currentMetric) {
                showMetric(currentMetric);
            }
        }
        
        // Переключение учёта направленности (НОВОЕ!)
        function toggleDirectionUsage() {
            respectDirection = document.getElementById('respectDirectionToggle').checked;
            
            // Сбрасываем кэш ВСЕХ метрик, так как направленность влияет на всё
            invalidateInfluenceCache();
            invalidateBetweennessCache();
            invalidatePageRankCache();
            invalidateClosenessCache();
            invalidateClusteringCache(); // Кластеризация не зависит, но сбросим для единообразия
            invalidateEigenvectorCache();
            
            console.log('Режим учёта направленности:', respectDirection ? 'Включён' : 'Выключен');
            
            // Если визуализация активна, сбрасываем её
            if (isVisualizingBySize) {
                resetNodeSizes();
            }
            
            // Если есть текущая метрика, обновляем её
            if (currentMetric) {
                showMetric(currentMetric);
            }
        }
        
        // Показать модальное окно выборочного анализа
        function showSelectiveAnalysisModal() {
            const modal = document.getElementById('selectiveAnalysisModal');
            const overlay = document.getElementById('modalOverlay');
            
            modal.classList.add('show');
            overlay.classList.add('show');
        }

        // Закрыть модальное окно выборочного анализа
        function closeSelectiveAnalysisModal() {
            const modal = document.getElementById('selectiveAnalysisModal');
            const overlay = document.getElementById('modalOverlay');
            
            modal.classList.remove('show');
            overlay.classList.remove('show');
        }

        // Выборочный анализ
        async function runSelectiveAnalysis() {
            const selectedOptions = {
                pagerank: document.getElementById('opt-pagerank').checked,
                betweenness: document.getElementById('opt-betweenness').checked,
                closeness: document.getElementById('opt-closeness').checked,
                clustering: document.getElementById('opt-clustering').checked,
                eigenvector: document.getElementById('opt-eigenvector').checked
            };
            
            // Проверяем, выбран ли хотя бы один метод
            if (!Object.values(selectedOptions).some(v => v)) {
                alert('Выберите хотя бы один метод анализа');
                return;
            }
            
            closeSelectiveAnalysisModal();
            
            try {
                let progress = 0;
                const totalMethods = Object.values(selectedOptions).filter(v => v).length;
                const progressStep = 100 / (totalMethods + 1);
                
                // Общая статистика всегда
                const stats = await calculateGraphStatistics((current, total) => {
                    const percent = Math.round((current / total) * progressStep);
                    showProgress('Общая статистика...', percent);
                });
                displayGeneralStats(stats);
                progress += progressStep;
                
                // PageRank
                if (selectedOptions.pagerank) {
                    showProgress('Расчёт PageRank...', progress);
                    await calculatePageRank(20, 0.85, (current, total) => {
                        const percent = progress + Math.round((current / total) * progressStep);
                        showProgress('Расчёт PageRank...', percent);
                    });
                    progress += progressStep;
                }
                
                // Eigenvector
                if (selectedOptions.eigenvector) {
                    showProgress('Расчёт Eigenvector...', progress);
                    await calculateEigenvectorCentrality(100, (current, total) => {
                        const percent = progress + Math.round((current / total) * progressStep);
                        showProgress('Расчёт Eigenvector...', percent);
                    });
                    progress += progressStep;
                }
                
                // Betweenness
                if (selectedOptions.betweenness) {
                    showProgress('Расчёт Betweenness...', progress);
                    await calculateBetweennessAsync((current, total) => {
                        const percent = progress + Math.round((current / total) * progressStep);
                        showProgress('Расчёt Betweenness...', percent);
                    });
                    progress += progressStep;
                }
                
                // Closeness
                if (selectedOptions.closeness) {
                    showProgress('Расчёт Closeness...', progress);
                    await calculateClosenessCentrality((current, total) => {
                        const percent = progress + Math.round((current / total) * progressStep);
                        showProgress('Расчёт Closeness...', percent);
                    });
                    progress += progressStep;
                }
                
                // Clustering
                if (selectedOptions.clustering) {
                    showProgress('Расчёт Clustering...', progress);
                    await new Promise(resolve => setTimeout(resolve, 100));
                    calculateClusteringCoefficient();
                    progress = 100;
                }
                
                document.getElementById('generalStatsSection').style.display = 'block';
                document.getElementById('metricsSection').style.display = 'block';
                document.getElementById('visualizationSection').style.display = 'block';
                
                // Показываем первый доступный результат
                const firstAvailable = Object.keys(selectedOptions).find(key => selectedOptions[key]);
                if (firstAvailable) {
                    switchMetric(firstAvailable);
                }
                
                showProgress('Анализ завершён!', 100);
                setTimeout(hideProgress, 1500);
                
                console.log('Выборочный анализ завершён');
                
            } catch (error) {
                console.error('Ошибка при выборочном анализе:', error);
                hideProgress();
                alert('Произошла ошибка при анализе');
            }
        }

        // Быстрый анализ (только Degree и общая статистика)
        async function runQuickAnalysis() {
            showProgress('Быстрый анализ...', 0);
            
            try {
                // Общая статистика
                const stats = await calculateGraphStatistics((current, total) => {
                    const percent = Math.round((current / total) * 50);
                    showProgress('Общая статистика...', percent);
                });
                displayGeneralStats(stats);
                
                // Degree centrality
                showProgress('Степень узлов...', 75);
                await new Promise(resolve => setTimeout(resolve, 100));
                
                document.getElementById('generalStatsSection').style.display = 'block';
                document.getElementById('metricsSection').style.display = 'block';
                document.getElementById('visualizationSection').style.display = 'block';
                
                switchMetric('degree');
                
                showProgress('Готово!', 100);
                setTimeout(hideProgress, 1000);
                
            } catch (error) {
                console.error('Ошибка при анализе:', error);
                hideProgress();
                alert('Произошла ошибка при анализе');
            }
        }
        
        // Полный анализ (все метрики)
        async function runFullAnalysis() {
            showProgress('Запуск полного анализа...', 0);
            
            try {
                // 1. Общая статистика (15%)
                const stats = await calculateGraphStatistics((current, total) => {
                    const percent = Math.round((current / total) * 15);
                    showProgress('Общая статистика...', percent);
                });
                displayGeneralStats(stats);
                
                // 2. PageRank (15%)
                showProgress('Расчёт PageRank...', 15);
                await calculatePageRank(20, 0.85, (current, total) => {
                    const percent = 15 + Math.round((current / total) * 15);
                    showProgress('Расчёт PageRank...', percent);
                });
                
                // 3. Eigenvector (15%)
                showProgress('Расчёт Eigenvector...', 30);
                await calculateEigenvectorCentrality(100, (current, total) => {
                    const percent = 30 + Math.round((current / total) * 15);
                    showProgress('Расчёт Eigenvector...', percent);
                });
                
                // 4. Betweenness (25%)
                showProgress('Расчёт Betweenness...', 45);
                await calculateBetweennessAsync((current, total) => {
                    const percent = 45 + Math.round((current / total) * 25);
                    showProgress('Расчёт Betweenness...', percent);
                });
                
                // 5. Closeness (20%)
                showProgress('Расчёт Closeness...', 70);
                await calculateClosenessCentrality((current, total) => {
                    const percent = 70 + Math.round((current / total) * 20);
                    showProgress('Расчёт Closeness...', percent);
                });
                
                // 6. Clustering (10%)
                showProgress('Расчёт Clustering...', 90);
                await new Promise(resolve => setTimeout(resolve, 100));
                calculateClusteringCoefficient();
                
                document.getElementById('generalStatsSection').style.display = 'block';
                document.getElementById('metricsSection').style.display = 'block';
                document.getElementById('visualizationSection').style.display = 'block';
                
                switchMetric('pagerank');
                
                showProgress('Анализ завершён!', 100);
                setTimeout(hideProgress, 1500);
                
                console.log('Полный анализ завершён');
                
            } catch (error) {
                console.error('Ошибка при полном анализе:', error);
                hideProgress();
                alert('Произошла ошибка при анализе');
            }
        }
        
        // Показать прогресс
        function showProgress(label, percent) {
            const progressDiv = document.getElementById('analysisProgress');
            const progressBar = document.getElementById('progressBar');
            const progressPercent = document.getElementById('progressPercent');
            const progressLabel = document.getElementById('progressLabel');
            
            progressDiv.style.display = 'block';
            progressBar.style.width = percent + '%';
            progressPercent.textContent = percent + '%';
            progressLabel.textContent = label;
        }
        
        // Скрыть прогресс
        function hideProgress() {
            const progressDiv = document.getElementById('analysisProgress');
            progressDiv.style.display = 'none';
        }
        
        // Сброс всего кэша
        function clearAllCache() {
            invalidateInfluenceCache();
            invalidateBetweennessCache();
            invalidatePageRankCache();
            invalidateClosenessCache();
            invalidateClusteringCache();
            invalidateEigenvectorCache();
            
            // Сбросить визуализацию
            if (isVisualizingBySize) {
                resetNodeSizes();
            }
            
            document.getElementById('generalStatsSection').style.display = 'none';
            document.getElementById('metricsSection').style.display = 'none';
            document.getElementById('visualizationSection').style.display = 'none';
            
            currentMetric = null;
            
            console.log('Весь кэш очищен');
            alert('Кэш очищен. Запустите анализ снова.');
        }
        
        // Отображение общей статистики
        function displayGeneralStats(stats) {
            const statsDiv = document.getElementById('generalStats');
            
            const modeInfo = `
                <div style="background: rgba(52, 152, 219, 0.08); padding: 8px; border-radius: 5px; margin-bottom: 8px; font-size: 10px;">
                    Режим: <strong>${respectDirection ? 'Направленный' : 'Ненаправленный'}</strong> граф, 
                    веса <strong>${useWeightedPaths ? 'учитываются' : 'не учитываются'}</strong>
                </div>
            `;
            
            statsDiv.innerHTML = modeInfo + `
                Узлов: <strong>${stats.nodes}</strong><br>
                Рёбер: <strong>${stats.edges}</strong><br>
                Плотность: <strong>${stats.density.toFixed(4)}</strong><br>
                Средняя степень: <strong>${stats.avgDegree.toFixed(2)}</strong><br>
                Взаимность: <strong>${(stats.reciprocity * 100).toFixed(1)}%</strong><br>
                Диаметр: <strong>${stats.diameter}</strong><br>
                Средний путь: <strong>${stats.avgPathLength.toFixed(2)}</strong><br>
                Компонент связности: <strong>${stats.components}</strong><br>
                Средняя кластеризация: <strong>${stats.avgClustering.toFixed(3)}</strong>
            `;
        }
        
        // Переключение метрик
        function switchMetric(metricName) {
            currentMetric = metricName;
            
            // Обновляем активную кнопку
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-metric="${metricName}"]`)?.classList.add('active');
            
            showMetric(metricName);
        }
        
        // Показать конкретную метрику
        function showMetric(metricName) {
            const contentDiv = document.getElementById('metricContent');
            
            // Показать описание метрики
            let html = showMetricDescription(metricName);
            
            switch(metricName) {
                case 'degree':
                    const degree = calculateWeightedDegree();
                    html += formatMetricResults(
                        degree.slice(0, 10), 
                        'totalWeight',
                        useWeightedPaths ? 'Взвешенная степень' : 'Степень узла'
                    );
                    break;
                    
                case 'pagerank':
                    if (pageRankCache) {
                        html += formatMetricResults(
                            pageRankCache.slice(0, 10), 
                            'value',
                            'PageRank',
                            true
                        );
                    } else {
                        html += `
                            <div style="font-size: 11px; color: #95a5a6; padding: 10px; background: rgba(52, 152, 219, 0.05); border-radius: 5px;">
                                Метрика не рассчитана
                            </div>
                            <button onclick="runSingleMetric('pagerank')" style="width: 100%; margin-top: 10px; background: #3498db; color: white; border: none; padding: 8px; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 600;">
                                Рассчитать PageRank
                            </button>
                        `;
                    }
                    break;
                    
                case 'betweenness':
                    if (betweennessCache) {
                        html += formatMetricResults(
                            betweennessCache.slice(0, 10), 
                            'value',
                            'Betweenness',
                            true
                        );
                    } else {
                        html += `
                            <div style="font-size: 11px; color: #95a5a6; padding: 10px; background: rgba(52, 152, 219, 0.05); border-radius: 5px;">
                                Метрика не рассчитана
                            </div>
                            <button onclick="runSingleMetric('betweenness')" style="width: 100%; margin-top: 10px; background: #3498db; color: white; border: none; padding: 8px; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 600;">
                                Рассчитать Betweenness
                            </button>
                        `;
                    }
                    break;
                    
                case 'closeness':
                    if (closenessCache) {
                        html += formatMetricResults(
                            closenessCache.slice(0, 10), 
                            'value',
                            'Closeness',
                            true
                        );
                    } else {
                        html += `
                            <div style="font-size: 11px; color: #95a5a6; padding: 10px; background: rgba(52, 152, 219, 0.05); border-radius: 5px;">
                                Метрика не рассчитана
                            </div>
                            <button onclick="runSingleMetric('closeness')" style="width: 100%; margin-top: 10px; background: #3498db; color: white; border: none; padding: 8px; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 600;">
                                Рассчитать Closeness
                            </button>
                        `;
                    }
                    break;
                    
                case 'clustering':
                    if (clusteringCache) {
                        html += formatMetricResults(
                            clusteringCache.slice(0, 10), 
                            'value',
                            'Коэффициент кластеризации',
                            true
                        );
                    } else {
                        const clustering = calculateClusteringCoefficient();
                        html += formatMetricResults(
                            clustering.slice(0, 10), 
                            'value',
                            'Коэффициент кластеризации',
                            true
                        );
                    }
                    break;
                    
                case 'eigenvector':
                    if (eigenvectorCache) {
                        html += formatMetricResults(
                            eigenvectorCache.slice(0, 10), 
                            'value',
                            'Eigenvector Centrality',
                            true
                        );
                    } else {
                        html += `
                            <div style="font-size: 11px; color: #95a5a6; padding: 10px; background: rgba(52, 152, 219, 0.05); border-radius: 5px;">
                                Метрика не рассчитана
                            </div>
                            <button onclick="runSingleMetric('eigenvector')" style="width: 100%; margin-top: 10px; background: #3498db; color: white; border: none; padding: 8px; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 600;">
                                Рассчитать Eigenvector
                            </button>
                        `;
                    }
                    break;
            }
            
            contentDiv.innerHTML = html;
        }

        // Расчёт одной метрики
        async function runSingleMetric(metricName) {
            try {
                showProgress(`Расчёт ${metricName}...`, 0);
                
                switch(metricName) {
                    case 'pagerank':
                        await calculatePageRank(20, 0.85, (current, total) => {
                            const percent = Math.round((current / total) * 100);
                            showProgress('Расчёт PageRank...', percent);
                        });
                        break;
                        
                    case 'betweenness':
                        await calculateBetweennessAsync((current, total) => {
                            const percent = Math.round((current / total) * 100);
                            showProgress('Расчёт Betweenness...', percent);
                        });
                        break;
                        
                    case 'closeness':
                        await calculateClosenessCentrality((current, total) => {
                            const percent = Math.round((current / total) * 100);
                            showProgress('Расчёт Closeness...', percent);
                        });
                        break;
                        
                    case 'eigenvector':
                        await calculateEigenvectorCentrality(100, (current, total) => {
                            const percent = Math.round((current / total) * 100);
                            showProgress('Расчёт Eigenvector...', percent);
                        });
                        break;
                }
                
                document.getElementById('generalStatsSection').style.display = 'block';
                document.getElementById('metricsSection').style.display = 'block';
                document.getElementById('visualizationSection').style.display = 'block';
                
                showProgress('Готово!', 100);
                setTimeout(() => {
                    hideProgress();
                    switchMetric(metricName);
                }, 500);
                
            } catch (error) {
                console.error('Ошибка при расчёте метрики:', error);
                hideProgress();
                alert('Произошла ошибка при расчёте');
            }
        }
        
        // Форматирование результатов метрики
        function formatMetricResults(data, valueKey, title, isDecimal = false) {
            if (!data || data.length === 0) {
                return '<div style="font-size: 11px; color: #95a5a6; padding: 10px;">Нет данных</div>';
            }
            
            let html = `<h4 style="margin: 10px 0; font-size: 13px;">${title}</h4>`;
            
            data.forEach((item, index) => {
                const value = item[valueKey];
                const displayValue = isDecimal ? value.toFixed(4) : Math.round(value);
                
                html += `
                    <div class="stat-item" onclick="highlightNodeById('${item.node.id}')">
                        <span class="stat-rank">${index + 1}.</span>
                        <span class="stat-name">${item.node.label}</span>
                        <span class="stat-value">${displayValue}</span>
                        <span class="stat-philosopher">${item.node.concept}</span>
                    </div>
                `;
            });
            
            return html;
        }
        
        // Подсветка узла по ID
        function highlightNodeById(nodeId) {
            const nodeData = nodes.find(n => n.id === nodeId);
            if (nodeData) {
                selectedNodes.clear();
                selectedNodes.add(nodeData);
                highlightConnected([nodeData]);
                
                // Центрируем на узле
                const nodeElement = node.filter(d => d.id === nodeId);
                if (nodeElement.size() > 0) {
                    const d = nodeElement.datum();
                    const transform = d3.zoomIdentity
                        .translate(width / 2 - d.x, height / 2 - d.y)
                        .scale(1.5);
                    svg.transition().duration(750).call(zoom.transform, transform);
                }
            }
        }
        
        // Экспорт в PNG
        function exportToPNG() {
            const svgElement = document.getElementById('graph');
            const svgClone = svgElement.cloneNode(true);
            
            // Получаем текущий transform от zoom
            const gElement = svgClone.querySelector('g');
            const transform = g.attr('transform');
            if (transform) {
                gElement.setAttribute('transform', transform);
            }
            
            // Применяем инлайн-стили к тексту
            const textElements = svgClone.querySelectorAll('text');
            textElements.forEach(text => {
                text.style.fontFamily = "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif";
                text.style.fontSize = '10px';
                text.style.fontWeight = '600';
                text.style.fill = '#fff';
                text.style.textShadow = '0 0 4px black';
            });
            
            // Применяем инлайн-стили к узлам
            const circles = svgClone.querySelectorAll('circle');
            circles.forEach(circle => {
                const computedStyle = window.getComputedStyle(circle);
                circle.style.strokeWidth = '3px';
                circle.style.filter = 'drop-shadow(0 0 10px rgba(255,255,255,0.4))';
            });
            
            // Применяем инлайн-стили к связям
            const paths = svgClone.querySelectorAll('path.link');
            paths.forEach(path => {
                path.style.fill = 'none';
                const computedStyle = window.getComputedStyle(path);
                path.style.stroke = computedStyle.stroke;
                path.style.strokeWidth = computedStyle.strokeWidth;
                path.style.opacity = computedStyle.opacity;
            });
            
            // Увеличиваем разрешение для лучшего качества
            const scale = 2;
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            canvas.width = width * scale;
            canvas.height = height * scale;
            ctx.scale(scale, scale);
            
            const svgData = new XMLSerializer().serializeToString(svgClone);
            const img = new Image();
            
            img.onload = function() {
                // Рисуем фон
                ctx.fillStyle = '#0f0c29';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Рисуем SVG
                ctx.drawImage(img, 0, 0, width, height);
                
                // Конвертируем в PNG
                canvas.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.download = 'philosophy-graph.png';
                    link.href = url;
                    link.click();
                    URL.revokeObjectURL(url);
                }, 'image/png');
            };
            
            img.onerror = function(e) {
                console.error('Ошибка загрузки изображения:', e);
                alert('Ошибка при экспорте. Попробуйте использовать экспорт в SVG.');
            };
            
            // Кодируем SVG данные
            const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
            const url = URL.createObjectURL(svgBlob);
            img.src = url;
        }
        
        // Экспорт в SVG
        function exportToSVG() {
            const svgElement = document.getElementById('graph');
            const svgData = new XMLSerializer().serializeToString(svgElement);
            
            const blob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            
            const link = document.createElement('a');
            link.download = 'philosophy-graph.svg';
            link.href = url;
            link.click();
            
            URL.revokeObjectURL(url);
        }

        const width = window.innerWidth;
        const height = window.innerHeight;
        
        const svg = d3.select("#graph")
            .attr("width", width)
            .attr("height", height);

        // Контейнер для масштабирования и прокрутки
        const g = svg.append("g");

        // Настройка zoom
        const zoom = d3.zoom()
            .scaleExtent([0.1, 4])
            .on("zoom", (event) => {
                g.attr("transform", event.transform);
            });

        svg.call(zoom);

        // Клик на фон для сброса подсветки
        svg.on("click", function(event) {
            if (event.target === this) {
                resetHighlight();
            }
        });

        const defs = svg.append("defs");
        
        Object.keys(relationTypesObj).forEach(type => {
            defs.append("marker")
                .attr("id", `arrow-${type}`)
                .attr("viewBox", "0 -5 10 10")
                .attr("refX", 26)
                .attr("refY", 0)
                .attr("markerWidth", 6)
                .attr("markerHeight", 6)
                .attr("orient", "auto")
                .append("path")
                .attr("d", "M0,-5L10,0L0,5")
                .attr("fill", relationTypesObj[type].color);
            // Специальный маркер для внутренних противоречий
            defs.append("marker")
                .attr("id", "arrow-internal_contradiction")
                .attr("viewBox", "0 -5 10 10")
                .attr("refX", 26)
                .attr("refY", 0)
                .attr("markerWidth", 6)
                .attr("markerHeight", 6)
                .attr("orient", "auto")
                .append("path")
                .attr("d", "M0,-5L10,0L0,5")
                .attr("fill", relationTypesObj["internal_contradiction"].color);
            
        });

        let simulation = d3.forceSimulation(nodes)
            .force("link", d3.forceLink(links).id(d => d.id).distance(160))
            .force("charge", d3.forceManyBody().strength(-350))
            .force("center", d3.forceCenter(width / 2, height / 2))
            .force("collision", d3.forceCollide().radius(45))
            .alphaDecay(0.02); // Ускоряем затухание симуляции
        
        // Останавливаем симуляцию после стабилизации
        let tickCount = 0;
        const maxTicks = 300; // Ограничиваем количество тиков
        
        simulation.on("tick", () => {
            tickCount++;
            
            // Оптимизация: обновляем только видимые элементы
            link.filter(function() { return this.style.display !== "none"; })
                .attr("d", d => {
                    const dx = d.target.x - d.source.x;
                    const dy = d.target.y - d.source.y;
                    const dr = Math.sqrt(dx * dx + dy * dy) * 1.5;
                    return `M${d.source.x},${d.source.y}A${dr},${dr} 0 0,1 ${d.target.x},${d.target.y}`;
                });

            node.filter(function() { return this.style.display !== "none"; })
                .attr("transform", d => `translate(${d.x},${d.y})`);
            
            // Останавливаем после определенного количества тиков
            if (tickCount >= maxTicks) {
                simulation.stop();
            }
        });
        
        simulation.on("end", () => {
            console.log("Симуляция завершена после", tickCount, "тиков");
            console.log("Производительность - узлов:", nodes.length, "связей:", links.length);
            
            // Информация о памяти (если доступно)
            if (performance.memory) {
                console.log("Использование памяти:", 
                    Math.round(performance.memory.usedJSHeapSize / 1048576), "МБ");
            }
        });

        // Позиции для группировки по философам
        const philosopherNames = Object.keys(philosopherConcepts);
        const groupPositions = {};
        const cols = 6;
        const rows = Math.ceil(philosopherNames.length / cols);
        const spacingX = width / (cols + 1);
        const spacingY = height / (rows + 1);

        philosopherNames.forEach((phil, i) => {
            const col = i % cols;
            const row = Math.floor(i / cols);
            groupPositions[phil] = {
                x: spacingX * (col + 1),
                y: spacingY * (row + 1)
            };
        });

        let isGrouped = false;
        let selectedNodes = new Set(); // Множество выбранных узлов

        const link = g.append("g")
            .selectAll("path")
            .data(links)
            .enter()
            .append("path")
            .attr("class", d => {
                let classes = "link";
                if (d.bidirectional) classes += " bidirectional";
                if (d.type === "internal_contradiction") classes += " internal-contradiction";
                
                // Добавляем класс веса
                if (d.weight === 1) classes += " weight-weak";
                else if (d.weight === 2) classes += " weight-medium";
                else if (d.weight === 3) classes += " weight-strong";
                
                return classes;
            })
            .attr("stroke", d => relationTypesObj[d.type].color)
            .attr("marker-end", d => `url(#arrow-${d.type})`);

        const node = g.append("g")
            .selectAll("g")
            .data(nodes)
            .enter()
            .append("g")
            .attr("class", "node")
            .call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));

        node.append("circle")
            .attr("r", 18)
            .attr("fill", d => philosopherConcepts[d.concept].color)
            .attr("stroke", "#fff");

        node.append("text")
            .attr("dy", -25)
            .attr("text-anchor", "middle")
            .text(d => d.label);

        // Обработка клика на узле с исправлением утечки таймера
        let clickTimer = null;
        let clickCount = 0;
        let lastClickedNode = null;
        
        node.on("click", function(event, d) {
            event.stopPropagation();
            
            clickCount++;
            
            // Очищаем предыдущий таймер при новом клике
            if (clickTimer) {
                clearTimeout(clickTimer);
                clickTimer = null;
            }
            
            if (clickCount === 1) {
                lastClickedNode = d;
                // Первый клик - ждём, будет ли второй
                clickTimer = setTimeout(() => {
                    // Одинарный клик - подсветка связей
                    if (event.ctrlKey || event.metaKey) {
                        // Ctrl зажат - множественный выбор
                        if (selectedNodes.has(lastClickedNode)) {
                            selectedNodes.delete(lastClickedNode);
                        } else {
                            selectedNodes.add(lastClickedNode);
                        }
                    } else {
                        // Ctrl не зажат - одиночный выбор
                        if (selectedNodes.size === 1 && selectedNodes.has(lastClickedNode)) {
                            selectedNodes.clear();
                        } else {
                            selectedNodes.clear();
                            selectedNodes.add(lastClickedNode);
                        }
                    }
                    
                    if (selectedNodes.size > 0) {
                        highlightConnected(Array.from(selectedNodes));
                    } else {
                        resetHighlight();
                    }
                    clickCount = 0;
                    clickTimer = null;
                    lastClickedNode = null;
                }, 300);
            } else if (clickCount === 2) {
                // Двойной клик - показываем детальную информацию
                showDetailModal(d);
                clickCount = 0;
                lastClickedNode = null;
            }
        });

        // Подсветка связанных узлов и связей (оптимизированная версия)
        function highlightConnected(selectedDataArray) {
            const connectedNodes = new Set();
            const connectedLinks = new Set();
            
            // Обрабатываем каждый выбранный узел
            selectedDataArray.forEach(selectedData => {
                connectedNodes.add(selectedData.id);
                
                // Находим все связанные узлы и связи
                links.forEach(l => {
                    const sourceId = l.source.id || l.source;
                    const targetId = l.target.id || l.target;
                    
                    if (sourceId === selectedData.id) {
                        connectedNodes.add(targetId);
                        connectedLinks.add(l);
                    } else if (targetId === selectedData.id) {
                        connectedNodes.add(sourceId);
                        connectedLinks.add(l);
                    }
                });
            });
            
            // Применяем стили пакетно для лучшей производительности
            const selectedIds = new Set(selectedDataArray.map(sd => sd.id));
            
            node.classed("dimmed", d => !connectedNodes.has(d.id))
                .classed("highlighted", d => connectedNodes.has(d.id))
                .classed("selected", d => selectedIds.has(d.id));
            
            link.classed("dimmed", l => !connectedLinks.has(l))
                .classed("highlighted", l => connectedLinks.has(l));
        }

        // Сброс подсветки
        function resetHighlight() {
            selectedNodes.clear();
            node.classed("dimmed", false)
                .classed("highlighted", false)
                .classed("selected", false);
            link.classed("dimmed", false)
                .classed("highlighted", false)
                .classed("path-highlight", false);
        }

        // Управление сворачиванием панелей
        function togglePanel(panelId) {
            const panel = document.getElementById(panelId);
            const isCollapsed = panel.classList.contains('collapsed');
            
            if (isCollapsed) {
                panel.classList.remove('collapsed');
                // Меняем иконку на минус
                const btn = panel.querySelector('.collapse-btn .expand-icon');
                btn.textContent = '−';
                // Сохраняем состояние
                localStorage.setItem(`${panelId}_collapsed`, 'false');
            } else {
                panel.classList.add('collapsed');
                // Меняем иконку на плюс
                const btn = panel.querySelector('.collapse-btn .expand-icon');
                btn.textContent = '+';
                // Сохраняем состояние
                localStorage.setItem(`${panelId}_collapsed`, 'true');
            }
        }
        
        // Восстановление состояния панелей при загрузке
        function restorePanelStates() {
            const panels = ['pathFinder', 'statsPanel'];
            
            panels.forEach(panelId => {
                const collapsed = localStorage.getItem(`${panelId}_collapsed`) === 'true';
                if (collapsed) {
                    const panel = document.getElementById(panelId);
                    panel.classList.add('collapsed');
                    const btn = panel.querySelector('.collapse-btn .expand-icon');
                    if (btn) btn.textContent = '+';
                }
            });
        }

        // Tooltip с дебаунсом для оптимизации
        const tooltip = d3.select("#tooltip");
        let tooltipTimeout = null;

        node.on("mouseover", function(event, d) {
            if (tooltipTimeout) clearTimeout(tooltipTimeout);
            
            tooltipTimeout = setTimeout(() => {
                tooltip
                    .style("opacity", 1)
                    .html(`<strong>${d.label}</strong><br/>${d.description}<br/><em>${d.concept}</em>`)
                    .style("left", (event.pageX + 15) + "px")
                    .style("top", (event.pageY - 15) + "px");
            }, 100); // Небольшая задержка
        })
        .on("mouseout", function() {
            if (tooltipTimeout) {
                clearTimeout(tooltipTimeout);
                tooltipTimeout = null;
            }
            tooltip.style("opacity", 0);
        });

        link.on("mouseover", function(event, d) {
            if (tooltipTimeout) clearTimeout(tooltipTimeout);
            
            tooltipTimeout = setTimeout(() => {
                const sourceNode = nodes.find(n => n.id === (d.source.id || d.source));
                const targetNode = nodes.find(n => n.id === (d.target.id || d.target));
                const direction = d.bidirectional ? "↔" : "→";
                tooltip
                    .style("opacity", 1)
                    .html(`<strong>${relationTypesObj[d.type].label}</strong><br/>${sourceNode.label} ${direction} ${targetNode.label}`)
                    .style("left", (event.pageX + 15) + "px")
                    .style("top", (event.pageY - 15) + "px");
            }, 100);
        })
        .on("mouseout", function() {
            if (tooltipTimeout) {
                clearTimeout(tooltipTimeout);
                tooltipTimeout = null;
            }
            tooltip.style("opacity", 0);
        });

        function dragstarted(event, d) {
            if (!event.active) {
                tickCount = 0; 
                simulation.alphaTarget(0.3).restart();
            }
            d.fx = d.x;
            d.fy = d.y;
        }

        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }

        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }

        function resetSimulation() {
            nodes.forEach(n => {
                n.fx = null;
                n.fy = null;
            });
            resetHighlight();
            tickCount = 0;
            simulation.alpha(1).restart();
        }

        function centerGraph() {
            const transform = d3.zoomIdentity
                .translate(window.innerWidth / 2, window.innerHeight / 2)
                .scale(1);
            svg.transition().duration(750).call(zoom.transform, transform);
            simulation.force("center", d3.forceCenter(window.innerWidth / 2, window.innerHeight / 2));
            tickCount = 0;
            simulation.alpha(0.3).restart();
        }

        function toggleGrouping() {
            isGrouped = !isGrouped;
            const btn = document.getElementById('groupBtn');
            
            resetHighlight();
            
            if (isGrouped) {
                btn.classList.add('active');
                btn.textContent = '📦 Разгруппировать';
                
                // Добавляем силы группировки
                simulation
                    .force("x", d3.forceX(d => groupPositions[d.concept].x).strength(0.3))
                    .force("y", d3.forceY(d => groupPositions[d.concept].y).strength(0.3))
                    .force("charge", d3.forceManyBody().strength(-200))
                    .force("collision", d3.forceCollide().radius(40));
            } else {
                btn.classList.remove('active');
                btn.textContent = '📦 Группировать';
                
                // Убираем силы группировки
                simulation
                    .force("x", null)
                    .force("y", null)
                    .force("charge", d3.forceManyBody().strength(-350))
                    .force("collision", d3.forceCollide().radius(45))
                    .force("center", d3.forceCenter(window.innerWidth / 2, window.innerHeight / 2));
            }
            tickCount = 0;
            simulation.alpha(0.5).restart();
        }

        window.addEventListener('resize', () => {
            const newWidth = window.innerWidth;
            const newHeight = window.innerHeight;
            svg.attr("width", newWidth).attr("height", newHeight);
            
            // Пересчитываем позиции групп
            const newSpacingX = newWidth / (cols + 1);
            const newSpacingY = newHeight / (rows + 1);
            philosopherNames.forEach((phil, i) => {
                const col = i % cols;
                const row = Math.floor(i / cols);
                groupPositions[phil] = {
                    x: newSpacingX * (col + 1),
                    y: newSpacingY * (row + 1)
                };
            });
            
            if (isGrouped) {
                simulation
                    .force("x", d3.forceX(d => groupPositions[d.concept].x).strength(0.3))
                    .force("y", d3.forceY(d => groupPositions[d.concept].y).strength(0.3));
            } else {
                simulation.force("center", d3.forceCenter(newWidth / 2, newHeight / 2));
            }
            
            simulation.alpha(0.3).restart();
        });
        
        function showDetailModal(conceptData) {
            const modal = document.getElementById('detailModal');
            const overlay = document.getElementById('modalOverlay');
            const content = document.getElementById('modalContent');
            
            // Получаем рубрики этой концепции
            const conceptRubrics = conceptToRubrics[conceptData.id] || [];
            
            let html = `
                <h2>${conceptData.label}</h2>
                <div class="philosopher-tag" style="background: ${philosopherConcepts[conceptData.concept].color}">
                    ${conceptData.concept}
                </div>
                <div class="description">${conceptData.extendedDescription}</div>
                <button class="goto-node-btn" onclick="gotoNodeFromModal('${conceptData.id}')">
                     Перейти к узлу
                </button>
            `;
            
            // Секция связей узла
            const nodeConnections = links.filter(l => {
                const src = l.source.id || l.source;
                const tgt = l.target.id || l.target;
                return src === conceptData.id || tgt === conceptData.id;
            });
            
            if (nodeConnections.length > 0) {
                html += `
                    <div class="connections-section">
                        <div class="connections-title"> Связи узла (${nodeConnections.length})</div>
                `;
                
                nodeConnections.forEach(conn => {
                    const src = conn.source.id || conn.source;
                    const tgt = conn.target.id || conn.target;
                    const isSource = src === conceptData.id;
                    const connectedNodeId = isSource ? tgt : src;
                    const connectedNode = nodes.find(n => n.id === connectedNodeId);
                    
                    if (!connectedNode) return;
                    
                    const linkColor = relationTypesObj[conn.type].color;
                    const linkLabel = relationTypesObj[conn.type].label;
                    const linkType = conn.type;
                    
                    // Определяем направление стрелки
                    let arrow = '';
                    if (conn.bidirectional) {
                        arrow = '↔';
                    } else if (isSource) {
                        arrow = '→';
                    } else {
                        arrow = '←';
                    }
                    
                    html += `
                        <div class="connection-item" onclick="closeDetailModal(); setTimeout(() => showDetailModal(nodes.find(n => n.id === '${connectedNode.id}')), 100);">
                            <div class="concept-color" style="background: ${philosopherConcepts[connectedNode.concept].color}"></div>
                            <div class="connection-arrow" style="color: ${linkColor};">
                                ${arrow}
                                <span class="connection-arrow-tooltip">${linkLabel}</span>
                            </div>
                            <div style="flex-grow: 1;">
                                <div class="concept-name">${connectedNode.label}</div>
                                <div class="concept-philosopher">${connectedNode.concept}</div>
                            </div>
                        </div>
                    `;
                });
                
                html += `</div>`;
            }
            
            // Секция рубрик
            if (conceptRubrics.length > 0) {
                const rubricDataArray = conceptRubrics.map(rubricId => 
                    rubrics.find(r => r.id === rubricId)
                ).filter(r => r !== undefined);
                
                rubricDataArray.forEach(rubricData => {
                    const relatedConcepts = nodes.filter(n => {
                        const nRubrics = conceptToRubrics[n.id] || [];
                        return nRubrics.includes(rubricData.id) && n.id !== conceptData.id;
                    });
                    
                    const showAllId = `show-all-${rubricData.id}`;
                    const initialDisplay = 10;
                    const hasMore = relatedConcepts.length > initialDisplay;
                    
                    html += `
                        <div class="rubric-section">
                            <div class="rubric-title"> Рубрика: ${rubricData.name}</div>
                            <div class="rubric-description">${rubricData.description}</div>
                            
                            ${relatedConcepts.length > 0 ? `
                                <div class="related-concepts">
                                    <div class="related-title">Также в этой рубрике (${relatedConcepts.length}):</div>
                                    <div id="${showAllId}-container">
                                        ${relatedConcepts.slice(0, initialDisplay).map(c => `
                                            <div class="concept-item" onclick="closeDetailModal(); setTimeout(() => showDetailModal(nodes.find(n => n.id === '${c.id}')), 100);">
                                                <div class="concept-color" style="background: ${philosopherConcepts[c.concept].color}"></div>
                                                <div class="concept-name">${c.label}</div>
                                                <div class="concept-philosopher">${c.concept}</div>
                                            </div>
                                        `).join('')}
                                    </div>
                                    ${hasMore ? `
                                        <button class="show-all-concepts-btn" id="${showAllId}" onclick="showAllConcepts('${rubricData.id}', '${conceptData.id}')">
                                            Показать все (${relatedConcepts.length})
                                        </button>
                                    ` : ''}
                                </div>
                            ` : ''}
                        </div>
                    `;
                });
            } else {
                html += `<div class="rubric-section">
                    <div class="rubric-description" style="color: #95a5a6;">
                        Эта концепция пока не отнесена к какой-либо рубрике.
                    </div>
                </div>`;
            }
            
            content.innerHTML = html;
            modal.classList.add('show');
            overlay.classList.add('show');
        }

        // Функция перехода к узлу из модального окна
        function gotoNodeFromModal(nodeId) {
            closeDetailModal();
            
            setTimeout(() => {
                const nodeData = nodes.find(n => n.id === nodeId);
                if (nodeData) {
                    // Выделяем узел
                    selectedNodes.clear();
                    selectedNodes.add(nodeData);
                    highlightConnected([nodeData]);
                    
                    // Центрируем на узле
                    const nodeElement = node.filter(d => d.id === nodeId);
                    if (nodeElement.size() > 0) {
                        const d = nodeElement.datum();
                        const transform = d3.zoomIdentity
                            .translate(width / 2 - d.x, height / 2 - d.y)
                            .scale(1.5);
                        svg.transition().duration(750).call(zoom.transform, transform);
                    }
                }
            }, 100);
        }

        // Функция показа всех концепций в рубрике
        function showAllConcepts(rubricId, currentConceptId) {
            const rubricData = rubrics.find(r => r.id === rubricId);
            if (!rubricData) return;
            
            const relatedConcepts = nodes.filter(n => {
                const nRubrics = conceptToRubrics[n.id] || [];
                return nRubrics.includes(rubricId) && n.id !== currentConceptId;
            });
            
            const containerId = `show-all-${rubricId}-container`;
            const buttonId = `show-all-${rubricId}`;
            const container = document.getElementById(containerId);
            const button = document.getElementById(buttonId);
            
            if (container && button) {
                // Показываем все концепции
                container.innerHTML = relatedConcepts.map(c => `
                    <div class="concept-item" onclick="closeDetailModal(); setTimeout(() => showDetailModal(nodes.find(n => n.id === '${c.id}')), 100);">
                        <div class="concept-color" style="background: ${philosopherConcepts[c.concept].color}"></div>
                        <div class="concept-name">${c.label}</div>
                        <div class="concept-philosopher">${c.concept}</div>
                    </div>
                `).join('');
                
                // Скрываем кнопку
                button.style.display = 'none';
            }
        }
        
        function closeDetailModal() {
            const modal = document.getElementById('detailModal');
            const overlay = document.getElementById('modalOverlay');
            const content = document.getElementById('modalContent');
            
            // Очищаем содержимое для удаления обработчиков
            content.innerHTML = '';
            
            modal.classList.remove('show');
            overlay.classList.remove('show');
        }
        
        // Закрытие по клику на overlay
        document.getElementById('modalOverlay').addEventListener('click', closeDetailModal);
        
        // Закрытие по Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeDetailModal();
            }
        });
        
        // Инициализируем фильтры при загрузке
        console.log("Инициализация графа:", nodes.length, "узлов,", links.length, "связей");
        initFilters();
        updateFilterStats();
        
        // Инициализируем новые функции
        initPathFinder();
        
        // Восстанавливаем состояние панелей
        restorePanelStates();
        
        // Обновляем статистику после завершения симуляции
        simulation.on("end", () => {
            console.log("Симуляция завершена. Запустите анализ вручную.");
        });
        
        // Обработчики для чекбоксов
        document.getElementById('useWeightsToggle').checked = useWeightedPaths;
        document.getElementById('respectDirectionToggle').checked = respectDirection;
        
        // Инициализация оригинальных радиусов
        saveOriginalRadii();
        
        console.log("Граф инициализирован. Используйте кнопки для запуска анализа.");
        console.log("Текущий режим: веса -", useWeightedPaths ? "ВКЛ" : "ВЫКЛ", 
                    ", направленность -", respectDirection ? "ВКЛ" : "ВЫКЛ");

        // ============================================
        // ИНИЦИАЛИЗАЦИЯ ОБРАБОТЧИКОВ СОБЫТИЙ ХРОНОЛОГИИ
        // ============================================

        // Показывать/скрывать селектор режима при изменении чекбокса
        document.getElementById('respectChronology').addEventListener('change', function() {
            const container = document.getElementById('chronologyModeContainer');
            container.style.display = this.checked ? 'block' : 'none';
        });

        // Обновлять описание при смене режима
        document.getElementById('chronologyModeSelect').addEventListener('change', function() {
            const infoDiv = document.getElementById('chronologyModeInfo');
            const descriptions = {
                strict: '<strong>Строгий режим:</strong> учитывает реальные периоды жизни и активности философов (с 25 лет). Блокирует все анахронизмы. Пример: Гегель не может влиять на Канта.',
                moderate: '<strong>Умеренный режим:</strong> допускает влияние современников в пределах ±50 лет от рождения. Менее строгий, но всё ещё блокирует явные анахронизмы.',
                loose: '<strong>Свободный режим:</strong> разрешает влияние в пределах ±100 лет. Подходит для поиска концептуальных связей без строгой хронологии.'
            };
            infoDiv.innerHTML = descriptions[this.value];
            
            // Обновляем глобальную переменную режима
            currentChronologyMode = this.value;
        });

        // Инициализация: показать селектор, если хронология включена
        if (document.getElementById('respectChronology').checked) {
            document.getElementById('chronologyModeContainer').style.display = 'block';
        }

        console.log('Обработчики событий хронологии инициализированы');
        
    </script>
</body>
</html>
